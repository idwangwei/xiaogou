webpackJsonp([47],{0:function(e,t,n){"use strict";n(5601),n(5602)},171:function(e,t,n){"use strict";function i(e,t,n){k=e,t&&(y=t),n&&(S=n);var i=angular.element("body").injector(),r=i.get("$rootScope"),o=i.get("$ngRedux");y&&n?o?o.mergeReducer(y,S).then(function(){console.log(e.name+"-storeReady!!!!!!!!!!"),r.$$listeners[e.name+"-storeReady"]?r.$broadcast(e.name+"-storeReady"):r[e.name+"-storeReady"]=!0}):(console.error("$ngRedux not found!"),r[e.name+"-storeReady"]=!0):r[e.name+"-storeReady"]=!0}function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){function n(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return z(t,e,i),e.$inject=t,e.instance=new(Function.prototype.bind.apply(e,[null].concat(i))),e.instance}return n.prototype=e.prototype,n.$inject=t,n}}function o(e,t){return function(n){var i=function(e){return e.targetScope.ctrl},r=function(e,t){Object.keys(t).concat(Object.getOwnPropertyNames(t.__proto__)).forEach(function(n){if("constructor"!==n)if(e[n])if(angular.isFunction(e[n])&&angular.isFunction(t[n])){var i=e[n];e[n]=function(){var e=this,r=arguments;i.call(this,arguments).then(function(){t[n].call(e,r)})}}else e[n]=t[n];else e[n]=t[n]})};k.run(["$rootScope","$injector",function(o,a){o.$on("$ionicView.loaded",function(o,c){if(c.stateName===e){var l=i(o),s=new n;t.inject&&t.inject.length&&t.inject.forEach(function(e){s[e]=a.get(e)}),r(l,s)}})}])}}function a(e,t){return function(n){function i(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];t.inject&&t.inject.length&&z(t.inject,n,i);var o=new(Function.prototype.bind.apply(n,[null].concat(i)));o.selectorList=o.selectorList?o.selectorList:[];var a=function(){},c={initFlags:a,initData:a,mapStateToThis:a,mapActionToThis:a,componentWillReceiveProps:a,onBeforeEnterView:a,onAfterEnterView:a,onBeforeLeaveView:a,onLoadedView:a,onUpdate:a,configDataPipe:a,onReceiveProps:a},l={viewEntered:!1,hasPageRefreshManger:!1,dataPipe:new b.default},s=a,u=a;Object.keys(c).forEach(function(e){o[e]||(o[e]=c[e])}),Object.assign(o,l),o.configDataPipe(),o.mapStateObj={selectorList:o.selectorList,mapStateToThis:o.mapStateToThis};var p=o.getScope();if(!p)throw new Error('$scope must be injected with Decorator "@View"');var d=o.$ngRedux;if(!d)throw new Error('$ngRedux must be injected with Decorator "@View"');var f=o.pageRefreshManager;if(!o.getStateService)throw new Error("$state is required with pageRefreshManager");if(o.go=function(e,t,n){if(!o.getStateService||!o.getStateService())return console.error("$state service is not injected!");"string"!=typeof t&&(n=t,t="forward");var i=o.$injector.get("$ionicViewSwitcher");o.viewEntered=!1,"none"!=t?i.nextDirection(t):i.nextDirection("none"),o.getStateService().go(e,n)},f&&f.getListenerName&&(o.hasPageRefreshManger=!0,o.hasPageRefreshManger)){var g=o.getStateService();u=p.$on(f.getListenerName(g.current,g.params),function(e,t){f.shouldUpdate(g,t.url)&&o.onUpdate()})}var h=p.$on("$ionicView.beforeEnter",function(){if(o.onBeforeEnterView(),o.getRootScope&&o.back){o.getRootScope().viewGoBack=o.back.bind(o)}}),m=p.$on("$ionicView.beforeLeave",function(){s(),o.viewEntered=!1,o.onBeforeLeaveView()}),v=p.$on("$ionicView.loaded",function(){o.onLoadedView()}),w=p.$on("$ionicView.afterEnter",function(){p.$evalAsync(function(){o.viewEntered=!0,s=d.connect(o.mapStateObj,o.mapActionToThis(),o)(function(e,t){o.viewEntered&&(Object.assign(o,e,t),o.dataPipe.run(o),p.$evalAsync(function(){o.onReceiveProps(e,t)}))}),o.onAfterEnterView()})});return p.$on("$destroy",function(){s(),u(),w(),h(),m(),v()}),o}return i.prototype=n.prototype,i.$inject=n.$inject,t.inject&&t.inject.length&&(i.$inject=t.inject),i.$inject.push("$injector"),k.config(["$stateProvider",function(n){if(t.views){var r=Object.keys(t.views)[0],o=t.views[r];o.controller=i,o.controllerAs=o.controllerAs||"ctrl"}else t.controller=i,t.controllerAs=t.controllerAs||"ctrl";n.state(e,t)}]),i}}function c(e){return function(t){if(!e.selector)throw new Error("selector must be provided!");e.controller=t,e.controllerAs||(e.controllerAs="ctrl"),k.directive(e.selector,function(){return e})}}function l(e){return function(t){t.controller=t,k.component(e.selector,e)}}function s(e){return function(t,n,i){if(i.writable=!0,t.selectorList||(t.selectorList=[]),e)if("string"==typeof e)t.selectorList.push({type:x,key:n,selector:e});else if(e instanceof Array)t.selectorList.push({type:w,key:n,selector:e});else{if(!(e instanceof Function))throw new Error("unknown selector type!");t.selectorList.push({type:_,key:n,selector:e})}else t.selectorList.push({type:v,key:n})}}function u(e,t,n){var i=n.value,r=void 0;return n.value=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=e.$ngRedux;if(!a)throw new Error("$ngRedux is required by decorator @actionCreator");var c=(0,m.bindActionCreators)(i.bind(e.constructor.instance),a.dispatch);return r=c.apply(e,n)},n}function p(e,t){return function(n){k.constant(e,t)}}function d(e,t){return function(n){t&&t.inject&&t.inject.length&&(n.$inject=t.inject),k.service(e,n)}}function f(e,t,n){var i=n.value;return n.value=function(){var e=this;return new Promise(function(t){i.call(e,t)})},n}Object.defineProperty(t,"__esModule",{value:!0}),t.registerModule=i,t.Inject=r,t.ViewDecorator=o,t.View=a,t.Directive=c,t.Component=l,t.select=s,t.actionCreator=u,t.Constant=p,t.Service=d,t.PromiseFn=f;var g=n(172),h=n(174),b=function(e){return e&&e.__esModule?e:{default:e}}(h),m=n(176),v="EMPTY_SELECTOR_TYPE",w="PATH_SELECTOR_TYPE",_="FUNCTION_SELECTOR_TYPE",x="STR_SELECTOR_TYPE",k=g.ngDecModule,y=void 0,S=void 0,z=function(e,t,n){e.forEach(function(e,i){"$scope"==e?t.prototype.getScope=function(){return n[i]}:"$rootScope"==e?t.prototype.getRootScope=function(){return n[i]}:"$state"==e?t.prototype.getStateService=function(){return n[i]}:"$ngRedux"==e?(t.prototype.getState=function(){return n[i].getState()},t.prototype[e]=n[i]):t.prototype[e]=n[i]})}},172:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ngDecModule=void 0,n(173);var i=angular.module("ngDecModule",[]);t.ngDecModule=i},174:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(175),a=function(e){return e&&e.__esModule?e:{default:e}}(o),c=function(){function e(t,n,r){i(this,e),this.id=(0,a.default)(),this.criteriaList=t||[],this.invokeList=n||[],this.sequence=r||0}return r(e,[{key:"pushCriteria",value:function(e){this.criteriaList.push(e)}},{key:"pushInvoke",value:function(e){this.invokeList.push(e)}}]),e}(),l=function(){function e(){i(this,e),this.configList=[],this.lastConfigId=null,this.lastActionType=u.PUSH_CRITERIA}return r(e,[{key:"getLastConfig",value:function(){var e=this,t=null,n=void 0;switch(this.lastActionType){case u.PUSH_CRITERIA:return this.lastConfigId?this.configList.forEach(function(n){n.id==e.lastConfigId&&(t=n)}):(t=new c,t.sequence=1,this.configList.push(t),this.lastConfigId=t.id),t;case u.PUSH_INVOKE:case u.NEXT:return this.configList.forEach(function(n){n.id==e.lastConfigId&&(t=n)}),n=new c,n.sequence=t.sequence++,this.configList.push(n),this.lastConfigId=n.id,n}}},{key:"when",value:function(e){return"function"!=typeof e?console.error(s.CRITERIA_ERROR):(this.getLastConfig().pushCriteria(e),this.lastActionType=u.PUSH_CRITERIA,this)}},{key:"then",value:function(e){return"function"!=typeof e?console.error(s.INVOKE_ERROR):(this.getLastConfig().pushInvoke(e),this.lastActionType=u.PUSH_INVOKE,this)}},{key:"next",value:function(){return this.lastActionType=u.NEXT,this}},{key:"run",value:function(e){for(var t=!0,n=this.configList.slice(0,this.configList.length);t&&n.length;){for(var i=[n.shift()];n[0]&&i[0].sequence==n[0].sequence;)i.push(n.shift());for(var r=0;r<i.length;r++)!function(n){var r=i[n],o=!0;r.criteriaList.forEach(function(t){o=o&&t.call(e)}),o?r.invokeList.forEach(function(t){t.call(e)}):t=!1}(r)}}}]),e}(),s={CRITERIA_ERROR:"criteria should be function!",INVOKE_ERROR:"invoke should be function"},u={PUSH_CRITERIA:"PUSH_CRITERIA",PUSH_INVOKE:"PUSH_INVOKE",NEXT:"NEXT"};window.dataPipe=new l,t.default=l},175:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return Math.pow(2,e)},i=(n(4),n(6)),r=n(8),o=n(12),a=(n(14),n(16)),c=n(32),l=(n(40),n(48),function(e,t){return Math.floor(Math.random()*(t-e+1))+e}),s=function(){return l(0,i-1)},u=function(){return l(0,r-1)},p=function(){return l(0,o-1)},d=function(){return l(0,a-1)},f=function(){return l(0,c-1)},g=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},h=function(e,t,n){e=String(e),n=n||"0";for(var i=t-e.length;i>0;i>>>=1,n+=n)1&i&&(e=n+e);return e},b=function(e,t,n,i,r,o){return h(e.toString(16),8)+"-"+h(t.toString(16),4)+"-"+h(n.toString(16),4)+"-"+h(i.toString(16),2)+h(r.toString(16),2)+"-"+h(o.toString(16),12)},m=function(){return b(f(),d(),16384|p(),128|s(),u(),g())};t.default=m},282:function(e,t,n){(function(e,n){function i(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(t(e[n],n,e))return!0;return!1}function r(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}function o(e){return function(t){return null==t?void 0:t[e]}}function a(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function c(e,t){return null==e?void 0:e[t]}function l(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function s(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function u(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function p(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function d(){this.__data__=Ht?Ht(null):{}}function f(e){return this.has(e)&&delete this.__data__[e]}function g(e){var t=this.__data__;if(Ht){var n=t[e];return n===Fe?void 0:n}return $t.call(t,e)?t[e]:void 0}function h(e){var t=this.__data__;return Ht?void 0!==t[e]:$t.call(t,e)}function b(e,t){return this.__data__[e]=Ht&&void 0===t?Fe:t,this}function m(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function v(){this.__data__=[]}function w(e){var t=this.__data__,n=F(t,e);return!(n<0)&&(n==t.length-1?t.pop():Mt.call(t,n,1),!0)}function _(e){var t=this.__data__,n=F(t,e);return n<0?void 0:t[n][1]}function x(e){return F(this.__data__,e)>-1}function k(e,t){var n=this.__data__,i=F(n,e);return i<0?n.push([e,t]):n[i][1]=t,this}function y(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function S(){this.__data__={hash:new p,map:new(Ut||m),string:new p}}function z(e){return re(this,e).delete(e)}function q(e){return re(this,e).get(e)}function P(e){return re(this,e).has(e)}function T(e,t){return re(this,e).set(e,t),this}function j(e){var t=-1,n=e?e.length:0;for(this.__data__=new y;++t<n;)this.add(e[t])}function D(e){return this.__data__.set(e,Fe),this}function E(e){return this.__data__.has(e)}function C(e){this.__data__=new m(e)}function A(){this.__data__=new m}function $(e){return this.__data__.delete(e)}function O(e){return this.__data__.get(e)}function L(e){return this.__data__.has(e)}function I(e,t){var n=this.__data__;if(n instanceof m){var i=n.__data__;if(!Ut||i.length<Ie-1)return i.push([e,t]),this;n=this.__data__=new y(i)}return n.set(e,t),this}function N(e,t){var n=cn(e)||_e(e)?a(e.length,String):[],i=n.length,r=!!i;for(var o in e)!t&&!$t.call(e,o)||r&&("length"==o||le(o,i))||n.push(o);return n}function F(e,t){for(var n=e.length;n--;)if(we(e[n][0],t))return n;return-1}function M(e,t){t=se(t,e)?[t]:ee(t);for(var n=0,i=t.length;null!=e&&n<i;)e=e[he(t[n++])];return n&&n==i?e:void 0}function R(e){return Ot.call(e)}function B(e,t){return null!=e&&t in Object(e)}function Q(e,t,n,i,r){return e===t||(null==e||null==t||!ze(e)&&!qe(t)?e!==e&&t!==t:U(e,t,Q,n,i,r))}function U(e,t,n,i,r,o){var a=cn(e),c=cn(t),s=Ge,u=Ge;a||(s=rn(e),s=s==Ve?tt:s),c||(u=rn(t),u=u==Ve?tt:u);var p=s==tt&&!l(e),d=u==tt&&!l(t),f=s==u;if(f&&!p)return o||(o=new C),a||ln(e)?te(e,t,n,i,r,o):ne(e,t,s,n,i,r,o);if(!(r&Re)){var g=p&&$t.call(e,"__wrapped__"),h=d&&$t.call(t,"__wrapped__");if(g||h){var b=g?e.value():e,m=h?t.value():t;return o||(o=new C),n(b,m,i,r,o)}}return!!f&&(o||(o=new C),ie(e,t,n,i,r,o))}function W(e,t,n,i){var r=n.length,o=r,a=!i;if(null==e)return!o;for(e=Object(e);r--;){var c=n[r];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++r<o;){c=n[r];var l=c[0],s=e[l],u=c[1];if(a&&c[2]){if(void 0===s&&!(l in e))return!1}else{var p=new C;if(i)var d=i(s,u,l,e,t,p);if(!(void 0===d?Q(u,s,i,Me|Re,p):d))return!1}}return!0}function V(e){return!(!ze(e)||pe(e))&&(ye(e)||l(e)?Lt:gt).test(be(e))}function G(e){return qe(e)&&Se(e.length)&&!!mt[Ot.call(e)]}function H(e){return"function"==typeof e?e:null==e?Oe:"object"==typeof e?cn(e)?Z(e[0],e[1]):K(e):Le(e)}function Y(e){if(!de(e))return Rt(e);var t=[];for(var n in Object(e))$t.call(e,n)&&"constructor"!=n&&t.push(n);return t}function K(e){var t=oe(e);return 1==t.length&&t[0][2]?ge(t[0][0],t[0][1]):function(n){return n===e||W(n,e,t)}}function Z(e,t){return se(e)&&fe(t)?ge(he(e),t):function(n){var i=Ce(n,e);return void 0===i&&i===t?Ae(n,e):Q(t,i,void 0,Me|Re)}}function J(e){return function(t){return M(t,e)}}function X(e){if("string"==typeof e)return e;if(Pe(e))return nn?nn.call(e):"";var t=e+"";return"0"==t&&1/e==-Be?"-0":t}function ee(e){return cn(e)?e:on(e)}function te(e,t,n,r,o,a){var c=o&Re,l=e.length,s=t.length;if(l!=s&&!(c&&s>l))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var p=-1,d=!0,f=o&Me?new j:void 0;for(a.set(e,t),a.set(t,e);++p<l;){var g=e[p],h=t[p];if(r)var b=c?r(h,g,p,t,e,a):r(g,h,p,e,t,a);if(void 0!==b){if(b)continue;d=!1;break}if(f){if(!i(t,function(e,t){if(!f.has(t)&&(g===e||n(g,e,r,o,a)))return f.add(t)})){d=!1;break}}else if(g!==h&&!n(g,h,r,o,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function ne(e,t,n,i,r,o,a){switch(n){case ct:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case at:return!(e.byteLength!=t.byteLength||!i(new Nt(e),new Nt(t)));case He:case Ye:case et:return we(+e,+t);case Ke:return e.name==t.name&&e.message==t.message;case nt:case rt:return e==t+"";case Xe:var c=s;case it:var l=o&Re;if(c||(c=u),e.size!=t.size&&!l)return!1;var p=a.get(e);if(p)return p==t;o|=Me,a.set(e,t);var d=te(c(e),c(t),i,r,o,a);return a.delete(e),d;case ot:if(tn)return tn.call(e)==tn.call(t)}return!1}function ie(e,t,n,i,r,o){var a=r&Re,c=$e(e),l=c.length;if(l!=$e(t).length&&!a)return!1;for(var s=l;s--;){var u=c[s];if(!(a?u in t:$t.call(t,u)))return!1}var p=o.get(e);if(p&&o.get(t))return p==t;var d=!0;o.set(e,t),o.set(t,e);for(var f=a;++s<l;){u=c[s];var g=e[u],h=t[u];if(i)var b=a?i(h,g,u,t,e,o):i(g,h,u,e,t,o);if(!(void 0===b?g===h||n(g,h,i,r,o):b)){d=!1;break}f||(f="constructor"==u)}if(d&&!f){var m=e.constructor,v=t.constructor;m!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof v&&v instanceof v)&&(d=!1)}return o.delete(e),o.delete(t),d}function re(e,t){var n=e.__data__;return ue(t)?n["string"==typeof t?"string":"hash"]:n.map}function oe(e){for(var t=$e(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,fe(r)]}return t}function ae(e,t){var n=c(e,t);return V(n)?n:void 0}function ce(e,t,n){t=se(t,e)?[t]:ee(t);for(var i,r=-1,o=t.length;++r<o;){var a=he(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}if(i)return i;var o=e?e.length:0;return!!o&&Se(o)&&le(a,o)&&(cn(e)||_e(e))}function le(e,t){return!!(t=null==t?Qe:t)&&("number"==typeof e||bt.test(e))&&e>-1&&e%1==0&&e<t}function se(e,t){if(cn(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Pe(e))||(st.test(e)||!lt.test(e)||null!=t&&e in Object(t))}function ue(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function pe(e){return!!Ct&&Ct in e}function de(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Dt)}function fe(e){return e===e&&!ze(e)}function ge(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function he(e){if("string"==typeof e||Pe(e))return e;var t=e+"";return"0"==t&&1/e==-Be?"-0":t}function be(e){if(null!=e){try{return At.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function me(e,t,n){var i=e?e.length:0;if(!i)return-1;var o=null==n?0:je(n);return o<0&&(o=Bt(i+o,0)),r(e,H(t,3),o)}function ve(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(Ne);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=e.apply(this,i);return n.cache=o.set(r,a),a};return n.cache=new(ve.Cache||y),n}function we(e,t){return e===t||e!==e&&t!==t}function _e(e){return ke(e)&&$t.call(e,"callee")&&(!Ft.call(e,"callee")||Ot.call(e)==Ve)}function xe(e){return null!=e&&Se(e.length)&&!ye(e)}function ke(e){return qe(e)&&xe(e)}function ye(e){var t=ze(e)?Ot.call(e):"";return t==Ze||t==Je}function Se(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Qe}function ze(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function qe(e){return!!e&&"object"==typeof e}function Pe(e){return"symbol"==typeof e||qe(e)&&Ot.call(e)==ot}function Te(e){if(!e)return 0===e?e:0;if((e=De(e))===Be||e===-Be){return(e<0?-1:1)*Ue}return e===e?e:0}function je(e){var t=Te(e),n=t%1;return t===t?n?t-n:t:0}function De(e){if("number"==typeof e)return e;if(Pe(e))return We;if(ze(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ze(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(pt,"");var n=ft.test(e);return n||ht.test(e)?vt(e.slice(2),n?2:8):dt.test(e)?We:+e}function Ee(e){return null==e?"":X(e)}function Ce(e,t,n){var i=null==e?void 0:M(e,t);return void 0===i?n:i}function Ae(e,t){return null!=e&&ce(e,t,B)}function $e(e){return xe(e)?N(e):Y(e)}function Oe(e){return e}function Le(e){return se(e)?o(he(e)):J(e)}var Ie=200,Ne="Expected a function",Fe="__lodash_hash_undefined__",Me=1,Re=2,Be=1/0,Qe=9007199254740991,Ue=1.7976931348623157e308,We=NaN,Ve="[object Arguments]",Ge="[object Array]",He="[object Boolean]",Ye="[object Date]",Ke="[object Error]",Ze="[object Function]",Je="[object GeneratorFunction]",Xe="[object Map]",et="[object Number]",tt="[object Object]",nt="[object RegExp]",it="[object Set]",rt="[object String]",ot="[object Symbol]",at="[object ArrayBuffer]",ct="[object DataView]",lt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,st=/^\w*$/,ut=/^\./,pt=/^\s+|\s+$/g,dt=/^[-+]0x[0-9a-f]+$/i,ft=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,ht=/^0o[0-7]+$/i,bt=/^(?:0|[1-9]\d*)$/,mt={};mt["[object Float32Array]"]=mt["[object Float64Array]"]=mt["[object Int8Array]"]=mt["[object Int16Array]"]=mt["[object Int32Array]"]=mt["[object Uint8Array]"]=mt["[object Uint8ClampedArray]"]=mt["[object Uint16Array]"]=mt["[object Uint32Array]"]=!0,mt[Ve]=mt[Ge]=mt[at]=mt[He]=mt[ct]=mt[Ye]=mt[Ke]=mt[Ze]=mt[Xe]=mt[et]=mt[tt]=mt[nt]=mt[it]=mt[rt]=mt["[object WeakMap]"]=!1;var vt=parseInt,wt="object"==typeof e&&e&&e.Object===Object&&e,_t="object"==typeof self&&self&&self.Object===Object&&self,xt=wt||_t||Function("return this")(),kt="object"==typeof t&&t&&!t.nodeType&&t,yt=kt&&"object"==typeof n&&n&&!n.nodeType&&n,St=yt&&yt.exports===kt,zt=St&&wt.process,qt=function(){try{return zt&&zt.binding("util")}catch(e){}}(),Pt=qt&&qt.isTypedArray,Tt=Array.prototype,jt=Function.prototype,Dt=Object.prototype,Et=xt["__core-js_shared__"],Ct=function(){var e=/[^.]+$/.exec(Et&&Et.keys&&Et.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),At=jt.toString,$t=Dt.hasOwnProperty,Ot=Dt.toString,Lt=RegExp("^"+At.call($t).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),It=xt.Symbol,Nt=xt.Uint8Array,Ft=Dt.propertyIsEnumerable,Mt=Tt.splice,Rt=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),Bt=Math.max,Qt=ae(xt,"DataView"),Ut=ae(xt,"Map"),Wt=ae(xt,"Promise"),Vt=ae(xt,"Set"),Gt=ae(xt,"WeakMap"),Ht=ae(Object,"create"),Yt=be(Qt),Kt=be(Ut),Zt=be(Wt),Jt=be(Vt),Xt=be(Gt),en=It?It.prototype:void 0,tn=en?en.valueOf:void 0,nn=en?en.toString:void 0;p.prototype.clear=d,p.prototype.delete=f,p.prototype.get=g,p.prototype.has=h,p.prototype.set=b,m.prototype.clear=v,m.prototype.delete=w,m.prototype.get=_,m.prototype.has=x,m.prototype.set=k,y.prototype.clear=S,y.prototype.delete=z,y.prototype.get=q,y.prototype.has=P,y.prototype.set=T,j.prototype.add=j.prototype.push=D,j.prototype.has=E,C.prototype.clear=A,C.prototype.delete=$,C.prototype.get=O,C.prototype.has=L,C.prototype.set=I;var rn=R;(Qt&&rn(new Qt(new ArrayBuffer(1)))!=ct||Ut&&rn(new Ut)!=Xe||Wt&&"[object Promise]"!=rn(Wt.resolve())||Vt&&rn(new Vt)!=it||Gt&&"[object WeakMap]"!=rn(new Gt))&&(rn=function(e){var t=Ot.call(e),n=t==tt?e.constructor:void 0,i=n?be(n):void 0;if(i)switch(i){case Yt:return ct;case Kt:return Xe;case Zt:return"[object Promise]";case Jt:return it;case Xt:return"[object WeakMap]"}return t});var on=ve(function(e){e=Ee(e);var t=[];return ut.test(e)&&t.push(""),e.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(e,n,i,r){t.push(i?r.replace(/\\(\\)?/g,"$1"):n||e)}),t}),an=function(e){return function(t,n,i){var r=Object(t);if(!xe(t)){var o=H(n,3);t=$e(t),n=function(e){return o(r[e],e,r)}}var a=e(t,n,i);return a>-1?r[o?t[a]:a]:void 0}}(me);ve.Cache=y;var cn=Array.isArray,ln=Pt?function(e){return function(t){return e(t)}}(Pt):G;n.exports=an}).call(t,function(){return this}(),n(190)(e))},283:function(e,t){"use strict";e.exports=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.VERTICAL_CALC_SCOREPOINT_TYPE="vertical",t.VERTICAL_ERROR_SCOREPOINT_TYPE="verticalErr",t.VERTICAL_FILLBLANKS_SCOREPOINT_TYPE="vertical"}])},438:function(e,t){function n(e,t){for(var n=-1,i=e?e.length:0;++n<i&&!1!==t(e[n],n,e););return e}function i(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function r(e,t){var n=E(e)||u(e)?i(e.length,String):[],r=n.length,o=!!r;for(var a in e)!t&&!z.call(e,a)||o&&("length"==a||c(a,r))||n.push(a);return n}function o(e,t){return e&&D(e,t,m)}function a(e){if(!l(e))return T(e);var t=[];for(var n in Object(e))z.call(e,n)&&"constructor"!=n&&t.push(n);return t}function c(e,t){return!!(t=null==t?w:t)&&("number"==typeof e||y.test(e))&&e>-1&&e%1==0&&e<t}function l(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||S)}function s(e,t){return(E(e)?n:j)(e,"function"==typeof t?t:v)}function u(e){return d(e)&&z.call(e,"callee")&&(!P.call(e,"callee")||q.call(e)==_)}function p(e){return null!=e&&g(e.length)&&!f(e)}function d(e){return b(e)&&p(e)}function f(e){var t=h(e)?q.call(e):"";return t==x||t==k}function g(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=w}function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){return!!e&&"object"==typeof e}function m(e){return p(e)?r(e):a(e)}function v(e){return e}var w=9007199254740991,_="[object Arguments]",x="[object Function]",k="[object GeneratorFunction]",y=/^(?:0|[1-9]\d*)$/,S=Object.prototype,z=S.hasOwnProperty,q=S.toString,P=S.propertyIsEnumerable,T=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),j=function(e,t){return function(n,i){if(null==n)return n;if(!p(n))return e(n,i);for(var r=n.length,o=t?r:-1,a=Object(n);(t?o--:++o<r)&&!1!==i(a[o],o,a););return n}}(o),D=function(e){return function(t,n,i){for(var r=-1,o=Object(t),a=i(t),c=a.length;c--;){var l=a[e?c:++r];if(!1===n(o[l],l,o))break}return t}}(),E=Array.isArray;e.exports=s},4485:function(e,t,n){e.exports=n.p+"images/wechat.ico"},4487:function(e,t,n){e.exports=n.p+"images/qq.ico"},4666:function(e,t,n){e.exports=n.p+"images/back-to-top.png"},4787:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={id:"371ab85f-208f-4883-8738-888bcb173acb",text:"体验试卷",code:"BS-20-1",seq:0,subTags:[{id:"4c1f1f48-2c7f-46f0-9a98-6a90cca8ef77",text:"1.体验-综合体验",code:"BS-20-1-综合测验（请勿布置）",seq:0,subTags:[]}]}},5601:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.t_work_publish2=void 0;var i=n(171);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var r=angular.module("t_work_publish2",[]);(0,i.registerModule)(r),t.t_work_publish2=r},5602:function(e,t,n){"use strict";n(5603),n(5607),n(5611)},5603:function(e,t,n){"use strict";function i(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(t,"__esModule",{value:!0});var a,c,l,s,u,p,d,f,g,h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=n(438),v=function(e){return e&&e.__esModule?e:{default:e}}(m),w=n(4787),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(w),x=n(5601),k=(a=(0,x.View)("pub_review_work",{url:"/pub_review_work/:from/:urlFrom",template:n(5604),styles:n(5605),inject:["$scope","$ionicModal","$state","$ionicPopup","$ngRedux","$rootScope","pubWorkService","commonService","workPaperBankService"]}),c=(0,x.select)("wr_textbooks"),l=(0,x.select)(function(e){return e.wr_selected_textbook[e.wl_selected_clazz.id]}),s=(0,x.select)(function(e){return e.compose_temp_paper.tempPaperSetParams}),a((p=function(){function e(){var t=this;r(this,e),this.initCtrl=!1,this.Modal={},this.totalSelectQues={},i(this,"textbooks",d,this),i(this,"textbook",f,this),i(this,"localTotalSelectQues",g,this),this.back=function(){return t.go("pub_work_type")},this.openModal=function(){return t.Modal.show()},this.closeModal=function(){return t.Modal.hide()},this.simulationPaper=_.default,this.initModal()}return b(e,[{key:"initData",value:function(){var e=this;this.localTotalSelectQues||(this.totalSelectQues=[]),angular.forEach(this.localTotalSelectQues,function(t,n){e.totalSelectQues[t.tagId]=e.localTotalSelectQues[n]})}},{key:"configDataPipe",value:function(){var e=this;this.dataPipe.when(function(){return!e.initCtrl}).then(function(){return e.initCtrl=!0}).then(function(){e.guideFlag=e.commonService.getSimulationClazzLocalData();var t=!0;e.guideFlag&&!e.guideFlag.hasPubedSimulationWork&&(t=!1),e.workPaperBankService.getTextbookList(function(){e.textbook&&e.textbook.id?e.workPaperBankService.selectTextbook(e.textbook,t):e.workPaperBankService.selectTextbook(null,t)},void 0,!0)})}},{key:"getTotalSelectNum",value:function(){var e=this;this.totalSelectNum=0,Object.keys(this.totalSelectQues).forEach(function(t){e.totalSelectNum+=Number(e.totalSelectQues[t].questionNum)})}},{key:"onAfterEnterView",value:function(){this.initData(),this.getTotalSelectNum()}},{key:"onBeforeEnterView",value:function(){var e=this;this.guideFlag=this.commonService.getSimulationClazzLocalData();var t=!0;this.guideFlag&&!this.guideFlag.hasPubedSimulationWork&&(t=!1),"work_list"===this.getStateService().params.urlFrom&&(this.initCtrl=!0,this.workPaperBankService.getTextbookList(function(){e.workPaperBankService.selectTextbook(e.textbook,t)}))}},{key:"initModal",value:function(){var e=this;this.$ionicModal.fromTemplateUrl("textbookSelect.html",{scope:this.getScope(),animation:"slide-in-up"}).then(function(t){return e.Modal=t}),this.getScope().$on("$destroy",function(){e.Modal.remove()})}},{key:"changeSelectNum",value:function(e,t,n){if("object"===(void 0===n?"undefined":h(n))&&n.stopPropagation?n.stopPropagation():event&&event.stopPropagation&&event.stopPropagation(),"add"==t){if(this.totalSelectNum>=30)return void this.commonService.alertDialog("一套试卷题量最多可选取30道题，先去组卷让学生练习吧!");if(this.totalSelectQues[e.id]){if(Number(this.totalSelectQues[e.id].questionNum)>=30)return void this.commonService.alertDialog("一个课时最多可选取30道题，从其他课时再添加一些题吧!");this.totalSelectQues[e.id].questionNum=Number(this.totalSelectQues[e.id].questionNum)+1}else this.totalSelectQues[e.id]={tagId:e.id,questionNum:1,includeQIds:[],selectedQIds:[]};this.totalSelectNum+=1}else{if(!this.totalSelectQues[e.id])return;if(Number(this.totalSelectQues[e.id].questionNum)<=0)return;this.totalSelectQues[e.id]&&(this.totalSelectQues[e.id].questionNum=Number(this.totalSelectQues[e.id].questionNum)-1),this.totalSelectNum-=1,this.totalSelectQues[e.id].questionNum||delete this.totalSelectQues[e.id]}}},{key:"gotoMackPaper",value:function(){var e=this;if(!this.totalSelectNum)return void this.commonService.alertDialog("请先选择组卷的单元与题数");if(this.totalSelectNum>30)return void this.commonService.alertDialog("一套试卷题量最多可选取30道题");angular.forEach(Object.keys(this.totalSelectQues),function(t,n){0==e.totalSelectQues[t].questionNum&&delete e.totalSelectQues[t]});var t=Object.values(this.totalSelectQues);this.pubWorkService.getComposePaperQues(t).then(function(t,n){t?e.go("pub_work_preview"):e.commonService.showAlert("警告",n||"生成试卷失败")})}},{key:"help",value:function(){this.$ionicPopup.alert({title:"说明",template:"<p>1.针对教材的每单元每小节，“题库”中有对应的多个作业。</p><p>2.在一个作业中，既可以删除题，也可以选取指定知识点的相关题目加入进来。</p><p>3.按住任何一个作业项向左滑动，可以看到更多的功能选项。</p><p>4.点击右侧的三角形图标，可以收起所有的题库标签。</p>",okText:"确定"})}},{key:"hideAllData",value:function(){(0,v.default)(this.textbook.subTags,function(e){e.isOpened=!1})}},{key:"selectCurrentTextbook",value:function(e){this.workPaperBankService.selectTextbook(e,!0),this.closeModal()}},{key:"clickUnit",value:function(e,t){e.isOpened=!e.isOpened,e.isOpened&&(e.retFlag=!1,$(t.target).find("span").toggleClass("ion-chevron-down").toggleClass("ion-chevron-right"),this.guideFlag&&!this.guideFlag.hasPubedSimulationWork&&(this.currentStep=2))}},{key:"showDetailUnit",value:function(e,t){this.workPaperBankService.selectUnit(e.text,t.id,t.text,0==e.seq&&0==t.seq),this.go("work_chapter_paper",{chapterId:t.id})}},{key:"getHighLightEle",value:function(){if(2==this.currentStep)return void(this.currentShowEle=$(".lesson_bg").eq(1).parent());this.currentStep=1,this.currentShowEle=$(".unit_bg").eq(0)}}]),e}(),d=o(p.prototype,"textbooks",[c],{enumerable:!0,initializer:null}),f=o(p.prototype,"textbook",[l],{enumerable:!0,initializer:null}),g=o(p.prototype,"localTotalSelectQues",[s],{enumerable:!0,initializer:null}),u=p))||u);t.default=k},5604:function(e,t){
e.exports='<ion-view hide-nav-bar="true" class="pub_review_work ">\r\n\r\n    <ion-header-bar align-title="center" class="bar-balanced">\r\n        <div class="button button-clear" ng-click="ctrl.back()" style="padding-left: 10px">\r\n            <i class="icon ion-ios-arrow-back"> </i>\r\n            &nbsp;&nbsp;\r\n        </div>\r\n        <h1 class="title" ng-bind="\'复习巩固\'"></h1>\r\n\r\n        <div class="buttons">\r\n            <button class="button button-clear" ng-click="ctrl.hideAllData()">\r\n                <img ng-src="{{$root.loadImg(\'work/fold.png\')}}" alt="" class="common-help"/>\r\n            </button>\r\n        </div>\r\n\r\n    </ion-header-bar>\r\n\r\n    <ion-content overflow-scroll="true" class="">\r\n        <div class="bank_content">\r\n            <div class="list" ng-show="ctrl.textbook || (ctrl.guideFlag && !ctrl.guideFlag.hasPubedSimulationWork)"\r\n                 style="padding-bottom: 55px">\r\n                <div class="item item-divider item-for-img" ng-click="ctrl.openModal(\'标签\',1)">\r\n                    <img ng-src="{{$root.loadImg(\'work/work_material.png\')}}">\r\n                    <span ng-bind="ctrl.guideFlag && !ctrl.guideFlag.hasPubedSimulationWork ? \'人教版\' : ctrl.textbook.name "\r\n                          class="first-text"></span>\r\n                    <span style="margin-left: 5px;" class="icon ion-ios-arrow-right"></span>\r\n                </div>\r\n\r\n                \x3c!--模拟课作业列表，引导动画结束后隐藏--\x3e\r\n                \x3c!--<div ng-if="ctrl.guideFlag && ctrl.guideFlag.isSameUser && !ctrl.guideFlag.hasPubedSimulationWork">\r\n                    <li class="item unit_bg" ng-click="ctrl.clickUnit(ctrl.simulationPaper,$event,$index)">\r\n                        <span class="icon "\r\n                              ng-class="ctrl.simulationPaper.isOpened?\'ion-chevron-down\':\'ion-chevron-right\'"\r\n                              style="font-weight: bold;margin-right: 5px">\r\n                        </span>{{ctrl.simulationPaper.text}}\r\n                    </li>\r\n\r\n                    <div class="list" style="margin-left: 10px;" ng-show="ctrl.simulationPaper.isOpened">\r\n                        <li class="item lesson_bg" ng-show="!ctrl.simulationPaper.subTags.length">本单元课时即将开放！</li>\r\n\r\n                        <div ng-repeat="unit in ctrl.simulationPaper.subTags">\r\n                            <li ng-click="ctrl.showDetailUnit(ctrl.simulationPaper, unit)" class="item lesson_bg">\r\n                                <span class="icon ion-chevron-right" style="font-weight: bold;margin-right: 5px"></span>\r\n                                {{unit.text}}\r\n                            </li>\r\n                        </div>\r\n                    </div>\r\n                </div>--\x3e\r\n\r\n                <div ng-repeat="chapter in ctrl.textbook.subTags">\r\n                    <li class="item unit_bg " ng-click="ctrl.clickUnit(chapter,$event,$index)">\r\n                        <span class="icon "\r\n                              ng-class="chapter.isOpened?\'ion-chevron-down\':\'ion-chevron-right\'"\r\n                              style="font-weight: bold;margin-right: 5px">\r\n                        </span>{{chapter.text}}\r\n\r\n                    </li>\r\n\r\n                    <div class="list list_content_layout" style="margin-left: 10px;" ng-show="chapter.isOpened">\r\n                        <li class="item lesson_bg" ng-show="!chapter.subTags.length">本单元课时即将开放！</li>\r\n                        <div ng-repeat="unit in chapter.subTags">\r\n                            \x3c!--<li ng-click="ctrl.showDetailUnit(chapter, unit)" class="item lesson_bg">--\x3e\r\n                            <li class="item lesson_bg">\r\n                                \x3c!--<span class="icon ion-chevron-right" style="font-weight: bold;margin-right: 5px"></span>--\x3e\r\n                                <span>{{unit.text}}</span>\r\n                                <div class="option-butn">\r\n                                    <div style="width: 24px">\r\n                                        <i class="ion-minus-circled"\r\n                                           ng-show="!!ctrl.totalSelectQues[unit.id]&&ctrl.totalSelectQues[unit.id].questionNum!=0"\r\n                                           ng-click="ctrl.changeSelectNum(unit,\'sub\',$event)"></i>\r\n                                    </div>\r\n                                    <div style="width: 22px">\r\n                                        \x3c!--<p ng-show="!!unit.selectNum" ng-bind="unit.selectNum"></p>--\x3e\r\n                                        <p ng-show="!!ctrl.totalSelectQues[unit.id]"\r\n                                           style="color: brown;font-size: 18px;font-weight: 600;"\r\n                                           ng-bind="ctrl.totalSelectQues[unit.id]&&ctrl.totalSelectQues[unit.id].questionNum"></p>\r\n                                    </div>\r\n                                    <div style="width: 24px">\r\n                                        <i class="ion-plus-circled"\r\n                                           ng-click="ctrl.changeSelectNum(unit,\'add\',$event)"\r\n                                           ng-show="!ctrl.totalSelectQues[unit.id]||ctrl.totalSelectQues[unit.id] && ctrl.totalSelectQues[unit.id].questionNum < 30"></i>\r\n                                    </div>\r\n\r\n                                </div>\r\n                            </li>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </ion-content>\r\n    <div class="fooler_content">\r\n        <span>\r\n            <p>已选</p>\r\n            <p ng-bind="ctrl.totalSelectNum" style="color: #FFFF00;font-weight: 800;margin: 0 5px;"></p>\r\n            <p>题</p>\r\n        </span>\r\n        \x3c!--<button ng-click="ctrl.gotoMackPaper()">去组卷</button>--\x3e\r\n        <img ng-src="{{$root.loadImg(\'pub_work_type/pub_type_butn03.png\')}}" style="height: 35px"\r\n             ng-click="ctrl.gotoMackPaper()">\r\n    </div>\r\n\r\n    <loading-processing></loading-processing>\r\n    <script id="textbookSelect.html" type="text/ng-template">\r\n        <ion-modal-view class="work_paper_bank">\r\n            <ion-header-bar class="bar-balanced" align-title="center">\r\n                <button class="button buttons  button-clear header-item" ng-click="ctrl.closeModal()">\r\n                    <i class="icon ion-ios-arrow-back" style="padding-left: 10px"></i>\r\n                    &nbsp;&nbsp;\r\n                </button>\r\n                <h1 class="title" align-title="center">请选择教材</h1>\r\n            </ion-header-bar>\r\n            <ion-content class="bank_content" overflow-scroll="true" >\r\n                <ul class="list">\r\n                    <div ng-repeat="version in ctrl.textbooks">\r\n                        <li class="item unit_bg" ng-click="version.isOpened = !version.isOpened">\r\n                        <span class="icon"\r\n                              ng-class="version.isOpened?\'ion-chevron-down\':\'ion-chevron-right\'"\r\n                              style="font-weight: bold;margin-right: 5px">\r\n                        </span>{{version.text}}\r\n                        </li>\r\n\r\n                        <div class="list" style="margin-left: 10px;" ng-show="version.isOpened">\r\n                            <div ng-repeat="book in version.subTags | filter:search">\r\n                                <li ng-click="ctrl.selectCurrentTextbook(book)" class="item lesson_bg item-for-img">\r\n                                    <img ng-src="{{$root.loadImg(\'work/work_material.png\')}}">\r\n                                    <span class="first-text" style="font-weight: bold;margin-right: 5px"></span>\r\n                                    {{book.text}}\r\n                                </li>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </ul>\r\n            </ion-content>\r\n            <loading-processing></loading-processing>\r\n        </ion-modal-view>\r\n    <\/script>\r\n\r\n    <teaching-guide ng-if="ctrl.guideFlag && ctrl.guideFlag.isSameUser && !ctrl.guideFlag.hasPubedSimulationWork"\r\n                    current-show-ele="ctrl.currentShowEle"\r\n                    step-count="2"\r\n                    current-step="ctrl.currentStep"\r\n                    get-high-light-ele="ctrl.getHighLightEle()">\r\n    </teaching-guide>\r\n</ion-view>\r\n\r\n'},5605:function(e,t,n){var i=n(5606);"string"==typeof i&&(i=[[e.id,i,""]]);n(147)(i,{});i.locals&&(e.exports=i.locals)},5606:function(e,t,n){t=e.exports=n(146)(),t.push([e.id,".pub_review_work .new-icon-title {\n  position: absolute;\n  right: 19px;\n  top: 1px;\n}\n.pub_review_work .new-icon {\n  position: absolute;\n  top: 13px;\n  left: 12px;\n  width: 28px;\n  height: 15px;\n}\n.pub_review_work .item-for-img {\n  margin: 10px auto;\n  color: #2e3969;\n  position: relative;\n}\n.pub_review_work .item-for-img img {\n  width: 30px;\n  position: absolute;\n}\n.pub_review_work .item-for-img .first-text {\n  margin-left: 36px;\n}\n.pub_review_work .content-img {\n  border-radius: 0px !important;\n  margin-right: 14px;\n}\n.pub_review_work .item {\n  border: none;\n}\n.pub_review_work .me_content ion-list .list .item:nth-child(odd) {\n  background: #FEFAF1;\n}\n.pub_review_work .me_content ion-list .item {\n  color: #4A3C37;\n  border: none;\n}\n.pub_review_work .me_content .content-left {\n  flex: 9;\n  -webkit-flex: 9;\n}\n.pub_review_work .me_content .content-left p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.pub_review_work .me_content .content-right {\n  flex: 2;\n  -webkit-flex: 2;\n}\n.pub_review_work .me_content .content-right .right-main {\n  float: right;\n  text-align: center;\n  background: #FA7B75;\n  width: 30px;\n  height: 30px;\n  border-radius: 15px;\n  -webkit-border-radius: 15px;\n  line-height: 30px;\n}\n.pub_review_work .me_content .content-right .right-main i {\n  color: #fff;\n  font-size: 24px;\n}\n.pub_review_work .bank_content .common_sty {\n  margin-top: 10px;\n  height: 44px;\n  padding: 10px;\n  border-radius: 10px;\n  -webkit-border-radius: 10px;\n  color: #2e3969;\n  margin-right: 10px;\n}\n.pub_review_work .bank_content .list .unit_bg {\n  background: #B4D0ED;\n  margin-left: 13px;\n  margin-top: 10px;\n  height: 44px;\n  padding: 10px;\n  border-radius: 10px;\n  -webkit-border-radius: 10px;\n  color: #2e3969;\n  margin-right: 10px;\n}\n.pub_review_work .bank_content .list .lesson_bg {\n  background: #BEE7F1;\n  margin-left: 18px;\n  margin-top: 10px;\n  height: 44px;\n  padding: 10px;\n  border-radius: 10px;\n  -webkit-border-radius: 10px;\n  color: #2e3969;\n  margin-right: 10px;\n}\n.pub_review_work .bank_content .list .work_bg {\n  margin-top: 10px;\n  height: 44px;\n  padding: 10px;\n  border-radius: 10px;\n  -webkit-border-radius: 10px;\n  color: #2e3969;\n  margin-right: 10px;\n  margin-left: 23px;\n  background: #D2F7EF;\n  padding-left: 50px;\n}\n.pub_review_work .bank_content .list .work_bg img {\n  width: 30px;\n  position: absolute;\n  top: 6px;\n  left: 12px;\n  vertical-align: middle;\n}\n.pub_review_work .bank_content .list .list_content_layout {\n  position: relative;\n}\n.pub_review_work .bank_content .list .list_content_layout .option-butn {\n  position: absolute;\n  right: 5%;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  justify-content: space-between;\n  -webkit-justify-content: space-between;\n  align-items: center;\n  -webkit-align-items: center;\n}\n.pub_review_work .bank_content .list .list_content_layout .option-butn i {\n  width: 24px;\n  font-size: 30px;\n  color: #367dda;\n}\n.pub_review_work .bank_content .list .list_content_layout .option-butn p {\n  width: 22px;\n  text-align: center;\n  overflow: visible;\n}\n.pub_review_work .bank_content .ion-chevron-down:before {\n  width: 18px;\n}\n.pub_review_work .bank_content .ion-chevron-right:before {\n  width: 18px;\n}\n.pub_review_work .fooler_content {\n  width: 100%;\n  height: 50px;\n  position: absolute;\n  bottom: 0;\n  background-color: #3F4A5A;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  justify-content: space-around;\n  -webkit-justify-content: space-around;\n  align-items: center;\n  -webkit-align-items: center;\n}\n.pub_review_work .fooler_content span {\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  justify-content: center;\n  -webkit-justify-content: center;\n  align-items: center;\n  -webkit-align-items: center;\n}\n.pub_review_work .fooler_content span p {\n  margin: 0;\n  font-size: 18px;\n  color: #ffffff;\n}\n.pub_review_work .fooler_content button {\n  border-radius: 12px;\n  height: 30px;\n  width: 80px;\n  border: none;\n  background-color: #91f086;\n  color: #34745C;\n}\n.pub_review_work .overflow-ellipsis {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n",""])},5607:function(e,t,n){"use strict";function i(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(t,"__esModule",{value:!0});var a,c,l,s,u,p,d,f,g,h,b,m,v,w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),x=n(283),k=n(5601),y=(a=(0,k.View)("pub_work_preview",{url:"/pub_work_preview",template:n(5608),styles:n(5609),inject:["$rootScope","$scope","$state","$ionicPopup","$timeout","$ionicScrollDelegate","$ngRedux","commonService","workChapterPaperService","workManageService","workStatisticsService","pubWorkService"]}),c=(0,k.select)(function(e){return e.profile_user_auth.user.name}),l=(0,k.select)(function(e){return e.profile_user_auth.user.userId}),s=(0,k.select)(function(e){return e.compose_temp_paper.tempPaperSetParams}),u=(0,k.select)(function(e){return e.compose_temp_paper.quesList}),p=(0,k.select)(function(e){return e.compose_temp_paper.paperName}),a((f=function(){function e(){r(this,e),this.isEditFlag=!1,this.chapterName=[],this.gotoPubButnFlag=!0,i(this,"userName",g,this),i(this,"userId",h,this),i(this,"setParams",b,this),i(this,"tempqslist",m,this),i(this,"paperName",v,this)}return _(e,[{key:"initData",value:function(){this.isShowKAD=!0,this.isIOS=2==this.commonService.judgeSYS(),this.isShowTips=!1,this.initCtrl=!1,this.isLoadingProcessing=!0,this.gotoPubButnFlag=!0,this.setChapterName()}},{key:"setChapterName",value:function(){var e=this,t=[];angular.forEach(this.tempqslist,function(n,i){var r=e.tempqslist[i].knowledge[0].code.split(/\.|\，/),o="",a="";r&&r.length>1&&(o=r.slice(1).join(","),a=r[0].split("-").pop()),o=o.replace(/\-[a-zA-Z]\d+/g,""),o=o.replace(/\-[a-zA-Z]/g,""),o=a+"."+o,-1==t.indexOf(o)&&(e.tempqslist[i].chapterName=o,t.push(o))})}},{key:"onAfterEnterView",value:function(){this.initData(),this.paperEdit("done")}},{key:"onReceiveProps",value:function(){this.ensurePageData()}},{key:"ensurePageData",value:function(){}},{key:"checkQuestionTypeKey",value:function(e){return"notSubjective"!=e.questionTypeKey}},{key:"showTips",value:function(){var e=this,t=this.getRootScope().user.loginName+"workPaperDetail";this.isShowTips=this.commonService.getLocalStorage(t),this.isShowTips||this.$ionicPopup.alert({title:"温馨提示",template:'<p style="font-size:16px">教师端不能做作业，只能查看作业、增删试题、布置作业等。</p>\n                    <p style="font-size:16px">想要体验学生做作业，可以布置作业后用您的体验账号登录学生端</p>\n                    <p style="font-size:16px">点击右上角的“?”了解更多。</p>\n                    <ion-checkbox ng-click="ctrl.isShowTips = !ctrl.isShowTips"  style="border:none;background:none;font-size:14px">不再提示</ion-checkbox>',scope:this.getScope(),okText:"确定"}).then(function(){e.isShowTips&&e.commonService.setLocalStorage(t,!0)})}},{key:"back",value:function(){this.go("pub_review_work")}},{key:"getBigQText",value:function(e){return this.workChapterPaperService.getBigQText(e)}},{key:"showKnowledgeAndDifficulty",value:function(e,t){return"object"===(void 0===t?"undefined":void 0===t?"undefined":w(t))&&t.stopPropagation?t.stopPropagation():event&&event.stopPropagation&&event.stopPropagation(),e.knowledge[0].content.replace(/^[a-z]\d+\./i,"")+" - "+(e.difficulty<40?"基础":e.difficulty>70?"拓展":"变式")}},{key:"scrollTop",value:function(){this.$ionicScrollDelegate.scrollTop(!0)}},{key:"getScrollPosition",value:function(){this.$ionicScrollDelegate.getScrollPosition().top>=250?$(".scrollToTop").fadeIn():$(".scrollToTop").fadeOut()}},{key:"gotoPublishWorkPaper",value:function(){var e=this;if(this.gotoPubButnFlag){if(this.tempqslist.length<=0)return void this.commonService.showAlert("温馨提示","没有题目可布置，可点左上角返回添加");this.gotoPubButnFlag=!1,this.workChapterPaperService.checkClassStudentCount(!1).then(function(t){t&&200==t.code?t.normalPaperView?(e.gotoPubButnFlag=!0,e.commonService.showAlert("温馨提示",t.normalPaperView||"老师所带的班级中，没有一个班级的人数是大于等于5，则不能够布置作业")):e.changePaperName():e.commonService.alertDialog(t.msg||"班级校验失败")})}}},{key:"changePaperName",value:function(){var e=this,t=this;this.$ionicPopup.show({template:'<input ng-model="ctrl.paperName" />',title:"试卷名称",scope:this.getScope(),buttons:[{text:"<b>确定</b>",type:"button-positive",onTap:function(n){return t.pubWorkService.changePaperName(e.paperName),!0}},{text:"取消",type:"",onTap:function(e){return t.gotoPubButnFlag=!0,!1}}]}).then(function(t){t&&e.workPub()})}},{key:"workPub",value:function(){var e=this,t={};t.uId=this.userId,t.tagId=this.setParams[this.setParams.length-1].tagId,t.paperName=this.paperName;var n=[];angular.forEach(this.tempqslist,function(t,i){n.push(e.tempqslist[i].id)}),t.qIds=JSON.stringify(n),this.pubWorkService.composePaper(t).then(function(t,n){e.gotoPubButnFlag=!0,t?e.goToPub():e.commonService.showAlert("警告",n||"组卷失败")})}},{key:"goToPub",value:function(){this.go("work_pub2",{from:"pub_work_preview"})}},{key:"paperEdit",value:function(e){"edit"==e?(this.isEditFlag=!0,$(".text-div-adapt-ion-checkbox").show(),$(".text-adapt").hide()):(this.isEditFlag=!1,$(".text-div-adapt-ion-checkbox").hide(),$(".text-adapt").show())}},{key:"goQFeedbackPage",value:function(e,t){e.stopPropagation(),this.workStatisticsService.workDetailState.lastStateUrl=this.getStateService().current.name,this.workStatisticsService.workDetailState.lastStateParams=this.getStateService().params,this.workStatisticsService.QInfo.questionId=t,this.workStatisticsService.QInfo.paperId="",this.getStateService().go("q_feedback")}},{key:"mapActionToThis",value:function(){return{}}},{key:"createPaperName",value:function(){var e=new Date,t=e.getHours(),n=e.getMinutes();Number(t)<10&&(t="0"+t),Number(n)<10&&(n="0"+n),this.paperName="复习巩固"+e.getFullYear()+"."+e.getMonth()+"."+e.getDate()+" "+t+":"+n}},{key:"selectQues",value:function(e,t){"object"===(void 0===t?"undefined":void 0===t?"undefined":w(t))&&t.stopPropagation?t.stopPropagation():event&&event.stopPropagation&&event.stopPropagation(),e.selected=!e.selected}},{key:"getSelectArr",value:function(){var e=this,t=[],n=[];return angular.forEach(this.tempqslist,function(i,r){e.tempqslist[r].selected&&(t.push(e.tempqslist[r].id),n.push(Number(r)))}),0==t.length?(this.commonService.showAlert("提示","请勾选题号前面的圆圈，再进行操作"),!1):{deleteArr:t,deleteQuesIndexs:n}}},{key:"deleteQues",value:function(){var e=this,t=this.getSelectArr();if(t){var n=t.deleteArr,i=t.deleteQuesIndexs,r=[];this.tempqslist.forEach(function(e,t){-1===i.indexOf(t)&&r.push(e)}),this.tempqslist.length=0,r.forEach(function(t){e.tempqslist.push(t)});var o=[];angular.forEach(n,function(t,n){angular.forEach(e.setParams,function(e,i){if(e.includeQIds){var r=e.includeQIds.indexOf(t);-1!=r&&(e.includeQIds.splice(r,1),e.questionNum-=1),e.questionNum<=0&&o.push(Number(n))}})}),angular.forEach(o,function(t,n){e.setParams.splice(t,1)}),this.pubWorkService.deleteSelectQues(this.setParams,this.tempqslist),this.setChapterName(),this.commonService.alertDialog("已删除")}}},{key:"changeDifficulty",value:function(e){var t=this,n=this.getSelectArr();if(n){var i=n.deleteArr;angular.forEach(i,function(e,n){angular.forEach(t.setParams,function(t,n){t.includeQIds&&-1!=t.includeQIds.indexOf(e)&&t.selectedQIds.push(e)})});var r=2,o="操作成功";"up"==e?(o="难度已提升",r=2):"down"==e?(o="难度已降低",r=3):(o="已替换成同类题",r=4),this.pubWorkService.getComposePaperQues(this.setParams,r).then(function(e,n){e?(t.setChapterName(),t.commonService.alertDialog(o),t.$timeout(function(){t.isEditFlag?($(".text-div-adapt-ion-checkbox").show(),$(".text-adapt").hide()):($(".text-div-adapt-ion-checkbox").hide(),$(".text-adapt").show())})):t.commonService.alertDialog("msg")})}}},{key:"getSubjectiveReferAnswer",value:function(e){var t=this,n={questionId:e.id};this.workStatisticsService.getQReferAnswer(n,!0).then(function(n){if(n){if(0==Object.keys(n.referAnswers||{}).length)return void t.commonService.showAlert("信息提示","<div>亲，目前还没有学霸解答此题，请再等一等。</div>");n.referAnswers&&e.type.indexOf("vertical")>-1&&(e.inputList=e.inputList||[],e.inputList=t.clearVerticalQAns(e.inputList,e.answerKey),e.inputList=t.mapVerticalQAns(n.referAnswers,e.inputList)),e.reload=!0,e.referAns=n.referAnswers,t.$timeout(function(){e.reload=!1},100)}})}},{key:"clearVerticalQAns",value:function(e,t){var n=JSON.parse(t),i=function(e){try{var t=_find(n,{type:x.VERTICAL_FILLBLANKS_SCOREPOINT_TYPE}),i=_find(t.vfMatrix,e);return i?i[e]:[{}]}catch(e){return[{}]}};return angular.forEach(e,function(e){angular.forEach(e.spList,function(e){e.hasOwnProperty("inputBoxStuAns")?e.inputBoxStuAns="":e.hasOwnProperty("matrix")&&(e.matrix=i(e.inputBoxUuid))})}),e}},{key:"mapVerticalQAns",value:function(e,t){var n=void 0,i=void 0;return angular.forEach(t,function(t){angular.forEach(t.spList,function(t){try{n=e[t.inputBoxUuid],-1===n.indexOf("id")?t.inputBoxStuAns=n:n.indexOf("id")>-1&&(i=JSON.parse(n),angular.forEach(i,function(e){e.id===t.inputBoxUuid&&(t.matrix=e.matrix)}))}catch(e){console.error("qbuBug",e)}})}),t}}]),e}(),g=o(f.prototype,"userName",[c],{enumerable:!0,initializer:null}),h=o(f.prototype,"userId",[l],{enumerable:!0,initializer:null}),b=o(f.prototype,"setParams",[s],{enumerable:!0,initializer:null}),m=o(f.prototype,"tempqslist",[u],{enumerable:!0,initializer:null}),v=o(f.prototype,"paperName",[p],{enumerable:!0,initializer:null}),d=f))||d);t.default=y},5608:function(e,t){e.exports='<ion-view hide-nav-bar="true" class="pub_work_preview">\r\n    <ion-header-bar class="bar-balanced" align-title="center">\r\n        <div class="button button-clear" ng-click="ctrl.back()" style="padding-left: 10px">\r\n            <i class="icon ion-ios-arrow-back"> </i>&nbsp;&nbsp;\r\n        </div>\r\n        \x3c!--<h1 class="title" style="font-family: \'Microsoft YaHei\'" ng-bind="ctrl.selectPaperInfo.title||ctrl.createPaperName()"></h1>--\x3e\r\n        <h1 class="title" style="font-family: \'Microsoft YaHei\';left: 0 !important;"\r\n            ng-bind="ctrl.paperName.substr(0,ctrl.paperName.length-3)"></h1>\r\n        <div class="buttons">\r\n            <img style="height: 30px;" ng-src="{{$root.loadImg(\'pub_work_type/pub_type_butn01.png\')}}"\r\n                 ng-if="!ctrl.isEditFlag"\r\n                 ng-click="ctrl.paperEdit(\'edit\')">\r\n            <img style="height: 30px;" ng-src="{{$root.loadImg(\'pub_work_type/pub_type_butn02.png\')}}"\r\n                 ng-if="ctrl.isEditFlag"\r\n                 ng-click="ctrl.paperEdit(\'done\')">\r\n        </div>\r\n    </ion-header-bar>\r\n\r\n    <div style="" class="knowledge_box_main_top" ng-class="{\'set_top_ios\':ctrl.isIOS}">\r\n        <ion-checkbox ng-model="ctrl.isShowKAD">显示考点及能力层次</ion-checkbox>\r\n    </div>\r\n\r\n    <ion-content overflow-scroll="false" class="has-header has-footer set_top_86 ques-list"\r\n                 ng-class="{\'set_top_106\':ctrl.isIOS}"\r\n                 on-scroll="ctrl.getScrollPosition()">\r\n\r\n        \x3c!--<div ng-if="!ctrl.isLoadingProcessing && !ctrl.paper" style="padding: 16px">网络状态差，没有获取到作业，请返回重试</div>--\x3e\r\n        \x3c!--<div ng-repeat="qt in ctrl.paper.qsTitles track by $index" ng-init="idx=$index" class="bigQContainer">--\x3e\r\n        <div class="bigQContainer" ng-if="ctrl.tempqslist&&ctrl.tempqslist.length>0">\r\n            \x3c!-- <div class="big-q-setting">\r\n                 <div class="big-q-title">\r\n                     <span ng-bind="\'本卷总分：\'+qt.score+\'分\'"></span>\r\n                 </div>\r\n             </div>--\x3e\r\n            \x3c!--<div ng-repeat="record in qt.qsList track by $index" class="smallQContainer">--\x3e\r\n            <div ng-repeat="record in ctrl.tempqslist" class="smallQContainer">\r\n                <div ng-if="record.chapterName" class="chapter-name">\r\n                    <p style="margin: 0" ng-bind="record.chapterName"></p>\r\n                </div>\r\n                <div class="image-type-question">\r\n                    <div class="question-content card card-better small_q_bg" style="margin: 15px 10px">\r\n                        <div class="smallq-title smallq-title-first" style="overflow: hidden">\r\n                            <div class="text-div-adapt">\r\n                                <ion-checkbox class="text-div-adapt-ion-checkbox"\r\n                                              ng-click="ctrl.selectQues(record,$event)"\r\n                                              ng-model="record.selected">{{\'第\'+($index+1)+\'题\'}}\r\n                                </ion-checkbox>\r\n                                <div class="text-adapt">\r\n                                    <span ng-bind="\'第\'+($index+1)+\'题\'">\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                            <div class="img-align-right">\r\n                                <span ng-click="ctrl.goQFeedbackPage($event,record.id)">\r\n                                   <img ng-src="{{$root.loadImg(\'other/report.png\')}}">\r\n                                </span>\r\n                                <span style="background-color: bisque;border-radius: 8px;padding: 2px 5px;text-align: center;"\r\n                                      ng-if="ctrl.checkQuestionTypeKey(record)"\r\n                                      ng-click="ctrl.getSubjectiveReferAnswer(record)">\r\n                                    \x3c!--<img ng-src="{{$root.loadImg(\'work/savant_ans.png\')}}">--\x3e\r\n                                    学霸解答\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div ng-show="ctrl.isShowKAD" class="question_content_knowledge_text"\r\n                             ng-bind="ctrl.showKnowledgeAndDifficulty(record,$event)"\r\n                             style="background-color: #B8E4FC;color:#565555"></div>\r\n                        \x3c!--<div compile-html="record.qContext" current_q_input="record.inputList"\r\n                             class="q-context ques-content-input"\r\n                             style="pointer-events: none"></div>--\x3e\r\n                        <div ng-if="!record.reload&&record.type.indexOf(\'vertical\')==-1" compile-html="record.qContext"\r\n                             refer-answers="record.referAns"\r\n                             class="q-context ques-content-input" style="pointer-events: none">\r\n                        </div>\r\n                        <div ng-if="!record.reload&&record.type.indexOf(\'vertical\')>-1"\r\n                             compile-html="record.qContext" refer-answers="record.referAns"\r\n                             current-q-input="record.inputList"\r\n                             class="q-context" style="pointer-events: none">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </ion-content>\r\n    \x3c!--<loading-processing load-top="200"></loading-processing>--\x3e\r\n    <div class="scrollToTop" ng-click="ctrl.scrollTop()"></div>\r\n    <div class="bar bar-footer bg-balanced footer_box_main">\r\n        <div ng-if="!ctrl.isEditFlag" class="footer_box_main_down">\r\n            <div ng-click="ctrl.gotoPublishWorkPaper()" class="footer_click_btn">\r\n                <span style="font-size: 20px">布置</span>\r\n            </div>\r\n        </div>\r\n\r\n        <div ng-if="ctrl.isEditFlag" class="footer_box_main_down">\r\n            <div ng-click="ctrl.deleteQues()" class="footer_click_btn">\r\n                <img ng-src="{{$root.loadImg(\'pub_work_type/pub_edit_butn01.png\')}}">\r\n                <span>删除</span>\r\n            </div>\r\n            <div ng-click="ctrl.changeDifficulty(\'up\')" class="footer_click_btn">\r\n                <img ng-src="{{$root.loadImg(\'pub_work_type/pub_edit_butn02.png\')}}">\r\n                <span>提升难度</span>\r\n            </div>\r\n            <div ng-click="ctrl.changeDifficulty()" class="footer_click_btn">\r\n                <img ng-src="{{$root.loadImg(\'pub_work_type/pub_edit_butn03.png\')}}">\r\n                <span>同类替换</span>\r\n            </div>\r\n            <div ng-click="ctrl.changeDifficulty(\'down\')" class="footer_click_btn">\r\n                <img ng-src="{{$root.loadImg(\'pub_work_type/pub_edit_butn04.png\')}}">\r\n                <span>减低难度</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ion-view>'},5609:function(e,t,n){var i=n(5610);"string"==typeof i&&(i=[[e.id,i,""]]);n(147)(i,{});i.locals&&(e.exports=i.locals)},5610:function(e,t,n){t=e.exports=n(146)(),
t.push([e.id,".pub_work_preview {\n  /*添加样式使之与出题端保持一致*/\n}\n.pub_work_preview .title {\n  left: 0 !important;\n}\n.pub_work_preview .edit_butn {\n  border-radius: 5px;\n  box-shadow: 0 0 1px 1px #30d525;\n}\n.pub_work_preview .chapter-name {\n  margin-top: 10px;\n  height: 35px;\n  line-height: 35px;\n  border-top-left-radius: 15px;\n  border-top-right-radius: 15px;\n  padding: 0 5%;\n}\n.pub_work_preview .chapter-name p {\n  color: #293d69;\n  font-size: 16px;\n  font-weight: 600;\n}\n.pub_work_preview .set_top_86 {\n  top: 86px;\n}\n.pub_work_preview .set_top_106 {\n  top: 106px !important;\n}\n.pub_work_preview .set_top_ios {\n  margin-top: 64px !important;\n}\n.pub_work_preview .checkbox input:after,\n.pub_work_preview .checkbox-icon:after {\n  -webkit-transition: opacity 0.05s ease-in-out;\n  transition: opacity 0.05s ease-in-out;\n  -webkit-transform: rotate(-45deg);\n  transform: rotate(-45deg);\n  position: absolute;\n  top: 33%;\n  left: 25%;\n  display: table;\n  width: 14px;\n  height: 6px;\n  border: 2px solid #fff;\n  border-top: 0;\n  border-right: 0;\n  content: ' ';\n  opacity: 0;\n}\n.pub_work_preview .qff_content input:checked:before,\n.pub_work_preview .checkbox input:checked + .checkbox-icon:before {\n  background: #4BD937;\n  border-color: #4BD937;\n}\n.pub_work_preview .image-type-question img {\n  vertical-align: middle;\n}\n.pub_work_preview .image-type-question p {\n  margin: 0 !important;\n}\n.pub_work_preview .img-btn {\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n}\n.pub_work_preview .paper-title-box {\n  width: 100%;\n  height: 30%;\n  position: relative;\n  margin-bottom: 10px;\n}\n.pub_work_preview .paper-title-box .bg_t_photo {\n  position: absolute;\n  bottom: 0px;\n  right: 0px;\n  height: 60%;\n  max-height: 186px;\n}\n.pub_work_preview .paper-title-box .bg_file {\n  position: absolute;\n  bottom: 0px;\n  left: 0px;\n  height: 60%;\n  max-height: 215px;\n}\n.pub_work_preview .paper-title-box .title-text-box {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  text-align: center;\n  height: 100%;\n}\n.pub_work_preview .paper-title-box .title-text-box .text-box {\n  height: inherit;\n  display: flex;\n  display: -webkit-flex;\n  align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n  -webkit-align-items: center;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n}\n.pub_work_preview .paper-title-box .title-text-box p {\n  margin: 0;\n  font-size: 11px;\n}\n@media screen and (max-width: 320px) {\n  .pub_work_preview .paper-title-box .title-text-box .row {\n    padding: 0;\n    font-size: 14px;\n  }\n  .pub_work_preview .paper-title-box .title-text-box .row .actual-score {\n    font-size: 14px;\n  }\n  .pub_work_preview .paper-title-box .title-text-box .row .text-title {\n    font-size: 16px;\n    font-weight: 400;\n    color: #4A3C37;\n  }\n}\n@media screen and (min-width: 321px) and (max-width: 767px) {\n  .pub_work_preview .paper-title-box .title-text-box .row {\n    font-size: 16px;\n  }\n  .pub_work_preview .paper-title-box .title-text-box .row .actual-score {\n    font-size: 16px;\n  }\n  .pub_work_preview .paper-title-box .title-text-box .row .text-title {\n    font-size: 18px;\n    font-weight: 400;\n    color: #4A3C37;\n  }\n}\n@media screen and (min-width: 768px) {\n  .pub_work_preview .paper-title-box .title-text-box .row {\n    font-size: 20px;\n    margin: 10px;\n  }\n  .pub_work_preview .paper-title-box .title-text-box .row .actual-score {\n    font-size: 20px;\n  }\n  .pub_work_preview .paper-title-box .title-text-box .row .text-title {\n    font-size: 24px;\n    font-weight: 400;\n    color: #4A3C37;\n  }\n}\n.pub_work_preview .paper-title-box .title-text-box .row .col {\n  padding: 5px;\n}\n.pub_work_preview .paper-title-box .title-text-box .row .col .margin-right-setting {\n  margin-right: 16px;\n}\n.pub_work_preview .paper-title-box .title-text-box .row .col .margin-left-setting {\n  margin-left: 16px;\n}\n.pub_work_preview .paper-title-box .title-text-box .row .left-col {\n  text-align: right;\n}\n.pub_work_preview .paper-title-box .title-text-box .row .right-col {\n  text-align: left;\n}\n.pub_work_preview .big-q-setting {\n  min-height: 40px;\n  line-height: 40px;\n  color: #293d69;\n  padding-left: 10px;\n}\n.pub_work_preview .big-q-setting .big-q-title {\n  font-size: 22px;\n  margin-bottom: -10px;\n  font-weight: 400;\n}\n.pub_work_preview .big-q-setting .row span {\n  font-size: 15px;\n}\n.pub_work_preview .image-type-question .question-content .smallq-title {\n  color: #293d69;\n  width: 100%;\n  position: relative;\n  text-align: left;\n  background-color: #accbf9;\n  display: flex;\n  display: -webkit-flex;\n  justify-content: space-between;\n  align-items: center;\n  -webkit-display: flex;\n  -webkit-justify-content: space-between;\n  -webkit-align-items: center;\n}\n@media screen and (max-width: 320px) {\n  .pub_work_preview .image-type-question .question-content .smallq-title {\n    line-height: 22px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .text-adapt {\n    max-width: 74%;\n    font-size: 16px;\n    vertical-align: middle;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .corrected-score {\n    color: #fe5345;\n    font-size: 16px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .actual-score {\n    font-size: 19px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .deserve-score {\n    font-size: 16px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .correct-icons img {\n    width: 16px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .img-align-right {\n    padding-top: 1px;\n    min-width: 80px;\n    margin-right: 10px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .img-align-right span {\n    margin-right: 10px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .img-align-right img {\n    width: 17px;\n    height: 17px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .img-align-right .savant-ans {\n    background-color: bisque;\n    border-radius: 8px;\n    padding: 2px 5px;\n    text-align: center;\n  }\n}\n@media screen and (min-width: 321px) and (max-width: 767px) {\n  .pub_work_preview .image-type-question .question-content .smallq-title {\n    line-height: 30px;\n    height: 30px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .corrected-score {\n    color: #fe5345;\n    font-size: 17px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .text-adapt {\n    font-size: 17px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .actual-score {\n    font-size: 17px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .deserve-score {\n    font-size: 17px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .correct-icons img {\n    width: 18px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .img-align-right {\n    min-width: 120px;\n    margin-top: -2px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .img-align-right span {\n    margin-right: 15px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .img-align-right img {\n    width: 20px;\n    height: 20px;\n  }\n}\n@media screen and (min-width: 768px) {\n  .pub_work_preview .image-type-question .question-content .smallq-title {\n    line-height: 45px;\n    height: 45px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .text-adapt {\n    font-size: 20px;\n    vertical-align: middle;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .actual-score {\n    font-size: 22px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .deserve-score {\n    font-size: 22px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .correct-icons img {\n    width: 20px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .img-align-right {\n    min-width: 200px;\n    margin-top: -2px;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .img-align-right span {\n    margin-right: 10%;\n  }\n  .pub_work_preview .image-type-question .question-content .smallq-title .img-align-right img {\n    width: 42px;\n    height: 42px;\n  }\n}\n.pub_work_preview .image-type-question .question-content .smallq-title-first {\n  background: #accbf9;\n  display: flex;\n  display: -webkit-flex;\n  justify-content: space-between;\n  align-items: center;\n  -webkit-justify-content: space-between;\n  -webkit-align-items: center;\n}\n.pub_work_preview .image-type-question .question-content .smallq-title-more {\n  margin-top: 2px;\n  background: #AEE3f8;\n}\n.pub_work_preview .image-type-question .question-content .actual-score {\n  color: darkred;\n}\n.pub_work_preview .image-type-question .question-content label {\n  font-size: 15px;\n  width: 100%;\n}\n.pub_work_preview .image-type-question .question-content .title-for-add-q {\n  height: auto;\n  line-height: normal;\n}\n.pub_work_preview .image-type-question .question-content .title-for-add-q .item {\n  padding-top: 6px;\n  padding-bottom: 6px;\n}\n.pub_work_preview .image-type-question .question-content .title-for-add-q .text-for-add-q {\n  color: #293d69;\n  margin-left: 0px;\n}\n.pub_work_preview .image-type-question .question-content .title-for-add-q .img-for-add-q {\n  z-index: 100;\n  top: 20%;\n}\n.pub_work_preview .image-type-question .question-content .title-for-add-q .img-for-add-q img {\n  width: 26px;\n  height: 26px;\n}\n.pub_work_preview .image-type-question .question-content .text-div-adapt {\n  max-width: 100%;\n  height: 40px;\n}\n.pub_work_preview .image-type-question .question-content .text-div-adapt .text-div-adapt-ion-checkbox {\n  display: none;\n}\n.pub_work_preview .image-type-question .question-content .text-div-adapt .item-checkbox .checkbox {\n  position: absolute;\n  top: 50%;\n  right: 8px;\n  z-index: 3;\n  margin-top: 0px !important;\n}\n.pub_work_preview .image-type-question .question-content .text-div-adapt label {\n  color: white;\n  padding: 0;\n  line-height: 40px;\n  background-color: #accbf9;\n}\n.pub_work_preview .image-type-question .question-content .text-div-adapt label .item-content {\n  margin-left: 48px;\n}\n.pub_work_preview .image-type-question .question-content .text-div-adapt label span {\n  font-size: 17px;\n  color: #293d69;\n}\n.pub_work_preview .image-type-question .question-content .text-div-adapt .checkbox {\n  left: 0px;\n}\n.pub_work_preview .image-type-question .question-content .text-div-adapt .checkbox input:checked + .checkbox-icon:before {\n  background-color: white;\n}\n.pub_work_preview .image-type-question .question-content .text-div-adapt .checkbox input:checked + .checkbox-icon:after {\n  background-color: white;\n  border-color: #accbf9;\n}\n.pub_work_preview .image-type-question .question-content .img-align-right {\n  text-align: right;\n  z-index: 100;\n  top: 0;\n}\n.pub_work_preview .image-type-question .question-content .img-align-right img {\n  border-radius: 50%;\n}\n.pub_work_preview .image-type-question .question-content .ques-content-input span unit {\n  color: #ff3b30;\n}\n.pub_work_preview .smallq-title-first_knowledge {\n  background-color: #FDF4D0;\n  border-radius: 5px;\n  padding: 0 4px;\n}\n.pub_work_preview .footer_box_main {\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  justify-content: center;\n  -webkit-justify-content: center;\n  align-items: center;\n  -webkit-align-items: center;\n  height: 50px;\n}\n.pub_work_preview .footer_box_main .footer_box_main_down {\n  display: flex;\n  justify-content: space-around;\n  display: -webkit-flex;\n  -webkit-justify-content: space-around;\n  width: 100%;\n}\n.pub_work_preview .footer_box_main .footer_box_main_down .footer_click_btn {\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  flex: 1;\n  -webkit-flex: 1;\n  height: 100%;\n}\n.pub_work_preview .footer_box_main .footer_box_main_down .footer_click_btn img {\n  width: 22px;\n}\n.pub_work_preview .footer_box_main .footer_box_main_down .footer_click_btn span {\n  margin: auto;\n  font-size: 12px;\n}\n.pub_work_preview .knowledge_box_main_top {\n  height: 40px;\n  margin-top: 44px;\n  width: 100%;\n}\n.pub_work_preview .knowledge_box_main_top label {\n  color: white;\n  padding: 0;\n  line-height: 40px;\n  background-color: #5BDB8B;\n}\n.pub_work_preview .knowledge_box_main_top label .item-content {\n  margin-left: 90px;\n}\n.pub_work_preview .knowledge_box_main_top .checkbox {\n  left: 45px;\n}\n.pub_work_preview .knowledge_box_main_top .checkbox input:checked + .checkbox-icon:before {\n  background-color: white;\n}\n.pub_work_preview .knowledge_box_main_top .checkbox input:checked + .checkbox-icon:after {\n  background-color: white;\n  border-color: #5BDB8B;\n}\n.pub_work_preview .display-flex {\n  display: flex;\n  display: -webkit-flex;\n  align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n  -webkit-align-items: center;\n}\n.pub_work_preview .com_flex-direction_column {\n  flex-direction: column;\n  -webkit-flex-direction: column;\n}\n",""])},5611:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(t,"__esModule",{value:!0});var c,l,s,u,p,d,f,g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=n(4487),b=i(h),m=n(4485),v=i(m),w=n(282),_=i(w),x=n(5601),k=(c=(0,x.View)("work_pub2",{url:"/work_pub2/:from/:publishType",template:n(5612),styles:n(5613),cache:!1,inject:["$scope","$ngRedux","$state","finalData","commonService","workManageService","$ionicActionSheet","$rootScope"]}),l=(0,x.select)(function(e,t){var n=t.workManageService.backupWork.name,i=t.getStateService().params.from;return"work_paper_detail"!=i&&"oral_arithmetic_view"!=i||(n=t.workManageService.libWork.name),"pub_work_preview"==i&&(n=e.compose_temp_paper.paperName),n}),s=(0,x.select)(function(e){return e.wl_selected_clazz.gradeName}),c((p=function(){function e(){var t=this;o(this,e),this.me=this,r(this,"workName",d,this),r(this,"selectedClazzGradeName",f,this),this.pubStartTime=function(){if(t.validateForm()){var e=t.formData.startTime||new Date,n=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes();if(3===t.commonService.judgeSYS()){var i=t.getDateTime();i&&(n=i)}t.handleConfirmBtnClick(n)}},this.initData()}return g(e,[{key:"initData",value:function(){this.isPubWorkSuccess=!1,this.formData={},this.startDateTime={},this.pubPaperSucceedFlag=!1,this.isWin=3===this.commonService.judgeSYS(),this.isIos=2===this.commonService.judgeSYS(),this.isAndroid=1===this.commonService.judgeSYS(),this.initCtrl=!1,this.formData={},this.clazzList=[],this.assignee=[],this.pubBtnDisabled=!1,this.guideFlag=this.commonService.getSimulationClazzLocalData()}},{key:"configDataPipe",value:function(){var e=this;this.dataPipe.when(function(){return!e.initCtrl&&e.selectedClazzGradeName}).then(function(){e.initCtrl=!0,e.workManageService.getPubClazzList().then(function(t){if(t&&t.length)return"eqc_redo_paper"==e.getStateService().params.from?void e.clazzList.push((0,_.default)(t,{id:e.$ngRedux.getState().wl_selected_clazz.id})):void angular.forEach(t,function(t){t.className.indexOf(e.selectedClazzGradeName)>-1&&100==t.type&&e.clazzList.push(t),e.guideFlag&&!e.guideFlag.hasPubedSimulationWork&&(e.clazzList=[],e.clazzList.push(t))})})})}},{key:"checkSetTimeAndCurrentTime",value:function(e){return Number(new Date(e.year+"-"+e.mouth+"-"+e.date+" "+e.hour+":"+e.minutes).getTime())>=Number((new Date).getTime())+60}},{key:"minTimeSet",value:function(){if(!this.isWin){var e=this.formData.startTime;e&&new Date(e).getTime()<=(new Date).getTime()&&this.commonService.alertDialog("不符合预发布时间，已默认为“立即布置”",2e3)}}},{key:"showDateTime",value:function(){var e=(new Date).getTime();if(this.isWin){var t=this.getDateTime();t&&(e=new Date(t).getTime())}else{var n=this.formData.startTime;e=new Date(n).getTime()}var i="";return(!this.formData.startTime||this.formData.startTime&&e<=(new Date).getTime())&&(i="立即布置"),i}},{key:"getCurrentDateTimeStr",value:function(){var e=new Date,t="-";return this.isIos&&(t="/"),e.getFullYear()+t+(e.getMonth()+1)>9?e.getMonth()+1:"0"+(e.getMonth()+1)+t+e.getDate()>9?e.getDate():"0"+e.getDate()+" "+e.getHours()>9?e.getHours():"0"+e.getHours()+":"+e.getMinutes()>9?e.getMinutes():"0"+e.getMinutes()}},{key:"getDateTime",value:function(){return!this.startDateTime||this.startDateTime&&!this.startDateTime.year?"":this.startDateTime.year+"-"+this.startDateTime.mouth+"-"+this.startDateTime.date+" "+this.startDateTime.hour+":"+this.startDateTime.minutes}},{key:"showShareMenu",value:function(){var e=this,t=this.$ngRedux.getState().profile_user_auth.user.name,n=t+'老师在智算365已布置了作业"'+this.workName+'"，抓紧去完成吧！';this.$ionicActionSheet.show({buttons:[{text:'<img class="weChat-share-img" src="'+v.default+'">通知到微信'},{text:'<img class="qq-share-img" src="'+b.default+'">通知到QQ'}],titleText:'<div>\n                    <div class="share-title">通知内容：</div>\n                        <div class="share-content">'+n+"</div>\n                    </div>",cancelText:"取消",buttonClicked:function(t){if(1==t&&(QQ.setOptions({appId:"1105576253",appName:"XiaoGou",appKey:"IaDN9O8abL0FJ6gT"}),QQ.share(n,"智算365通知","http://xuexiv.com/img/icon.png",e.finalData.GONG_ZHONG_HAO_QRIMG_URL,function(){e.commonService.showAlert("提示","通知成功！")},function(t){e.commonService.showAlert("提示",t)})),0==t){if(!e.getRootScope().weChatInstalled)return void e.commonService.showAlert("提示","没有安装微信！");Wechat.share({scene:Wechat.Scene.SESSION,message:{title:"智算365",description:n,thumb:"http://xuexiv.com/img/icon.png",mediaTagName:"TEST-TAG-001",messageExt:"这个字段没有用",messageAction:"<action>dotalist</action>",media:{type:Wechat.Type.WEBPAGE,webpageUrl:e.finalData.GONG_ZHONG_HAO_QRIMG_URL}}},function(){e.commonService.showAlert("提示","通知成功！")},function(t){e.commonService.showAlert("提示",t)})}return!0}})}},{key:"showClazzModal",value:function(){this.clazzModal.show()}},{key:"selectAll",value:function(e){if(e.isClicked){if(!e.studentCount)return this.commonService.alertDialog("该班还没有学生.",1500),void(e.isClicked=!1);for(var t in e.levelClick)e.levelClick[t].isClicked=!1;this.guideFlag&&!this.guideFlag.hasPubedSimulationWork&&(this.currentStep=2)}}},{key:"selectLevel",value:function(e){this.clazzList[e].isClicked=!1}},{key:"handleClazzPubStatus",value:function(e,t){var n=this;angular.forEach(e,function(e){for(var i=0;i<n.clazzList.length;i++){if("break"===function(i){if(n.clazzList[i].id===e.groupId)return t.CODE===n.finalData.PUB_CLAZZ_STATUS.SUCCESS.CODE?(n.clazzList[i].isClicked&&(n.clazzList[i].hasPubed=!0,n.clazzList[i].isClicked=!1,n.clazzList[i].hasPubedSuccess=!0,n.clazzList[i].code=t.CODE,n.clazzList[i].msg=t.MSG),angular.forEach(n.clazzList[i].levels,function(e,r){n.clazzList[i].levelClick[r].isClicked&&(n.clazzList[i].levelClick[r].isClicked=!1,n.clazzList[i].levelClick[r].hasPubedSuccess=!0,n.clazzList[i].levelClick[r].hasPubed=!0,n.clazzList[i].levelClick[r].code=t.CODE,n.clazzList[i].levelClick[r].msg=t.MSG)})):(n.clazzList[i].isClicked&&(n.clazzList[i].hasPubed=!0),n.clazzList[i].hasPubedSuccess||(n.clazzList[i].code=t.CODE,n.clazzList[i].msg=t.MSG),angular.forEach(n.clazzList[i].levels,function(e,r){n.clazzList[i].levelClick[r].isClicked&&(n.clazzList[i].levelClick[r].hasPubed=!0,n.clazzList[i].levelClick[r].code=t.CODE,n.clazzList[i].levelClick[r].msg=t.MSG)})),"break"}(i))break}})}},{key:"handlePubWork",value:function(e){var t=this,n=this.assignee[this.groupIndex],i=[];i.push(n);var r=angular.copy(e),o=function(){t.groupIndex===t.assignee.length-1?t.pubBtnDisabled=!1:(t.groupIndex++,t.handlePubWork(e))};r.assignee=JSON.stringify(i),this.workManageService.pubWork(r).then(function(e){if(200===e.code){t.isPubWorkSuccess=!0,"pub_work_preview"==t.getStateService().params.from&&(t.pubPaperSucceedFlag=!0,t.workManageService.pubPaperSucceed(t.$ngRedux.dispatch,t.$ngRedux.getState));var n=e[i[0].groupId],r=200===n?t.finalData.PUB_CLAZZ_STATUS.SUCCESS:t.finalData.PUB_CLAZZ_STATUS.FAIL;if(t.handleClazzPubStatus(i,r),t.guideFlag&&!t.guideFlag.hasPubedSimulationWork)return t.guideFlag.hasPubedSimulationWork=!0,t.commonService.saveSimulationClazzLocalData(t.guideFlag),void t.go("home.work_list");t.guideFlag&&t.guideFlag.hasPubedSimulationWork&&!t.guideFlag.isGuideEnd&&(t.guideFlag.isGuideEnd=!0,t.commonService.saveSimulationClazzLocalData(t.guideFlag))}else t.handleClazzPubStatus(i,t.finalData.PUB_CLAZZ_STATUS.FAIL),t.commonService.alertDialog(e.msg,2e3);o()},function(e){t.handleClazzPubStatus(i,t.finalData.PUB_CLAZZ_STATUS.FAIL),o()})}},{key:"handleConfirmBtnClick",value:function(e){var t=this,n={bookMarkId:this.workManageService.backupWork.id,publishType:"eqc_redo_paper"==this.getStateService().params.from?7:6,paperName:this.workManageService.libWork.name,startTime:e+":00",endTime:this.formData.endTime+":00"};if("pub_work_preview"==this.getStateService().params.from&&(n.bookMarkId=this.$ngRedux.getState().compose_multi_unit_paper,n.paperName=this.$ngRedux.getState().compose_temp_paper.paperName),"oral_arithmetic_view"==this.getStateService().params.from){var i=this.$ngRedux.getState().wr_selected_paper.basic.id;n.bookMarkId=i,n.publishType=this.getStateService().params.publishType||10}"work_paper_detail"==this.getStateService().params.from&&(delete n.bookMarkId,n.paperId=this.workManageService.libWork.id,n.paperName=this.workManageService.libWork.name,n.publishType=2),(!this.formData.startTime&&!this.startDateTime||!this.formData.startTime&&this.startDateTime&&!this.startDateTime.year)&&delete n.startTime;var r=n.startTime.replace(/\-/g,"/");n.startTime&&new Date(r).getTime()<=(new Date).getTime()&&delete n.startTime,this.formData.endTime||delete n.endTime;this.commonService.showConfirm("信息提示","是否要布置？").then(function(e){e&&(t.groupIndex=0,t.pubBtnDisabled=!0,t.handleClazzPubStatus(t.assignee,t.finalData.PUB_CLAZZ_STATUS.PROCESSING),t.handlePubWork(n))})}},{key:"validateForm",value:function(){var e=this;return this.assignee.length=0,this.clazzList.forEach(function(t){var n=[],i={};if(t.isClicked)i.groupId=t.id,e.assignee.push(i);else{for(var r in t.levelClick)t.levelClick[r].isClicked&&n.push(r);n.length&&(i.groupId=t.id,i.levels=n.join(","),e.assignee.push(i))}}),!!this.assignee.length||(this.commonService.alertDialog("至少选择一个布置对象!",1500),!1)}},{key:"back",value:function(){this.pubPaperSucceedFlag?this.go("pub_work_type"):this.go("pub_work_preview")}},{key:"isShowIosShare",value:function(){return this.commonService.judgeAppVersion()}},{key:"getHighLightEle",value:function(){if(2==this.currentStep)return void(this.currentShowEle=$(".bar-item").eq(0));this.currentStep=1,this.currentShowEle=$(".pub-list-wrap .item-checkbox").eq(0)}},{key:"showSelectDateTimeDiagnose",value:function(){3===this.commonService.judgeSYS()&&(this.getRootScope().selectDateTimeFlag=!0)}}]),e}(),d=a(p.prototype,"workName",[l],{enumerable:!0,initializer:null}),f=a(p.prototype,"selectedClazzGradeName",[s],{enumerable:!0,initializer:null}),u=p))||u);t.default=k},5612:function(e,t){e.exports='<ion-view title="布置作业" hide-nav-bar="true" class="work_pub2_file">\r\n    <ion-header-bar class="bar-balanced" align-title="center">\r\n        <div class="button button-clear" ng-click="ctrl.back()">\r\n            <i class="icon ion-ios-arrow-back"> </i>&nbsp;&nbsp;\r\n        </div>\r\n        <h1 class="title" style="font-family: \'Microsoft YaHei\'">布置作业</h1>\r\n    </ion-header-bar>\r\n    <ion-content padding="true">\r\n        <ng-form name="pubWorkForm" novalidate class="pub-content">\r\n            <div class="paper-title-wrap">\r\n                <span class="paper-name padding-better">作业名称:</span>\r\n                <span class="paper-title" ng-bind="ctrl.workName"></span>\r\n            </div>\r\n            <div class="pub-conctroll-wrap">\r\n\r\n                <span class="pub-controll-name padding-better">发布时间：</span>\r\n                <div style="position: relative;;min-width: 50%;">\r\n                    <input ng-if="!ctrl.isWin" type="datetime-local" name="subject" min="{{ctrl.getCurrentDateTimeStr()}}"\r\n                           ng-model="ctrl.formData.startTime"\r\n                           placeholder="立即布置"\r\n                           ng-change="ctrl.minTimeSet()"\r\n                           style="pointer-events:auto;background-color: rgba(220, 224, 255, 0.9);border: solid 1px #566093;border-radius: 0 !important;width: 100%;height:35px;line-height:35px"/>\r\n                    \x3c!--TODO 设置浮动在上面也可点击--\x3e\r\n                    <span ng-if="!!ctrl.showDateTime()&&!ctrl.isWin" style="pointer-events: none;" class="pub-right-now pub-right-now-win">\r\n                        立即布置\r\n                        <i class="ion-arrow-down-b"></i>\r\n                    </span>\r\n                    <p ng-if="ctrl.isWin" style="margin: 0;pointer-events:auto;"\r\n                       ng-bind="ctrl.checkSetTimeAndCurrentTime(ctrl.startDateTime)?ctrl.startDateTime.year+ \'-\' + ctrl.startDateTime.mouth+ \'-\' + ctrl.startDateTime.date+ \' \' + ctrl.startDateTime.hour+ \':\' + ctrl.startDateTime.minutes:\'立即布置\'"\r\n                       ng-click="ctrl.showSelectDateTimeDiagnose()"></p>\r\n                    <alr-select-date-time date-time="ctrl.startDateTime"></alr-select-date-time>\r\n                </div>\r\n\r\n            </div>\r\n            <div class="pub-list-wrap" style="margin-bottom: 60px">\r\n                <div class="item has-no-clazz" ng-show="!ctrl.clazzList || ctrl.clazzList.length<=0">布置作业前请先创建班级哦！</div>\r\n                <div class="pub-clazz-name-wrap padding-better">\r\n                    <span>选择布置对象：</span>\r\n                </div>\r\n                <div class="card card-better" ng-class="{\'clazz_margin_bottom_last\':$last}"\r\n                     ng-repeat="clazz in ctrl.clazzList track by $index" ng-init="idx=$index">\r\n                    <div class="clazz-name-wrap">\r\n                        <span class="clazz-name" ng-bind="clazz.name"></span>\r\n                    </div>\r\n                    <ion-checkbox ng-model="clazz.isClicked"\r\n                                  ng-click="clazz.hasPubedSuccess?\'\':ctrl.selectAll(clazz)"\r\n                                  ng-disabled="clazz.hasPubedSuccess?true:false">\r\n                        全班（{{clazz.studentCount}}人）- 包含所有层\r\n                        <span style="float: right;color: red"\r\n                              ng-if="clazz.hasPubed&&clazz.msg&&clazz.code!=2"\r\n                              ng-bind="clazz.msg">\r\n                        </span>\r\n                        <img ng-src="{{$root.loadImg(\'work/work_pub_succuss.png\')}}"\r\n                             ng-if="clazz.code===2"\r\n                             style="width: 70px;float: right;">\r\n                    </ion-checkbox>\r\n                    <ion-checkbox ng-repeat="(name,level) in clazz.levels"\r\n                                  ng-class="$even?\'clazz-even\':\'\'"\r\n                                  ng-model="clazz.levelClick[name].isClicked"\r\n                                  ng-click="clazz.levelClick[name].hasPubedSuccess?\'\':ctrl.selectLevel(idx)"\r\n                                  ng-disabled="clazz.levelClick[name].hasPubedSuccess?true:false"\r\n                                  ng-if="clazz.studentCount != level">\r\n                        {{name}}层（{{level}}人）\r\n                        <span style="float: right"\r\n                              ng-if="clazz.levelClick[name].hasPubed&&clazz.levelClick[name].msg&&clazz.levelClick[name].code!=2"\r\n                              ng-bind="clazz.levelClick[name].msg"\r\n                              style="color: red">\r\n                        </span>\r\n                        <img ng-src="{{$root.loadImg(\'work/work_pub_succuss.png\')}}"\r\n                             ng-if="clazz.levelClick[name].code===2"\r\n                             style="width: 70px;float: right;">\r\n                    </ion-checkbox>\r\n                </div>\r\n                <div class="pub-text-tip"\r\n                     ng-if="$root.platform.isMobile()&&$root.platform.IS_ANDROID&&$root.weChatPluginInstalled">\r\n                    作业布置成功后，可点击“通知”告诉学生和家长\r\n                </div>\r\n            </div>\r\n        </ng-form>\r\n    </ion-content>\r\n    <loading-processing></loading-processing>\r\n    <div class="bar bar-footer bar-balanced" ng-show="ctrl.clazzList && ctrl.clazzList.length>0">\r\n        <button class="button-clear bg-calm  bar-item"\r\n                ng-click="ctrl.pubStartTime()"\r\n                ng-disabled="ctrl.pubBtnDisabled"\r\n                ng-class="ctrl.pubBtnDisabled?\'btn-disabled-color\':\'\'">\r\n            <i class="icon ion-ios-paperplane"></i>\r\n            布置\r\n        </button>\r\n        <button class="button-clear bg-calm  bar-item"\r\n                ng-click="ctrl.showShareMenu()"\r\n                ng-if="$root.platform.isMobile()&&$root.weChatPluginInstalled && ctrl.isShowIosShare()&&ctrl.isPubWorkSuccess">\r\n            <i class="icon ion-aperture"></i>\r\n            通知\r\n        </button>\r\n    </div>\r\n\r\n    <teaching-guide ng-if="ctrl.guideFlag && !ctrl.guideFlag.isGuideAnimationEnd && ctrl.guideFlag.isSameUser"\r\n                    current-show-ele="ctrl.currentShowEle"\r\n                    step-count="2"\r\n                    current-step="ctrl.currentStep"\r\n                    get-high-light-ele="ctrl.getHighLightEle()">\r\n    </teaching-guide>\r\n</ion-view>\r\n\r\n'},5613:function(e,t,n){var i=n(5614);"string"==typeof i&&(i=[[e.id,i,""]]);n(147)(i,{});i.locals&&(e.exports=i.locals)},5614:function(e,t,n){t=e.exports=n(146)(),
t.push([e.id,"@charset \"UTF-8\";\n.display-flex {\n  display: flex;\n  display: -webkit-flex;\n  align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n  -webkit-align-items: center;\n}\n.display-flex-pure {\n  display: flex;\n  display: -webkit-flex;\n}\n.overflow-ellipsis {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.flex_1 {\n  flex: 1;\n  -webkit-flex: 1;\n}\n.flex_2 {\n  flex: 2;\n  -webkit-flex: 2;\n}\n.flex_3 {\n  flex: 3;\n  -webkit-flex: 3;\n}\n.flex_4 {\n  flex: 4;\n  -webkit-flex: 4;\n}\n.flex_5 {\n  flex: 5;\n  -webkit-flex: 5;\n}\n.flex_6 {\n  flex: 6;\n  -webkit-flex: 6;\n}\n.flex_7 {\n  flex: 7;\n  -webkit-flex: 7;\n}\n.flex_8 {\n  flex: 8;\n  -webkit-flex: 8;\n}\n.flex_9 {\n  flex: 9;\n  -webkit-flex: 9;\n}\n.com_align_item {\n  align-items: center;\n  -webkit-align-items: center;\n}\n.com_justify-content {\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.com_align_item_end {\n  align-items: flex-end;\n  -webkit-align-items: flex-end;\n}\n.com_justify_content_space {\n  justify-content: space-between;\n  -webkit-justify-content: space-between;\n}\n.com_flex-direction_column {\n  flex-direction: column;\n  -webkit-flex-direction: column;\n}\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nbutton,\nbody {\n  font-family: 'microsoft yahei';\n}\nbody {\n  line-height: 1.42857143;\n}\n/*==============统一强制覆盖ionic样式Start==============*/\n.input-area {\n  display: inline-block !important;\n}\n.tab-item-active {\n  /*  color:#89B64B !important; */\n  color: #6B94D6 !important;\n}\n.bar-header {\n  background: #fff !important;\n  /*color: #fff !important;\n  background: #89B64B !important;*/\n}\n.bar .title {\n  color: #4A6B9D!important;\n}\n.bar-footer {\n  background: #5c6761 !important;\n  color: #fff!important;\n}\n.defined_bg {\n  background: #6B94D6 !important;\n  color: #fff !important;\n}\n.defined_bg_tint {\n  background: #A3B6DA !important;\n  color: #fff !important;\n}\n.item-divider {\n  /*background-color:#B8CFE4!important;*/\n  background-color: #fff !important;\n  font-size: 17px;\n  font-color: #6B94D6;\n  color: #6B94D6!important;\n  /*color:#233152!important;*/\n  /*margin: 10px auto;*/\n}\n.item-divider span {\n  margin-left: 5px;\n}\n/*==============强制覆盖ionic样式End==============*/\n/*==============公用样式Start==============*/\n.text-font-color {\n  color: #553333!important;\n}\n.text-align-left {\n  text-align: center;\n}\n.text-align-center {\n  text-align: center;\n}\n.text-align-right {\n  text-align: center;\n}\n.border-solid {\n  border: 1px solid;\n}\n.border-bottom-solid {\n  border-bottom: 1px solid;\n}\n.border-color {\n  border-color: #D7AD97;\n}\n.table-header-color {\n  background: #d2f7ef;\n}\n.table-tr-color,\n.row-color {\n  background: #fbf7db;\n}\n.ion-item-even {\n  background: #FFF;\n}\n.ion-item-odd {\n  background: #F3F3F3;\n}\n.work-correct-font {\n  font-weight: bold;\n  font-size: 19px;\n  color: #003366;\n}\n.button-color {\n  background: #5c6761 !important;\n  color: #fff!important;\n}\n.item-input-height {\n  height: 40px;\n}\n.item-input-height input {\n  font-size: 18px;\n  color: #553333!important;\n}\n.content-font-color h2,\n.content-font-color p {\n  color: #553333!important;\n}\n.theme-color {\n  color: #6B94D6;\n}\n.pull-icon {\n  color: #6B94D6;\n  font-size: 30px;\n  position: absolute;\n  right: 0;\n  bottom: 0px;\n}\n.card-better {\n  border-radius: 10px;\n  box-shadow: 0px 0px 18px #D0C4C4;\n  padding-bottom: 0px;\n  padding-top: 0px;\n}\n.card-better .card-title {\n  color: #273A43;\n  background: #D2F7EF;\n}\n.card-better .card-body {\n  color: #4a3c37;\n}\n.list-even {\n  background: #FDF8EE;\n}\n.small_q_bg {\n  background: #daf5fe;\n}\n.small_q_bg .q-context {\n  color: #17233e;\n  margin-top: 20px;\n}\n/*===========弹出框样式====================*/\n.popup-container .popup {\n  border-radius: 10px;\n  -webkit-border-radius: 10px;\n}\n.popup-container .popup .popup-head {\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n  -webkit-border-top-left-radius: 10px;\n  -webkit-border-top-right-image: 10px;\n  background: #6B94D6 !important;\n}\n.popup-container .popup .popup-head .popup-title {\n  color: #fff;\n  font-size: 16px;\n}\n.popup-container .popup .popup-buttons .button {\n  background: #58D152 !important;\n  border-radius: 10px;\n  -webkit-border-radius: 10px;\n  border-color: #58D152 !important;\n  color: #fff;\n}\n/*==============统一强制覆盖ionic样式End==============*/\n.scrollToTop {\n  height: 48px;\n  width: 48px;\n  position: fixed;\n  bottom: 15%;\n  right: 5%;\n  z-index: 1000;\n  display: none;\n  opacity: 0.6;\n  background: url("+n(4666)+') no-repeat;\n}\n/*==================公共图标样式=======================*/\n.common-help {\n  width: 30px;\n  border-radius: 15px;\n}\n.common-help-tip {\n  width: 24px;\n  border-radius: 15px;\n  /* margin-top: 0px; */\n  position: absolute;\n  top: 22px;\n  left: 36px;\n}\n.btn-disabled-color {\n  color: #C7B7B7!important;\n}\nh1.title {\n  overflow: hidden;\n}\n.circle-input-area {\n  border-radius: 50%!important;\n}\n.pane[hide-nav-bar="true"] .has-tabs-top {\n  top: 0px;\n}\nion-header-bar .button i,\nion-header-bar .title {\n  color: #4a6b9d;\n}\n.common-back-btn {\n  width: 50px;\n  text-align: left;\n}\n.common-help-tip-wrap {\n  border-radius: 8px;\n  margin: 20px 10px 0px 10px;\n  background-color: #ffffff;\n}\n.common-help-tip-wrap .common-help-bar {\n  color: #838E92;\n  font-size: 15px;\n  text-align: left;\n  margin: 0;\n  padding: 5px 10px;\n}\n.common-help-tip-wrap .common-help-bar .common-help-bar-icon {\n  margin-right: 10px;\n  color: #F26691;\n  font-size: 25px;\n  vertical-align: sub;\n}\n.work_pub2_file .clazz_margin_bottom {\n  margin-bottom: 15px;\n}\n.work_pub2_file .clazz_margin_bottom_last {\n  margin-bottom: 20px;\n}\n.work_pub2_file .padding-better {\n  padding-left: 10px;\n}\n.work_pub2_file .pub-content {\n  padding-top: 20px;\n  font-size: 17px;\n  color: #293d69;\n  background-color: #E9EDF3;\n}\n.work_pub2_file .pub-content .paper-title-wrap {\n  height: 55px;\n  line-height: 55px;\n  text-align: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.work_pub2_file .pub-content .paper-title-wrap .paper-name {\n  float: left;\n}\n.work_pub2_file .pub-content .paper-title-wrap .paper-title {\n  text-align: center;\n}\n.work_pub2_file .pub-content .pub-conctroll-wrap {\n  border: 1px solid #ddd;\n  border-radius: 10px;\n  box-shadow: 2px 2px 0px #aaaaaa;\n  height: 55px;\n  line-height: 55px;\n  padding-right: 10px;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  justify-content: space-between;\n  -webkit-justify-content: space-between;\n  align-items: center;\n  -webkit-align-items: center;\n}\n.work_pub2_file .pub-content .pub-conctroll-wrap select {\n  height: 50px;\n  float: right;\n  border: none;\n}\n.work_pub2_file .pub-content .pub-conctroll-wrap .pub-right-now {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  pointer-events: none;\n  width: 100%;\n  height: 35px;\n  line-height: 35px;\n  background-color: #fff;\n  border: solid 1px #566093;\n  border-left: solid 2px #566093;\n  border-right: solid 2px #566093;\n}\n.work_pub2_file .pub-content .pub-conctroll-wrap .pub-right-now-win {\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  justify-content: space-between;\n  -webkit-justify-content: space-between;\n  align-items: center;\n  -webkit-align-items: center;\n}\n.work_pub2_file .pub-content .pub-list-wrap .has-no-clazz {\n  margin-top: 20px;\n}\n.work_pub2_file .pub-content .pub-list-wrap .item {\n  border: none;\n}\n.work_pub2_file .pub-content .pub-list-wrap .clazz-even {\n  background-color: #FEFAF1;\n}\n.work_pub2_file .pub-content .pub-list-wrap .pub-clazz-name-wrap {\n  height: 40px;\n  line-height: 40px;\n  margin-top: 20px;\n}\n.work_pub2_file .pub-content .pub-list-wrap .clazz-name-wrap {\n  height: 50px;\n  line-height: 50px;\n  text-align: center;\n  background-color: #aff1e1;\n}\n',""])}});
webpackJsonp([35],{0:function(t,e,n){"use strict";n(4533),n(4545),n(4580),n(4583),n(4584)},171:function(t,e,n){"use strict";function i(t,e,n){x=t,e&&(_=e),n&&(S=n);var i=angular.element("body").injector(),r=i.get("$rootScope"),o=i.get("$ngRedux");_&&n?o?o.mergeReducer(_,S).then(function(){console.log(t.name+"-storeReady!!!!!!!!!!"),r.$$listeners[t.name+"-storeReady"]?r.$broadcast(t.name+"-storeReady"):r[t.name+"-storeReady"]=!0}):(console.error("$ngRedux not found!"),r[t.name+"-storeReady"]=!0):r[t.name+"-storeReady"]=!0}function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){function n(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return T(e,t,i),t.$inject=e,t.instance=new(Function.prototype.bind.apply(t,[null].concat(i))),t.instance}return n.prototype=t.prototype,n.$inject=e,n}}function o(t,e){return function(n){var i=function(t){return t.targetScope.ctrl},r=function(t,e){Object.keys(e).concat(Object.getOwnPropertyNames(e.__proto__)).forEach(function(n){if("constructor"!==n)if(t[n])if(angular.isFunction(t[n])&&angular.isFunction(e[n])){var i=t[n];t[n]=function(){var t=this,r=arguments;i.call(this,arguments).then(function(){e[n].call(t,r)})}}else t[n]=e[n];else t[n]=e[n]})};x.run(["$rootScope","$injector",function(o,s){o.$on("$ionicView.loaded",function(o,a){if(a.stateName===t){var c=i(o),l=new n;e.inject&&e.inject.length&&e.inject.forEach(function(t){l[t]=s.get(t)}),r(c,l)}})}])}}function s(t,e){return function(n){function i(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];e.inject&&e.inject.length&&T(e.inject,n,i);var o=new(Function.prototype.bind.apply(n,[null].concat(i)));o.selectorList=o.selectorList?o.selectorList:[];var s=function(){},a={initFlags:s,initData:s,mapStateToThis:s,mapActionToThis:s,componentWillReceiveProps:s,onBeforeEnterView:s,onAfterEnterView:s,onBeforeLeaveView:s,onLoadedView:s,onUpdate:s,configDataPipe:s,onReceiveProps:s},c={viewEntered:!1,hasPageRefreshManger:!1,dataPipe:new m.default},l=s,d=s;Object.keys(a).forEach(function(t){o[t]||(o[t]=a[t])}),Object.assign(o,c),o.configDataPipe(),o.mapStateObj={selectorList:o.selectorList,mapStateToThis:o.mapStateToThis};var u=o.getScope();if(!u)throw new Error('$scope must be injected with Decorator "@View"');var g=o.$ngRedux;if(!g)throw new Error('$ngRedux must be injected with Decorator "@View"');var f=o.pageRefreshManager;if(!o.getStateService)throw new Error("$state is required with pageRefreshManager");if(o.go=function(t,e,n){if(!o.getStateService||!o.getStateService())return console.error("$state service is not injected!");"string"!=typeof e&&(n=e,e="forward");var i=o.$injector.get("$ionicViewSwitcher");o.viewEntered=!1,"none"!=e?i.nextDirection(e):i.nextDirection("none"),o.getStateService().go(t,n)},f&&f.getListenerName&&(o.hasPageRefreshManger=!0,o.hasPageRefreshManger)){var p=o.getStateService();d=u.$on(f.getListenerName(p.current,p.params),function(t,e){f.shouldUpdate(p,e.url)&&o.onUpdate()})}var h=u.$on("$ionicView.beforeEnter",function(){if(o.onBeforeEnterView(),o.getRootScope&&o.back){o.getRootScope().viewGoBack=o.back.bind(o)}}),b=u.$on("$ionicView.beforeLeave",function(){l(),o.viewEntered=!1,o.onBeforeLeaveView()}),v=u.$on("$ionicView.loaded",function(){o.onLoadedView()}),k=u.$on("$ionicView.afterEnter",function(){u.$evalAsync(function(){o.viewEntered=!0,l=g.connect(o.mapStateObj,o.mapActionToThis(),o)(function(t,e){o.viewEntered&&(Object.assign(o,t,e),o.dataPipe.run(o),u.$evalAsync(function(){o.onReceiveProps(t,e)}))}),o.onAfterEnterView()})});return u.$on("$destroy",function(){l(),d(),k(),h(),b(),v()}),o}return i.prototype=n.prototype,i.$inject=n.$inject,e.inject&&e.inject.length&&(i.$inject=e.inject),i.$inject.push("$injector"),x.config(["$stateProvider",function(n){if(e.views){var r=Object.keys(e.views)[0],o=e.views[r];o.controller=i,o.controllerAs=o.controllerAs||"ctrl"}else e.controller=i,e.controllerAs=e.controllerAs||"ctrl";n.state(t,e)}]),i}}function a(t){return function(e){if(!t.selector)throw new Error("selector must be provided!");t.controller=e,t.controllerAs||(t.controllerAs="ctrl"),x.directive(t.selector,function(){return t})}}function c(t){return function(e){e.controller=e,x.component(t.selector,t)}}function l(t){return function(e,n,i){if(i.writable=!0,e.selectorList||(e.selectorList=[]),t)if("string"==typeof t)e.selectorList.push({type:y,key:n,selector:t});else if(t instanceof Array)e.selectorList.push({type:k,key:n,selector:t});else{if(!(t instanceof Function))throw new Error("unknown selector type!");e.selectorList.push({type:w,key:n,selector:t})}else e.selectorList.push({type:v,key:n})}}function d(t,e,n){var i=n.value,r=void 0;return n.value=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var s=t.$ngRedux;if(!s)throw new Error("$ngRedux is required by decorator @actionCreator");var a=(0,b.bindActionCreators)(i.bind(t.constructor.instance),s.dispatch);return r=a.apply(t,n)},n}function u(t,e){return function(n){x.constant(t,e)}}function g(t,e){return function(n){e&&e.inject&&e.inject.length&&(n.$inject=e.inject),x.service(t,n)}}function f(t,e,n){var i=n.value;return n.value=function(){var t=this;return new Promise(function(e){i.call(t,e)})},n}Object.defineProperty(e,"__esModule",{value:!0}),e.registerModule=i,e.Inject=r,e.ViewDecorator=o,e.View=s,e.Directive=a,e.Component=c,e.select=l,e.actionCreator=d,e.Constant=u,e.Service=g,e.PromiseFn=f;var p=n(172),h=n(174),m=function(t){return t&&t.__esModule?t:{default:t}}(h),b=n(176),v="EMPTY_SELECTOR_TYPE",k="PATH_SELECTOR_TYPE",w="FUNCTION_SELECTOR_TYPE",y="STR_SELECTOR_TYPE",x=p.ngDecModule,_=void 0,S=void 0,T=function(t,e,n){t.forEach(function(t,i){"$scope"==t?e.prototype.getScope=function(){return n[i]}:"$rootScope"==t?e.prototype.getRootScope=function(){return n[i]}:"$state"==t?e.prototype.getStateService=function(){return n[i]}:"$ngRedux"==t?(e.prototype.getState=function(){return n[i].getState()},e.prototype[t]=n[i]):e.prototype[t]=n[i]})}},172:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ngDecModule=void 0,n(173);var i=angular.module("ngDecModule",[]);e.ngDecModule=i},174:function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(175),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(){function t(e,n,r){i(this,t),this.id=(0,s.default)(),this.criteriaList=e||[],this.invokeList=n||[],this.sequence=r||0}return r(t,[{key:"pushCriteria",value:function(t){this.criteriaList.push(t)}},{key:"pushInvoke",value:function(t){this.invokeList.push(t)}}]),t}(),c=function(){function t(){i(this,t),this.configList=[],this.lastConfigId=null,this.lastActionType=d.PUSH_CRITERIA}return r(t,[{key:"getLastConfig",value:function(){var t=this,e=null,n=void 0;switch(this.lastActionType){case d.PUSH_CRITERIA:return this.lastConfigId?this.configList.forEach(function(n){n.id==t.lastConfigId&&(e=n)}):(e=new a,e.sequence=1,this.configList.push(e),this.lastConfigId=e.id),e;case d.PUSH_INVOKE:case d.NEXT:return this.configList.forEach(function(n){n.id==t.lastConfigId&&(e=n)}),n=new a,n.sequence=e.sequence++,this.configList.push(n),this.lastConfigId=n.id,n}}},{key:"when",value:function(t){return"function"!=typeof t?console.error(l.CRITERIA_ERROR):(this.getLastConfig().pushCriteria(t),this.lastActionType=d.PUSH_CRITERIA,this)}},{key:"then",value:function(t){return"function"!=typeof t?console.error(l.INVOKE_ERROR):(this.getLastConfig().pushInvoke(t),this.lastActionType=d.PUSH_INVOKE,this)}},{key:"next",value:function(){return this.lastActionType=d.NEXT,this}},{key:"run",value:function(t){for(var e=!0,n=this.configList.slice(0,this.configList.length);e&&n.length;){for(var i=[n.shift()];n[0]&&i[0].sequence==n[0].sequence;)i.push(n.shift());for(var r=0;r<i.length;r++)!function(n){var r=i[n],o=!0;r.criteriaList.forEach(function(e){o=o&&e.call(t)}),o?r.invokeList.forEach(function(e){e.call(t)}):e=!1}(r)}}}]),t}(),l={CRITERIA_ERROR:"criteria should be function!",INVOKE_ERROR:"invoke should be function"},d={PUSH_CRITERIA:"PUSH_CRITERIA",PUSH_INVOKE:"PUSH_INVOKE",NEXT:"NEXT"};window.dataPipe=new c,e.default=c},175:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return Math.pow(2,t)},i=(n(4),n(6)),r=n(8),o=n(12),s=(n(14),n(16)),a=n(32),c=(n(40),n(48),function(t,e){return Math.floor(Math.random()*(e-t+1))+t}),l=function(){return c(0,i-1)},d=function(){return c(0,r-1)},u=function(){return c(0,o-1)},g=function(){return c(0,s-1)},f=function(){return c(0,a-1)},p=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},h=function(t,e,n){t=String(t),n=n||"0";for(var i=e-t.length;i>0;i>>>=1,n+=n)1&i&&(t=n+t);return t},m=function(t,e,n,i,r,o){return h(t.toString(16),8)+"-"+h(e.toString(16),4)+"-"+h(n.toString(16),4)+"-"+h(i.toString(16),2)+h(r.toString(16),2)+"-"+h(o.toString(16),12)},b=function(){return m(f(),g(),16384|u(),128|l(),d(),p())};e.default=b},4533:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.t_credits_store=void 0;var i=n(171);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var r=n(4534),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=n(4536),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(s),c=angular.module("t_credits_store",["t_credits_store.directives"]);(0,i.registerModule)(c,o.default,a),e.t_credits_store=c},4534:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(4535),o=i(r),s=n(4538),a=i(s),c=n(4539),l=i(c),d=n(4540),u=i(d),g=n(4541),f=i(g),p=n(4542),h=i(p),m=n(4543),b=i(m),v=n(4544),k=i(v),w={teacher_task_list:o.default,select_teacher_task:a.default,default_receiver:l.default,get_default_receiver_processing:u.default,credits_goods_list_processing:h.default,credits_goods_list:f.default,select_credits_goods:b.default,teacher_ratory_info:k.default};e.default=w},4535:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4536),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),o=n(4537);e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.teacher_task_list,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object.assign({},t);switch(e.type){case o.TEACHER_TASK.FETCH_TASK_LIST_SUCCESS:return e.payload;default:return t}}},4536:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.teacher_task_list=[],e.select_teacher_task={},e.default_receiver={},e.get_default_receiver_processing=!1,e.teacher_credits_detail=0,e.credits_goods_list={hotSellGoods:[],goods:[],lastKey:"",count:16},e.credits_goods_list_processing=!1,e.select_credits_goods={},e.teacher_ratory_info={}},4537:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.TEACHER_TASK={FETCH_TASK_LIST_START:"FETCH_TASK_LIST_START",FETCH_TASK_LIST_SUCCESS:"FETCH_TASK_LIST_SUCCESS",FETCH_TASK_LIST_FAIL:"FETCH_TASK_LIST_FAIL",SELECT_TEACHER_TASK:"SELECT_TEACHER_TASK"},e.GET_DEFAULT_RECEIVER_START="GET_DEFAULT_RECEIVER_START",e.GET_DEFAULT_RECEIVER_SUCCESS="GET_DEFAULT_RECEIVER_SUCCESS",e.GET_DEFAULT_RECEIVER_FAIL="GET_DEFAULT_RECEIVER_FAIL",e.CREDITS_DETAIL={FETCH_CREDITS_DETAIL_START:"FETCH_CREDITS_DETAIL_START",FETCH_CREDITS_DETAIL_SUCCESS:"FETCH_CREDITS_DETAIL_SUCCESS",FETCH_CREDITS_DETAIL_FAIL:"FETCH_CREDITS_DETAIL_FAIL"},e.CREDITS_GOODS={FETCH_CREDITS_GOODS_LIST_START:"FETCH_CREDITS_GOODS_LIST_START",FETCH_CREDITS_GOODS_LIST_SUCCESS:"FETCH_CREDITS_GOODS_LIST_SUCCESS",FETCH_CREDITS_GOODS_LIST_FAIL:"FETCH_CREDITS_GOODS_LIST_FAIL",FETCH_CREDITS_GOODS_LIST_MORE:"FETCH_CREDITS_GOODS_LIST_MORE",SELECT_CREDITS_GOODS:"SELECT_CREDITS_GOODS"},e.RATORY_INFO={FETCH_RATORY_INFO_START:"FETCH_RATORY_INFO_START",FETCH_RATORY_INFO_SUCCESS:"FETCH_RATORY_INFO_SUCCESS",FETCH_RATORY_INFO_FAIL:"FETCH_RATORY_INFO_FAIL"}},4538:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4536),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),o=n(4537);e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.select_teacher_task,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object.assign({},t);switch(e.type){case o.TEACHER_TASK.SELECT_TEACHER_TASK:return e.payload;default:return t}}},4539:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4536),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),o=n(4537);e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.default_receiver,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object.assign({},t);switch(e.type){case o.GET_DEFAULT_RECEIVER_SUCCESS:return e.payload;default:return t}}},4540:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4536),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),o=n(4537);e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.get_default_receiver_processing;switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:null).type){case o.GET_DEFAULT_RECEIVER_START:case o.GET_DEFAULT_RECEIVER_FAIL:return!1;case o.GET_DEFAULT_RECEIVER_SUCCESS:return!0;default:return t}}},4541:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4536),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),o=n(4537);e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.credits_goods_list,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object.assign({},t);switch(e.type){case o.CREDITS_GOODS.FETCH_CREDITS_GOODS_LIST_SUCCESS:return n.hotSellGoods=e.payload.hotSellGoods,n.goods=e.payload.goods,n.count=e.payload.count,n.lastKey=e.payload.lastKey,n;case o.CREDITS_GOODS.FETCH_CREDITS_GOODS_LIST_MORE:return e.payload.goods&&e.payload.goods.length>0&&n.goods.push(e.payload.goods),n.count=e.payload.count,n.lastKey=e.payload.lastKey,n;default:return t}}},4542:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4536),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),o=n(4537);e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.credits_goods_list_processing;switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:null).type){case o.CREDITS_GOODS.FETCH_CREDITS_GOODS_LIST_START:case o.CREDITS_GOODS.FETCH_CREDITS_GOODS_LIST_FAIL:return!1;case o.CREDITS_GOODS.FETCH_CREDITS_GOODS_LIST_SUCCESS:return!0;default:return t}}},4543:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4536),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),o=n(4537);e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.select_credits_goods,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object.assign({},t);switch(e.type){case o.CREDITS_GOODS.SELECT_CREDITS_GOODS:return e.payload;default:return t}}},4544:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4536),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),o=n(4537);e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.teacher_ratory_info,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object.assign({},t);switch(e.type){case o.RATORY_INFO.FETCH_RATORY_INFO_SUCCESS:return e.payload;default:return t}}},4545:function(t,e,n){"use strict";n(4546),n(4553),n(4557),n(4561),n(4565),n(4569)},4546:function(t,e,n){"use strict";function i(t,e,n,i){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,n,i,r){var o={};return Object.keys(i).forEach(function(t){o[t]=i[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(t,e,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0});var s,a,c,l,d,u,g,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=n(4547),m=function(t){return t&&t.__esModule?t:{default:t}}(h),b=n(4533),v=(s=(0,b.View)("credits_store_task",{url:"credits_store_task/:fromUrl",styles:n(4548),template:n(4550),inject:["$scope","$state","$rootScope","$stateParams","$ngRedux","$ionicHistory","$ionicLoading","$ionicPopup","$timeout","commonService","creditsStoreService","diagnoseService"]}),a=(0,b.select)(function(t){return t.profile_user_auth.user.name}),c=(0,b.select)(function(t){return t.teacher_credits_detail}),s((d=function(){function t(){r(this,t),this.taskList=[],this.taskListTemp=[],this.loading=!0,i(this,"userName",u,this),i(this,"currentCredits",g,this)}return p(t,[{key:"initData",value:function(){this.taskListTemp=[{imgUrl:"task_list/type1.png",butnStr:"通知学生加入"},{imgUrl:"task_list/type2.png",butnStr:"邀请老师"},{imgUrl:"task_list/type3.png",butnStr:"布置作业"},{imgUrl:"task_list/type4.png",butnStr:"布置游戏"},{imgUrl:"task_list/type5.png",butnStr:"提醒学生"}],this.getStateService().params.fromUrl&&(this.fromUrl=this.getStateService().params.fromUrl)}},{key:"onAfterEnterView",value:function(){this.initData(),this.getTaskList()}},{key:"getTaskList",value:function(){var t=this;this.creditsStoreService.getAllTaskList().then(function(e){e&&200==e.code&&t.dealTaskData(e.result)})}},{key:"dealTaskData",value:function(t){var e=this;this.taskList.length=0,angular.forEach(t,function(i,r){e.taskList.push(t[r]),e.taskList[r].taskName=e.taskList[r].taskName.replace(/智慧币/g,"<img src='"+n(4551)+"'>"),e.taskList[r].taskName=e.taskList[r].taskName.replace(/##可重复领##/g,"<img class='icon-repeat' src='"+n(4552)+"'>"),e.taskListTemp.length>=Number(i.taskType)&&(e.taskList[r].imgUrl=e.taskListTemp[Number(i.taskType)-1].imgUrl,e.taskList[r].butnStr=e.taskListTemp[Number(i.taskType)-1].butnStr),e.taskList[r].taskType})}},{key:"onBeforeEnterView",value:function(){}},{key:"back",value:function(){null!==this.$ionicHistory.backView()?this.$ionicHistory.goBack():this.$stateParams.fromUrl?this.go(this.$stateParams.fromUrl):this.go("home.work_list")}},{key:"gotoTaskProgress",value:function(t){3!=t.taskType&&4!=t.taskType||t.canDo?(this.creditsStoreService.selectTask(t),this.go("task_progress")):(3==t.taskType&&this.$ionicPopup.alert({title:"提示",template:"请先把班级加满20人，再来布置作业吧！"}),4==t.taskType&&this.$ionicPopup.alert({title:"提示",template:"请先把班级加满20人，再来布置游戏吧！"}))}},{key:"gotoCreditsList",value:function(t){this.go("credits_list")}},{key:"goCreditsStore",value:function(t){this.go("credits_store")}},{key:"gotoDoTask",value:function(t,e){"object"===(void 0===e?"undefined":f(e))&&e.stopPropagation?e.stopPropagation():event&&event.stopPropagation&&event.stopPropagation(),1==t.taskType?this.go("home.clazz_manage"):2==t.taskType?this.go("home.me",{inviteFlag:"yes"}):3==t.taskType?t.canDo?this.go("pub_work_type"):this.$ionicPopup.alert({title:"提示",template:"请先把班级加满20人，再来布置作业吧！"}):4==t.taskType?t.canDo?this.go("home.pub_game_list"):this.$ionicPopup.alert({title:"提示",template:"请先把班级加满20人，再来布置游戏吧！"}):5==t.taskType&&this.sendMsgTostu()}},{key:"gotoCreditsRecord",value:function(){this.go("credits_list")}},{key:"gotoCreditsStore",value:function(){this.go("credits_store")}},{key:"sendMsgTostu",value:function(){var t=this;this.diagnoseService.sendMsgTostudent().then(function(e){e&&(t.commonService.alertDialog("提醒已发送到学生端",1e3),t.alertTimer=t.$timeout(function(){t.diagnoseService.shareImage(m.default,t,"提醒学生和家长","各位学生和家长："),t.$timeout.cancel(t.alertTimer)},1e3))})}},{key:"pullRefresh",value:function(){var t=this,e=function(){t.$timeout(function(){return t.getScope().$broadcast("scroll.refreshComplete")},10)};this.loading&&(this.loading=!1,this.creditsStoreService.getAllTaskList().then(function(n){n&&200==n.code?(t.dealTaskData(n.result),e(),t.loading=!0):t.loading=!0}))}}]),t}(),u=o(d.prototype,"userName",[a],{enumerable:!0,initializer:null}),g=o(d.prototype,"currentCredits",[c],{enumerable:!0,initializer:null}),l=d))||l);e.default=v},4547:function(t,e,n){t.exports=n.p+"images/share_img_to_p.png"},4548:function(t,e,n){var i=n(4549);"string"==typeof i&&(i=[[t.id,i,""]]);n(147)(i,{});i.locals&&(t.exports=i.locals)},4549:function(t,e,n){e=t.exports=n(146)(),e.push([t.id,".credits-store-task .title {\n  left: 0 !important;\n  right: 0 !important;\n}\n.credits-store-task .header-bar-right {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 5px;\n  margin: auto;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-store-task .header-bar-right img {\n  width: 20px;\n  margin: 0 5px;\n}\n.credits-store-task .top-butn {\n  width: 100%;\n  background-color: #e8e8ee;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-store-task .top-butn .top-butn-item {\n  width: 48%;\n  height: 50px;\n  margin: 5px;\n  background-color: #ffffff;\n  color: #726c8c;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-store-task .top-butn .top-butn-item img {\n  width: 30px;\n  margin: 0 5px;\n}\n.credits-store-task .task-list {\n  background-color: #e8e8ee;\n  padding: 10px 5px;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: flex-start;\n  -webkit-justify-content: flex-start;\n  width: 100%;\n}\n.credits-store-task .task-list .task-item-content {\n  width: 100%;\n  background: #fff;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: flex-start;\n  -webkit-justify-content: flex-start;\n  border-radius: 4px;\n  margin-bottom: 10px;\n}\n.credits-store-task .task-list .task-item-content .item-content {\n  width: 100%;\n  padding: 20px 0;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: flex-start;\n  -webkit-justify-content: flex-start;\n  border-bottom: 1px solid #efefef;\n}\n.credits-store-task .task-list .task-item-content .item-content .content-left {\n  width: 42px;\n  margin: 0 12px 0 7px;\n}\n.credits-store-task .task-list .task-item-content .item-content .content-middle {\n  flex: 1;\n  -webkit-flex: 1;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: flex-start;\n  -webkit-align-items: flex-start;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-store-task .task-list .task-item-content .item-content .content-middle p {\n  margin-bottom: 0;\n  color: #726c8c;\n  white-space: pre-wrap;\n}\n.credits-store-task .task-list .task-item-content .item-content .content-middle p:first-child {\n  font-size: 16px;\n  font-weight: bold;\n  line-height: 26px;\n  margin-bottom: 2px;\n  overflow: visible;\n  position: relative;\n}\n.credits-store-task .task-list .task-item-content .item-content .content-middle p:first-child img {\n  height: 20px;\n  margin-left: 2px;\n  vertical-align: top;\n  margin-top: 2px;\n}\n.credits-store-task .task-list .task-item-content .item-content .content-middle p:first-child .icon-repeat {\n  height: 46px;\n  position: absolute;\n  top: 0px;\n  right: -95px;\n}\n.credits-store-task .task-list .task-item-content .item-content .content-middle p:first-child span {\n  color: #dc5959;\n}\n.credits-store-task .task-list .task-item-content .item-content .content-middle p:first-child b {\n  color: #dc5959;\n}\n.credits-store-task .task-list .task-item-content .item-content .content-middle p:last-child {\n  font-size: 14px;\n}\n.credits-store-task .task-list .task-item-content .item-content .content-right {\n  margin-right: 15px;\n  margin-left: 12px;\n}\n.credits-store-task .task-list .task-item-content .item-footer {\n  width: 100%;\n  height: 36px;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: space-between;\n  -webkit-justify-content: space-between;\n}\n.credits-store-task .task-list .task-item-content .item-footer .item-time {\n  margin-left: 20px;\n  color: #726c8c;\n  font-size: 12px;\n}\n.credits-store-task .task-list .task-item-content .item-footer .item-btn {\n  margin-right: 20px;\n  color: #5aa8f5;\n  font-size: 14px;\n  font-weight: bold;\n}\n.credits-store-task .overflow-ellipsis {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.credits-store-task .myFooter {\n  background-color: #fff !important;\n  border-top: 1px solid #dfdfdf !important;\n  color: #726c8c !important;\n  height: 50px;\n}\n.credits-store-task .myFooter .item-shop {\n  background-color: transparent !important;\n  flex: 1;\n  -webkit-flex: 1;\n  padding-right: 10px;\n  text-align: center;\n}\n.credits-store-task .myFooter .item-shop img {\n  height: 25px;\n  vertical-align: middle;\n  margin-top: -1px;\n  margin-right: 10px;\n}\n.credits-store-task .myFooter .item-shop span {\n  color: #726c8c !important;\n  font-size: 16px;\n  font-weight: normal;\n}\n",""])},4550:function(t,e){t.exports='<ion-view title="我的任务" hide-nav-bar="true" class="credits-store-task">\r\n    <ion-header-bar class="bar-balanced bar-new" align-title="center">\r\n        <button class="button buttons button-clear item-back" ng-click="ctrl.back()">\r\n            <i class="icon ion-ios-arrow-back"></i>\r\n            <span>返回</span>\r\n        </button>\r\n        <h1 class="title">我的任务</h1>\r\n        <button class="button buttons item-score" ng-click="ctrl.gotoCreditsList()">\r\n            <img ng-src="{{$root.loadCreditsStoreImg(\'credits_list/icon-score.png\')}}">\r\n            <span>智慧币{{ctrl.currentCredits}}</span>\r\n        </button>\r\n    </ion-header-bar>\r\n    <ion-content class="bg-new">\r\n        <ion-refresher pulling-text="下拉刷新..." on-refresh="ctrl.pullRefresh()" spinner="ios"></ion-refresher>\r\n        \x3c!--<div class="top-butn">\r\n            <div class="top-butn-item" ng-click="ctrl.gotoCreditsRecord()">\r\n                <img ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg02.png\')}}">\r\n                <p style="margin: 0">智慧币</p>\r\n                <p style="margin: 0">{{ctrl.currentCredits}}</p>\r\n            </div>\r\n            <div class="top-butn-item" ng-click="ctrl.gotoCreditsStore()">\r\n                <p style="margin: 0">智慧勾商城</p>\r\n                <img ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg03.png\')}}">\r\n            </div>\r\n        </div>--\x3e\r\n        <div class="task-list">\r\n            \x3c!--<div ng-repeat="item in ctrl.taskList" class="task-item-content {{\'task-item-0\'+($index+1)}}"\r\n                 ng-click="ctrl.gotoTaskProgress(item)">\r\n                <span class="task-name">{{item.taskName}}</span>\r\n                <p style="width: 80%">{{item.subDesc}}</p>\r\n                <p style="width: 80%">{{item.taskDetail}}</p>\r\n                <div class="task-list-content">\r\n                    <div class="task-desc">\r\n                        <p style="margin: 0px">{{item.deadline}}</p>\r\n                    </div>\r\n                    <div class="task-detail-entry" ng-click="ctrl.gotoDoTask(item,$event)">\r\n                        <img ng-src="{{$root.loadCreditsStoreImg(item.imgUrl)}}">\r\n                        <div class="butn {{\'butn_0\'+($index+1)}}">{{item.butnStr}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>--\x3e\r\n            <div class="task-item-content" ng-repeat="item in ctrl.taskList">\r\n                <div class="item-content"  ng-click="ctrl.gotoTaskProgress(item)">\r\n                    <img ng-src="{{$root.loadCreditsStoreImg(item.imgUrl)}}" alt="" class="content-left">\r\n                    <div class="content-middle">\r\n                        <p class="content-title" ng-bind-html="item.taskName"></p>\r\n                        <p class="content-des">{{item.subDesc}}{{item.taskDetail}}</p>\r\n                    </div>\r\n                    <i class="icon ion-ios-arrow-forward content-right"></i>\r\n                </div>\r\n                <div class="item-footer">\r\n                    <div class="item-time"><i class="ion-android-time" style="margin-right: 5px"></i>任务截止时间 {{item.deadline}}</div>\r\n                    <div class="item-btn" ng-click="ctrl.gotoDoTask(item,$event)">{{item.butnStr}}</div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </ion-content>\r\n    <ion-footer-bar class="bar-assertive myFooter"  align-title="center">\r\n        <div class="item-shop" ng-click="ctrl.goCreditsStore()">\r\n            <img ng-src="{{$root.loadCreditsStoreImg(\'credits_list/icon-shop.png\')}}">\r\n            <span>前往智慧勾商城</span>\r\n        </div>\r\n    </ion-footer-bar>\r\n</ion-view>'},4551:function(t,e,n){t.exports=n.p+"images/creditsStoreImg02.png"},4552:function(t,e,n){t.exports=n.p+"images/icon-repeat.png"},4553:function(t,e,n){"use strict";function i(t,e,n,i){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,n,i,r){var o={};return Object.keys(i).forEach(function(t){
o[t]=i[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(t,e,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0});var s,a,c,l,d,u,g,f=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),p=n(4547),h=function(t){return t&&t.__esModule?t:{default:t}}(p),m=n(4533),b=(s=(0,m.View)("task_progress",{url:"task_progress/:taskType/:fromUrl",styles:n(4554),template:n(4556),inject:["$scope","$state","$rootScope","$stateParams","$ngRedux","$ionicHistory","$ionicLoading","$ionicPopup","$timeout","commonService","creditsStoreService","diagnoseService","$ionicScrollDelegate"]}),a=(0,m.select)(function(t){return t.profile_user_auth.user.name}),c=(0,m.select)(function(t){return t.select_teacher_task}),s((d=function(){function t(){r(this,t),this.progressType=!1,this.rewardInfo={},this.stuDoneTaskList=[],this.showArrow=!1,this.freshType=1,i(this,"userName",u,this),i(this,"taskInfo",g,this)}return f(t,[{key:"initData",value:function(){this.taskInfo||(this.taskInfo={deadline:"2017-12-31"}),this.getStateService().params.fromUrl&&(this.taskInfo.taskType=2),this.taskType=this.taskInfo.taskType,this.markUrl=n(4551),1==this.taskType?(this.progressType=1,this.taskInfo.doTask="通知学生加入",this.taskInfo.taskDes="创建班级",this.taskInfo.rules=["1.班级在${%d}之后创建，邀请${%d}名或以上新注册的学生加入班级。","2.老师的所有班级中有1个班级满${%d}名新注册学生即视为完成任务，可获得${%d}智慧币。此任务1个账号每学年只可领取一次奖励。","3.完成任务后，点击领取奖励，系统会自动将智慧币发到您的账号，使用高峰期可能有延迟，请您耐心等待。","4.通过不正当手段获得智慧币的账号，智算365有权撤销智慧币。","5.如对本规则有其他疑问，请联系微信公众号：智算365。"]):2==this.taskType?(this.progressType=2,this.taskInfo.doTask="邀请新老师",this.taskInfo.taskDes="邀请新老师",this.taskInfo.rules=["1.被邀请老师为首次注册智算365的老师。","2.分享邀请链接给新老师，ta在邀请链接中填入的手机号和下载app后注册的手机号应该一致。","3.新老师成功注册，且有1个班级满${%d}名新学生，ta将获得${%d}智慧币，您将同时获得${%d}智慧币+抽iPhone X大奖机会。","4.下拉刷新可获取最新的邀请状态，可能会有延迟，请耐心等待。","5.通过不正当手段获得智慧币的账号，智算365有权撤销智慧币。","6.如对本规则有其他疑问，请联系微信公众号：智算365。"]):3==this.taskType?(this.progressType=1,this.taskInfo.doTask="布置作业",this.taskInfo.taskDes="周作业布置",this.taskInfo.rules=["1.您在本周日之前，给人数≥${%d}的班级布置${%d}套或以上作业。","2.在本周日之前，有${%d}套或以上作业的提交率≥${%d}，视为本周作业任务完成，即可领取${%d}智慧币。","3.本任务1个账号每周只能领取1次奖励，下一周将作为新任务重新记录。","4.完成任务后，点击领取奖励，系统会自动将智慧币发到您的账号，使用高峰期可能有延迟，请您耐心等待。","5.通过不正当手段获得智慧币的账号，智算365有权撤销智慧币。","6.如对本规则有其他疑问，请联系微信公众号：智算365。"]):4==this.taskType?(this.progressType=1,this.taskInfo.doTask="布置游戏",this.taskInfo.taskDes="周游戏布置",this.taskInfo.rules=["1.您在本周日之前，给人数≥20的班级布置3个或以上游戏。","2.在本周日之前，有3个或以上游戏的提交率≥80%，视为本周游戏任务完成，即可领取100智慧币。","3.本任务1个账号每周只能领取1次奖励，下一周将作为新任务重新记录。","4.完成任务后，点击领取奖励，系统会自动将智慧币发到您的账号，使用高峰期可能有延迟，请您耐心等待。","5.通过不正当手段获得智慧币的账号，智算365有权撤销智慧币。","6.如对本规则有其他疑问，请联系微信公众号：智算365。"]):5==this.taskType&&(this.progressType=3,this.taskInfo.doTask="提醒学生",this.taskInfo.taskDes="教学时效奖",this.taskInfo.rules=["1.学生在单元考点个数中，掌握率≥80%，本学期内（${%d}开始）掌握3个单元，视为该生完成了学习任务。","2.每5个学生完成学习任务，您可领取一次教学实效奖，可重复领！","3.老师可通过发布作业、提醒学生自愿使用“诊断提分”功能等方式让学生掌握考点。","4.任务进度表格需下拉刷新才能更新，可能会有延迟，请耐心等待。","5.通过不正当手段获得智慧币的账号，智算365有权撤销智慧币。","6.如对本规则有其他疑问，请联系微信公众号：智算365。"]),this.stuDoneTaskList.length=0}},{key:"onAfterEnterView",value:function(){this.initData(),this.getTaskDetail()}},{key:"doRefresh",value:function(){2!=this.freshType&&(this.freshType=2,this.initData(),this.getTaskDetail(),this.getScope().$broadcast("scroll.refreshComplete"))}},{key:"onBeforeEnterView",value:function(){}},{key:"getTaskDetail",value:function(){1==this.taskType?this.getCreateClassTaskDetail():2==this.taskType?this.getInviteTeacherTaskDetail():3==this.taskType?this.getPublishWorkTaskDetail():4==this.taskType?this.getPublishGameTaskDetail():5==this.taskType&&this.getTeacherTeachTaskDetail()}},{key:"setRuleData",value:function(t,e){var n=t.match(/\${\%d}/g);return angular.forEach(n,function(n,i){e[i]&&(t=t.replace(/\${\%d}/,e[i]))}),t}},{key:"getCreateClassTaskDetail",value:function(){var t=this;this.creditsStoreService.getCreateClassTaskProgress().then(function(e){t.freshType=1,e&&200==e.code&&(t.taskInfo.classInfo=e.result.classInfo,t.taskInfo.awardId=e.result.awardId,t.taskInfo.canAward=e.result.canAward,t.taskInfo.credits=e.result.awardCredits,t.taskInfo.studentCount=e.result.studentCount,t.taskInfo.stepOneDesc=["邀请"+t.taskInfo.studentCount+"名学生"],angular.forEach(t.taskInfo.classInfo,function(e,n){t.taskInfo.stepOneDesc.push(e.className+"，班级号："+e.classId+"，已加入"+e.count+"名新注册学生")}),t.taskInfo.stepTwoDesc="学生人数满"+t.taskInfo.studentCount+"人，领取"+t.taskInfo.credits+'<img class="mark-img" src="'+t.markUrl+'">',t.taskInfo.rules[0]=t.setRuleData(t.taskInfo.rules[0],[e.result.enableTime.split(" ")[0],t.taskInfo.studentCount]),t.taskInfo.rules[1]=t.setRuleData(t.taskInfo.rules[1],[t.taskInfo.studentCount,t.taskInfo.credits]),t.taskInfo.title="有1个班级满"+t.taskInfo.studentCount+"名新注册学生<br/>领取"+t.taskInfo.credits+'<img src="'+t.markUrl+'">')})}},{key:"getInviteTeacherTaskDetail",value:function(){var t=this;this.showArrow=!1,this.taskInfo.title='邀请新老师，ta的班级满20名新学生<br/>领取1000<img src="'+this.markUrl+'">+<span class="red-text">抽iPhone X</span>',this.creditsStoreService.getInviteTeacherTaskProgress().then(function(e){if(t.freshType=1,e&&200==e.code){t.taskInfo.credits=e.result.myCredits,t.taskInfo.invitList=e.result.details,t.taskInfo.studentCount=e.result.studentCount,t.taskInfo.myCredits=e.result.myCredits,t.taskInfo.canAward=!1,t.taskInfo.recommendedCredits=e.result.recommendedCredits;var n=[t.taskInfo.studentCount,t.taskInfo.recommendedCredits,t.taskInfo.myCredits];t.taskInfo.rules[2]=t.setRuleData(t.taskInfo.rules[2],n),t.$timeout(function(){jQuery(".progress-table-container").height()>300&&(t.showArrow=!0)},300)}})}},{key:"getPublishWorkTaskDetail",value:function(){var t=this;this.taskInfo.title='每周布置3套作业且提交率≥80%<br/>领100<img src="'+this.markUrl+'">',this.creditsStoreService.getPublishWorkTaskProgress().then(function(e){if(t.freshType=1,e&&200==e.code){t.taskInfo.credits=e.result.credits,t.taskInfo.assignCount=e.result.assignCount,t.taskInfo.finishCount=e.result.finishCount,t.taskInfo.targetCount=e.result.targetCount,t.taskInfo.awardId=e.result.awardId,t.taskInfo.canAward=e.result.canAward,t.taskInfo.stepOneDesc=["给人数≥20的班级布置作业："+t.taskInfo.assignCount+"套"],t.taskInfo.stepMarkDesc="作业提交率≥80%："+t.taskInfo.finishCount+"套",t.taskInfo.stepTwoDesc='领100<img  class="mark-img" src="'+t.markUrl+'">';var n=[20,t.taskInfo.targetCount],i=[t.taskInfo.targetCount,"80%",100];t.taskInfo.rules[0]=t.setRuleData(t.taskInfo.rules[0],n),t.taskInfo.rules[1]=t.setRuleData(t.taskInfo.rules[1],i)}})}},{key:"getPublishGameTaskDetail",value:function(){var t=this;this.creditsStoreService.getPublishGameTaskProgress().then(function(e){t.freshType=1,e&&200==e.code&&(t.taskInfo.credits=e.result.credits,t.taskInfo.assignCount=e.result.assignCount,t.taskInfo.finishCount=e.result.finishCount,t.taskInfo.targetCount=e.result.targetCount,t.taskInfo.awardId=e.result.awardId,t.taskInfo.canAward=e.result.canAward,t.taskInfo.stepOneDesc=["给人数≥20的班级布置游戏："+t.taskInfo.assignCount+"个"],t.taskInfo.stepMarkDesc="游戏提交率≥80%："+t.taskInfo.finishCount+"个",t.taskInfo.stepTwoDesc='领100<img  class="mark-img" src="'+t.markUrl+'">',t.taskInfo.title="每周布置"+t.taskInfo.targetCount+'个游戏且提交率≥80%<br />领100<img src="'+t.markUrl+'">')})}},{key:"getTeacherTeachTaskDetail",value:function(){var t=this;this.showArrow=!1,this.stuDoneTaskList.length=0,this.taskInfo.title='教学实效奖：每5个学生完成考点任务<br />领<span class="red-text">10000</span><img src="'+this.markUrl+'">（¥100），可重复领！',this.creditsStoreService.getTeacherTeachTaskProgress().then(function(e){if(t.freshType=1,e&&200==e.code){var n=e.result.unAward||[],i=e.result.award||[],r=e.result.unFinish||[];t.taskInfo.canAward=!1,n.map(function(t){return t.type="unAward",t}),i.map(function(t){return t.type="award",t}),r.map(function(t){return t.type="unFinish",t}),t.stuDoneTaskList=t.stuDoneTaskList.concat(n).concat(i).concat(r);var o=[e.result.enableTime.split(" ")[0]];t.taskInfo.rules[0]=t.setRuleData(t.taskInfo.rules[0],o),t.$timeout(function(){jQuery(".progress-table-container").height()>300&&(t.showArrow=!0)},300)}})}},{key:"back",value:function(){1==this.getRootScope().getTeacherRewardFlag?this.getRootScope().getTeacherRewardFlag=!1:null!==this.$ionicHistory.backView()?this.$ionicHistory.goBack():"home.me"===this.$stateParams.fromUrl?this.go("home.me"):this.go("home.work_list")}},{key:"getReward",value:function(t){this.rewardInfo.rewardList=["恭喜您完成了"+this.taskInfo.taskDes+"的任务！"],this.rewardInfo.gotReward=this.taskInfo.credits,this.rewardInfo.awardId=t||this.taskInfo.awardId,this.getRootScope().getTeacherRewardFlag=!0}},{key:"gotoDiagnose",value:function(){this.go("home.diagnose")}},{key:"gotoDoTask",value:function(){1==this.taskInfo.taskType?this.go("home.clazz_manage"):2==this.taskInfo.taskType?this.go("home.me",{inviteFlag:"yes"}):3==this.taskInfo.taskType?this.go("pub_work_type"):4==this.taskInfo.taskType?this.go("home.pub_game_list"):5==this.taskInfo.taskType&&this.sendMsgTostu()}},{key:"sendMsgTostu",value:function(){var t=this;this.diagnoseService.sendMsgTostudent().then(function(e){e&&(t.commonService.alertDialog("提醒已发送到学生端",1e3),t.alertTimer=t.$timeout(function(){t.diagnoseService.shareImage(h.default,t,"提醒学生和家长","各位学生和家长："),t.$timeout.cancel(t.alertTimer)},1e3))})}}]),t}(),u=o(d.prototype,"userName",[a],{enumerable:!0,initializer:null}),g=o(d.prototype,"taskInfo",[c],{enumerable:!0,initializer:null}),l=d))||l);e.default=b},4554:function(t,e,n){var i=n(4555);"string"==typeof i&&(i=[[t.id,i,""]]);n(147)(i,{});i.locals&&(t.exports=i.locals)},4555:function(t,e,n){e=t.exports=n(146)(),e.push([t.id,".credits-store-task-progress .task-progress-content {\n  padding: 0 12px;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-store-task-progress .task-progress-content .task-progress-box {\n  width: 100%;\n  position: relative;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-store-task-progress .task-progress-content .task-text {\n  line-height: 30px;\n  text-align: center;\n  font-size: 16px;\n  font-weight: bold;\n  color: #7b7593;\n  margin-top: 10px;\n  word-break: break-all;\n}\n.credits-store-task-progress .task-progress-content .task-text .red-text {\n  color: #dc5959;\n}\n.credits-store-task-progress .task-progress-content .task-text img {\n  height: 20px;\n  vertical-align: top;\n  margin-top: 4px;\n  margin-left: 2px;\n}\n.credits-store-task-progress .task-progress-content .task-title {\n  color: #7b7593;\n  font-size: 14px;\n  width: 100%;\n  text-align: left;\n  margin-bottom: 5px;\n}\n.credits-store-task-progress .task-progress-content .no-data {\n  display: block;\n  margin-top: 10px;\n  color: #999;\n  text-align: center;\n}\n.credits-store-task-progress .task-progress-content .task-progress {\n  width: 100%;\n  color: #7b7593;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: flex-start;\n  -webkit-justify-content: flex-start;\n  padding: 20px 10px 20px 30px;\n  background: #f2f2f2;\n  border-radius: 4px;\n}\n.credits-store-task-progress .task-progress-content .task-progress .step-one {\n  position: relative;\n  border-left: solid 2px #c3c4c3;\n  width: 100%;\n  padding-bottom: 30px;\n  min-height: 60px;\n}\n.credits-store-task-progress .task-progress-content .task-progress .step-one .progress-desc p {\n  margin-bottom: 5px;\n  font-size: 12px;\n}\n.credits-store-task-progress .task-progress-content .task-progress .step-one .progress-desc.desc-type-1 p:first-child {\n  font-size: 16px;\n  font-weight: bold;\n  margin-bottom: 3px;\n}\n.credits-store-task-progress .task-progress-content .task-progress .step-one .progress-desc.desc-type-3 p,\n.credits-store-task-progress .task-progress-content .task-progress .step-one .progress-desc.desc-type-4 p {\n  font-size: 14px;\n}\n.credits-store-task-progress .task-progress-content .task-progress .step-two {\n  position: relative;\n  width: 100%;\n  padding-left: 1px;\n}\n.credits-store-task-progress .task-progress-content .task-progress .step-two .progress-desc p {\n  line-height: 22px;\n}\n.credits-store-task-progress .task-progress-content .task-progress .step-num {\n  color: #ffffff;\n  font-size: 16px;\n  font-weight: 800;\n  width: 30px;\n  height: 30px;\n  line-height: 30px;\n  border-radius: 17px;\n  background-color: #61b3ef;\n  position: absolute;\n  left: -16px;\n  top: -4px;\n  text-align: center;\n}\n.credits-store-task-progress .task-progress-content .task-progress .step-num.active {\n  background: #c1c1c1;\n}\n.credits-store-task-progress .task-progress-content .task-progress .progress-desc {\n  margin-left: 25px;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: flex-start;\n  -webkit-align-items: flex-start;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-store-task-progress .task-progress-content .task-progress .mark-img {\n  height: 20px;\n  vertical-align: top;\n  margin-left: 2px;\n}\n.credits-store-task-progress .task-progress-content .task-progress-03 {\n  padding: 0 !important;\n  background: #fff;\n  max-height: 300px;\n  min-height: 200px;\n}\n.credits-store-task-progress .task-progress-content .task-progress-03 .scroll {\n  width: 100%;\n}\n.credits-store-task-progress .task-progress-content .text-red {\n  color: #dc5959;\n  font-weight: bold;\n}\n.credits-store-task-progress .task-progress-content .task-progress-01 {\n  position: relative;\n  width: 100%;\n  border-radius: 5px;\n  padding: 8px;\n  background-color: #efefef;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: flex-start;\n  -webkit-justify-content: flex-start;\n}\n.credits-store-task-progress .task-progress-content .task-progress-01 .progress-card-better {\n  width: 100%;\n  max-width: 100%;\n  min-height: 200px;\n  border-top-left-radius: 5px !important;\n  border-top-right-radius: 5px !important;\n  box-shadow: none;\n  padding-bottom: 0px;\n  padding-top: 0px;\n}\n.credits-store-task-progress .task-progress-content .task-progress-01 .progress-table-container {\n  border-radius: 4px;\n  overflow: hidden;\n}\n.credits-store-task-progress .task-progress-content .task-progress-01 .progress-table-header {\n  text-align: center;\n  background-color: #afafaf;\n  color: #293d69;\n  font-size: 15px;\n}\n.credits-store-task-progress .task-progress-content .task-progress-01 .progress-row {\n  display: flex;\n  display: -webkit-flex;\n  width: 100%;\n  text-align: center;\n}\n.credits-store-task-progress .task-progress-content .task-progress-01 .progress-col {\n  /* -webkit-box-flex: 1;\n         -webkit-flex: 1;*/\n  width: 100%;\n  padding: 7px 0 !important;\n  font-size: 14px;\n  color: #fff;\n  line-height: 28px;\n}\n.credits-store-task-progress .task-progress-content .task-progress-01 .progress-col a {\n  color: #999;\n}\n.credits-store-task-progress .task-progress-content .task-progress-01 .get-award-butn {\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n  border-left: solid 5px #ffffff;\n}\n.credits-store-task-progress .task-progress-content .up-scroll-prompt {\n  position: absolute;\n  bottom: 0;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n  width: 100%;\n}\n.credits-store-task-progress .task-progress-content .task-butn {\n  width: 100%;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: space-around;\n  -webkit-justify-content: space-around;\n}\n.credits-store-task-progress .task-progress-content .limit-time {\n  color: #7b7593;\n  margin: 5%;\n  font-size: 12px;\n}\n.credits-store-task-progress .butn {\n  border-radius: 20px;\n  height: 40px;\n  line-height: 40px;\n  text-align: center;\n  margin: 15px;\n  color: #ffffff;\n  font-size: 16px;\n  width: 150px;\n  background-color: #61b3ef;\n}\n.credits-store-task-progress .butn.active {\n  background-color: #f56969;\n}\n.credits-store-task-progress .butn.butn-small {\n  height: 28px;\n  font-size: 12px;\n  width: 120px;\n}\n.credits-store-task-progress .butn-icon {\n  height: 14px;\n  margin-right: 4px;\n}\n.credits-store-task-progress .col-5 {\n  border-top: solid 5px #ffffff;\n}\n.credits-store-task-progress .col-4 {\n  border-bottom: solid 5px #ffffff;\n}\n.credits-store-task-progress .col-butn {\n  overflow: visible;\n  position: relative;\n  background: #ededed;\n  border-left: solid 5px #ffffff;\n}\n.credits-store-task-progress .butn-flex {\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-store-task-progress .task-desc-info {\n  background-color: #e8e8ee;\n  color: #7b7593;\n  padding: 20px 0;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-store-task-progress .task-desc-info .rules-title {\n  font-size: 18px;\n  font-weight: bold;\n  margin-bottom: 20px;\n}\n.credits-store-task-progress .task-desc-info .rules-content {\n  width: 80%;\n}\n.credits-store-task-progress .get_reward_butn {\n  position: absolute;\n  padding: 10px 5px;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n  color: #ffffff;\n  border-radius: 5px;\n}\n.credits-store-task-progress .get_reward_butn img {\n  width: 20px;\n}\n",""])},4556:function(t,e){t.exports='<ion-view hide-nav-bar="true" class="credits-store-task-progress">\r\n    <ion-header-bar class="bar-new">\r\n        <div class="button button-clear item-back" ng-click="ctrl.back()">\r\n            <i class="icon ion-ios-arrow-back"> </i>\r\n            <span class="" ng-if="ctrl.taskType!=2">我的任务</span>\r\n            <span class="" ng-if="ctrl.taskType==2">返回</span>\r\n        </div>\r\n    </ion-header-bar>\r\n    <ion-content on-scroll-complete="ctrl.scrollComplete()"  overflow-scroll="true" >\r\n        <ion-refresher\r\n                pulling-text="下拉刷新..."\r\n                on-refresh="ctrl.doRefresh()">\r\n        </ion-refresher>\r\n        <div class="task-progress-content">\r\n            <p class="task-text"  ng-bind-html="ctrl.taskInfo.title"></p>\r\n            <div class="task-title">\r\n                任务进度:\r\n            </div>\r\n            <div class="task-progress" ng-if="ctrl.progressType == 1">\r\n                <div class="step-one">\r\n                    <div class="step-num">1</div>\r\n                    <div class="progress-desc desc-type-{{ctrl.taskInfo.taskType}}">\r\n                        <p ng-repeat="description in ctrl.taskInfo.stepOneDesc">\r\n                            {{description}}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <div class="step-one step-mark" ng-if="ctrl.taskInfo.stepMarkDesc">\r\n                    <div class="step-num" ng-class="{false:\'active\'}[ctrl.taskInfo.finishCount>0]">2</div>\r\n                    <div class="progress-desc desc-type-3">\r\n                        <p ng-bind="ctrl.taskInfo.stepMarkDesc"></p>\r\n                    </div>\r\n                </div>\r\n                <div class="step-two">\r\n                    <div class="step-num" ng-class="{false:\'active\'}[!!ctrl.taskInfo.awardId]" ng-bind="ctrl.taskInfo.stepMarkDesc?3:2">\r\n                    </div>\r\n                    <div class="progress-desc">\r\n                        <p ng-bind-html="ctrl.taskInfo.stepTwoDesc"></p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div style="position: relative" ng-if="ctrl.progressType == 2" class="task-progress-box">\r\n                <ion-scroll class="task-progress-01 task-progress-03"\r\n                            scrollbar-y="false" delegate-handle="taskProgress01"  has-bouncing="false">\r\n                    <div class="progress-card-better">\r\n                        <div class="progress-table-container">\r\n                            <div class="progress-row progress-table-header">\r\n                                <div class="progress-col" style="width: 30%">新老师手机号</div>\r\n                                <div class="progress-col" style="width: 25%">姓名</div>\r\n                                <div class="progress-col" style="width: 15%;min-width: 64px">班级人数</div>\r\n                                <div class="progress-col" style="width: 30%;min-width: 95px;">领取</div>\r\n                                \x3c!--<div class="progress-col" style="width: 15%;min-width: 50px;">抽奖</div>--\x3e\r\n                            </div>\r\n                            \x3c!-- <div class="progress-row"\r\n                                  ng-repeat="item in ctrl.invitList"\r\n                                  ng-style="{background:$index%2==1?\'#ededed\':\'#FFFFFF\'}">\r\n                                 <div class="progress-col" >--\x3e\r\n                            <div class="progress-row " ng-repeat="item in ctrl.taskInfo.invitList"\r\n                                 ng-style="{background:$index%2==1?\'#ededed\':\'#FFFFFF\'}">\r\n                                <div class="progress-col" style="width: 30%">\r\n                                    <a ng-bind="item.phone" class="outstanding"></a>\r\n                                </div>\r\n                                <div class="progress-col" style="width: 25%">\r\n                                    <a ng-bind="item.name" class="outstanding"></a>\r\n                                </div>\r\n                                <div class="progress-col" style="width: 15%;min-width: 64px">\r\n                                    <a class="outstanding">\r\n                                        <span class="text-red">{{item.joinStudentCount}}</span>/{{item.targetStudentCount}}\r\n                                    </a>\r\n                                </div>\r\n                                <div class="progress-col butn-flex" style="width: 30%;min-width: 95px">\r\n                                    <div class="butn butn-flex butn-small"\r\n                                         style="background-color: #f56969;min-width: 95px;margin:0;max-width: 120px;"\r\n                                         ng-if="!!item.awardId&&item.canAward"\r\n                                         ng-click="ctrl.getReward(item.awardId)">\r\n                                        \x3c!-- <img ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg02.png\')}}"\r\n                                              style="height: 14px;margin-right: 5px">--\x3e\r\n                                        <img class="butn-icon"  ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg02.png\')}}" alt="">\r\n                                            领取智慧币\r\n                                        </p>\r\n                                    </div>\r\n                                    <div class="butn butn-flex butn-small"\r\n                                         style="background-color: #aaa;min-width: 95px;margin:0;max-width: 120px;"\r\n                                         ng-if="!!item.awardId&&!item.canAward">\r\n                                        <img class="butn-icon"  ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg02.png\')}}" alt="">\r\n                                        已领取\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="no-data" ng-if="ctrl.taskInfo.invitList.length==0">\r\n                                您还未邀请任何新老师，快去邀请吧！\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </ion-scroll>\r\n                <div class="up-scroll-prompt" ng-if="ctrl.showArrow">\r\n                    <i class="ion-chevron-up"></i>\r\n                    <span>向上滑动</span>\r\n                </div>\r\n            </div>\r\n            <div  ng-if="ctrl.progressType == 3" style="width: 100%;position: relative;">\r\n                <ion-scroll class="task-progress-01 task-progress-03" has-bouncing="false"  scrollbar-y="false">\r\n                    <div class="progress-card-better">\r\n                        <div class="progress-table-container">\r\n                            <div class="progress-row progress-table-header">\r\n                                <div class="progress-col" style="width: 50%">学生姓名</div>\r\n                                <div class="progress-col" style="width: 50%">完成学习任务情况</div>\r\n                                <div class="progress-col" style="width: 20%;min-width: 95px;max-width: 120px">领取</div>\r\n                            </div>\r\n                            <div class="progress-row" ng-repeat="group in ctrl.stuDoneTaskList" style="border-bottom: 5px solid #fff">\r\n                                <div class="progress-col" style="width: 100%">\r\n                                    <div class="progress-row" ng-repeat="studyTask in group.studentList"\r\n                                         ng-style="{background:$index%2==0?\'#ededed\':\'#FFFFFF\'}">\r\n                                        <div class="progress-col" style="width: 50%;padding:0">\r\n                                            <a ng-bind="studyTask.studentName" class="outstanding"></a>\r\n                                        </div>\r\n                                        <div class="progress-col" style="width: 50%;padding:0">\r\n                                            <a ng-bind="\'完成\'+studyTask.finishCount+\'个学习任务\'" class="outstanding"></a>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="progress-col get-award-butn"\r\n                                     style="width: 20%;min-width: 95px;max-width: 120px">\r\n                                    <div class="get_reward_butn"\r\n                                         ng-click="ctrl.getReward(group.awardId)"\r\n                                         ng-if="group.type==\'unAward\'"\r\n                                         style="background-color:#f56969">\r\n                                        <img ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg02.png\')}}">\r\n                                        <p>领取智慧币</p>\r\n                                    </div>\r\n                                    <div class="get_reward_butn"\r\n                                         ng-if="group.type==\'award\'"\r\n                                         style="background-color:#afafaf">\r\n                                        <img ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg02.png\')}}">\r\n                                        <p>已领取</p>\r\n                                    </div>\r\n                                    \x3c!--<div class="get_reward_butn"\r\n                                         ng-if="group.type==\'unFinish\'"\r\n                                         style="background-color:#afafaf">\r\n                                        <img ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg02.png\')}}">\r\n                                        <p>待完成</p>\r\n                                    </div>--\x3e\r\n                                </div>\r\n                            </div>\r\n                            <div class="no-data" ng-if="ctrl.stuDoneTaskList.length==0">\r\n                                还没有学生完成考点任务，快去提醒吧！\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </ion-scroll>\r\n                <div class="up-scroll-prompt" ng-if="ctrl.showArrow">\r\n                    <i class="ion-chevron-up"></i>\r\n                    <span>向上滑动</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="task-butn">\r\n                <div class="butn" style="background-color: #61b3ef" ng-click="ctrl.gotoDoTask()" ng-if="ctrl.progressType!=1||!ctrl.taskInfo.awardId">\r\n                    {{ctrl.taskInfo.doTask}}\r\n                </div>\r\n                <div class="butn butn-flex" style="background-color: #f56969"\r\n                     ng-if="ctrl.progressType==1 && ctrl.taskInfo.canAward"\r\n                     ng-click="ctrl.getReward()">\r\n                    <img ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg02.png\')}}"\r\n                         style="height: 14px;margin-right: 5px">\r\n                    <p style="margin: 0">\r\n                        领取智慧币\r\n                    </p>\r\n\r\n                </div>\r\n                <div ng-style="{\'display\':ctrl.taskInfo.taskType==5?\'\':\'none\'}">\r\n                    <a ng-click="ctrl.gotoDiagnose()">去查看学生考点掌握情况>></a>\r\n                </div>\r\n            </div>\r\n            <span class="limit-time">\r\n                <i class="ion-android-time" style="margin-right: 5px"></i>\r\n                任务截止时间{{ctrl.taskInfo.deadline}}</span>\r\n        </div>\r\n        <div class="task-desc-info">\r\n            <p class="rules-title">任务规则</p>\r\n            <div class="rules-content" ng-if="ctrl.taskInfo.rules&&ctrl.taskInfo.rules.length>0">\r\n                <p ng-repeat="item in ctrl.taskInfo.rules track by $index">{{item}}</p>\r\n            </div>\r\n        </div>\r\n    </ion-content>\r\n    <get-teacher-reward ng-if="$root.getTeacherRewardFlag" rewards="ctrl.rewardInfo" refresh="ctrl.doRefresh()"></get-teacher-reward>\r\n</ion-view>'},4557:function(t,e,n){"use strict";function i(t,e,n,i){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,n,i,r){var o={};return Object.keys(i).forEach(function(t){o[t]=i[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(t,e,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0})
;var s,a,c,l,d,u,g,f,p,h,m,b,v,k,w,y=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),x=n(4533),_=(s=(0,x.View)("credits_store",{url:"credits_store/:fromUrl",styles:n(4558),template:n(4560),inject:["$scope","$state","$rootScope","$stateParams","$ngRedux","$ionicHistory","$ionicLoading","$ionicPopup","$timeout","commonService","creditsStoreService"]}),a=(0,x.select)(function(t){return t.profile_user_auth.user.name}),c=(0,x.select)(function(t){return t.credits_goods_list.hotSellGoods}),l=(0,x.select)(function(t){return t.credits_goods_list.goods}),d=(0,x.select)(function(t){return t.credits_goods_list.lastKey}),u=(0,x.select)(function(t){return t.credits_goods_list.count}),g=(0,x.select)(function(t){return t.teacher_credits_detail}),s((p=function(){function t(){r(this,t),this.loading=!0,this.sortType="asc",this.canSort=!0,this.sortFlag=!1,this.moreFlag=!0,this.sortSelectOptions={desc:{name:"价格由高到低排序"},asc:{name:"价格由低到高排序"}},i(this,"userName",h,this),i(this,"hotGoodsList",m,this),i(this,"goodsList",b,this),i(this,"lastKey",v,this),i(this,"lquesCount",k,this),i(this,"currentCredits",w,this)}return y(t,[{key:"initData",value:function(){this.goodsList||(this.goodsList=[]),this.hotGoodsList||(this.hotGoodsList=[]),this.initCtrl=!1,this.moreFlag=!0,this.sortType=this.creditsStoreService.sortType||"asc"}},{key:"onAfterEnterView",value:function(){this.initData()}},{key:"onBeforeEnterView",value:function(){}},{key:"onReceiveProps",value:function(){this.ensurePageData()}},{key:"ensurePageData",value:function(){this.initCtrl||(this.creditsStoreService.getAllGoodsList(this.sortType,!0),this.initCtrl=!0)}},{key:"back",value:function(){null!==this.$ionicHistory.backView()?this.$ionicHistory.goBack():"home.me"===this.$stateParams.fromUrl?this.go("home.me"):this.go("home.work_list")}},{key:"gotoExchangeGoods",value:function(t){var e=this;this.creditsStoreService.getCreditsOrder(t.id).then(function(n){n&&200==n.code&&(n.result&&n.result.orderId?(t.isOrder=!0,t.orderInfo=n.result):(t.isOrder=!1,t.orderInfo=void 0)),e.creditsStoreService.selectCreditsGoods(t),e.go("credits_exchange_goods")})}},{key:"gotoCreditsRecord",value:function(){this.go("credits_list")}},{key:"gotoTaskList",value:function(){this.go("task_progress",{fromUrl:"credits_store"})}},{key:"pullRefresh",value:function(){var t=this;if(this.loading){this.loading=!1;var e=function(){t.$timeout(function(){return t.getScope().$broadcast("scroll.refreshComplete")},10)};this.creditsStoreService.getAllGoodsList(this.sortType,!0).then(function(n){e(),t.loading=!0},function(){t.loading=!0,e()})}}},{key:"loadMore",value:function(){var t=this,e=Number(this.lastKey);this.creditsStoreService.getAllGoodsList(this.sortType,!1,this.lastKey,this.lquesCount).then(function(n){t.getScope().$broadcast("scroll.infiniteScrollComplete"),t.moreFlag=Number(t.lastKey)>=Number(e)+Number(t.lquesCount)},function(){t.getScope().$broadcast("scroll.infiniteScrollComplete")})}},{key:"selectSort",value:function(){this.sortFlag=!this.sortFlag,this.sortFlag?$("#selectSort").show():$("#selectSort").hide()}},{key:"hideSelectSort",value:function(){this.sortFlag=!1,$("#selectSort").hide()}},{key:"sortGoodsList",value:function(t){var e=this;if(this.sortType==t)return $("#selectSort").hide(),void(this.sortFlag=!1);this.canSort&&(this.canSort=!1,this.creditsStoreService.getAllGoodsList(t,!0).then(function(n){n&&(e.creditsStoreService.sortType=t,e.sortType=t,"desc"==t&&($(".ion-arrow-down-b").show(),$(".ion-arrow-up-b").hide()),"asc"==t&&($(".ion-arrow-down-b").hide(),$(".ion-arrow-up-b").show()),$("#selectSort").hide(),e.sortFlag=!1),e.canSort=!0}))}}]),t}(),h=o(p.prototype,"userName",[a],{enumerable:!0,initializer:null}),m=o(p.prototype,"hotGoodsList",[c],{enumerable:!0,initializer:null}),b=o(p.prototype,"goodsList",[l],{enumerable:!0,initializer:null}),v=o(p.prototype,"lastKey",[d],{enumerable:!0,initializer:null}),k=o(p.prototype,"lquesCount",[u],{enumerable:!0,initializer:null}),w=o(p.prototype,"currentCredits",[g],{enumerable:!0,initializer:null}),f=p))||f);e.default=_},4558:function(t,e,n){var i=n(4559);"string"==typeof i&&(i=[[t.id,i,""]]);n(147)(i,{});i.locals&&(t.exports=i.locals)},4559:function(t,e,n){e=t.exports=n(146)(),e.push([t.id,".credits-store {\n  background-color: #e8e8ee;\n}\n.credits-store .title {\n  left: 0 !important;\n  right: 0 !important;\n  text-align: center !important;\n}\n.credits-store .header-bar-right {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 15px;\n  margin: auto;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-store .header-bar-right img {\n  width: 20px;\n  margin: 0 5px;\n}\n.credits-store .sub-header-bar {\n  background-color: #e8e8ee !important;\n}\n.credits-store .sub-header-bar .top-butn {\n  width: 100%;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-store .sub-header-bar .top-butn .top-butn-item {\n  width: 100%;\n  padding: 5px 0;\n  background-color: #6fd7f0;\n  color: #ffffff;\n  display: flex;\n  display: -webkit-flex;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-store .sub-header-bar .top-butn .top-butn-item img {\n  width: 25px;\n  margin: 0 5px;\n}\n.credits-store .store-content .store-ad {\n  width: 100%;\n  height: 120px;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  align-items: flex-end;\n  -webkit-align-items: flex-end;\n  justify-content: space-between;\n  -webkit-justify-content: space-between;\n  background-color: #6fd7f0;\n  position: relative;\n  overflow: hidden;\n  margin: 5px 0;\n}\n.credits-store .store-content .store-ad .store-title {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 20%;\n  margin: auto;\n  height: 40px;\n  color: #ffffff;\n}\n.credits-store .store-content .store-ad .ad-img-left {\n  height: 70%;\n  margin-bottom: -20px;\n  margin-left: -10px;\n}\n.credits-store .store-content .store-ad .ad-img-right {\n  height: 60%;\n}\n.credits-store .store-content .all-goods {\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: space-around;\n  -webkit-justify-content: space-around;\n}\n.credits-store .store-content .all-goods .goods-list-title {\n  background-color: #ffffff;\n  height: 30px;\n  line-height: 30px;\n  width: 100%;\n  text-align: left;\n  padding: 0px 5%;\n  position: relative;\n  overflow: visible;\n  color: #6f6c7b;\n}\n.credits-store .store-content .all-goods .goods-list-title .sort-butn {\n  position: absolute;\n  right: 5%;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n}\n.credits-store .store-content .all-goods .goods-list-title .select-sort {\n  position: absolute;\n  z-index: 10;\n  right: 5%;\n  top: 24px;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: flex-start;\n  -webkit-justify-content: flex-start;\n  background-color: #ffffff;\n  padding: 5px 10px;\n  border: solid 1px #c6c7c7;\n  border-radius: 3px;\n}\n.credits-store .store-content .all-goods .goods-list-title .select-sort p {\n  padding: 5px;\n  margin: 0;\n  color: #9d97e3;\n  background-color: aliceblue;\n}\n.credits-store .store-content .all-goods .goods-list {\n  width: 94%;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: space-between;\n  -webkit-justify-content: space-between;\n  flex-wrap: wrap;\n  -webkit-flex-wrap: wrap;\n  margin: 10px 0;\n}\n.credits-store .store-content .all-goods .goods-list .goods-item {\n  width: 48%;\n  min-width: 120px;\n  max-width: 200px;\n  margin: 8px 0;\n  height: 185px;\n  border-radius: 5px;\n  background-color: #ffffff;\n  color: #8a859f;\n  position: relative;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: space-between;\n  -webkit-justify-content: space-between;\n}\n.credits-store .store-content .all-goods .goods-list .goods-item p {\n  margin: 0px;\n  width: 88%;\n  text-align: center;\n}\n.credits-store .store-content .all-goods .goods-list .goods-item .goods-img {\n  width: 100%;\n  height: 80px;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-store .store-content .all-goods .goods-list .goods-item .goods-img img {\n  height: 80px;\n}\n.credits-store .store-content .all-goods .goods-list .goods-item .goods-item-credits {\n  font-size: 16px;\n  font-weight: bold;\n  height: 24px;\n  line-height: 24px;\n  width: 100%;\n  background-color: #97f569;\n  box-shadow: 1px 3px 1px 1px #40be66;\n  border-bottom-right-radius: 5px;\n  border-bottom-left-radius: 5px;\n  color: #427e67;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-store .store-content .all-goods .goods-list .goods-item .goods-item-credits img {\n  width: 18px;\n  margin: 0 5px;\n}\n.credits-store .store-content .all-goods .goods-list .goods-item .no-stock-mark {\n  width: 45px;\n  position: absolute;\n  top: 5px;\n  right: 5px;\n}\n.credits-store .store-content .all-goods .goods-list .goods-item .hot-goods-mark {\n  width: 30px;\n  position: absolute;\n  top: -10px;\n  left: -10px;\n  z-index: 10;\n}\n.credits-store .store-content .all-goods .goods-list-hot {\n  justify-content: flex-start;\n  -webkit-justify-content: flex-start;\n}\n.credits-store .store-content .all-goods .goods-item {\n  margin: 8px 1% !important;\n}\n",""])},4560:function(t,e){t.exports='<ion-view hide-nav-bar="true" class="credits-store">\r\n    <ion-header-bar>\r\n        <div class="button button-clear" ng-click="ctrl.back()">\r\n            <i class="icon ion-ios-arrow-back"> </i><span style="color: #4A6B9D!important;">返回</span>\r\n        </div>\r\n        <h1 class="title" style="font-family: \'Microsoft YaHei\';font-weight: 800;">智慧勾商城</h1>\r\n        <div class="header-bar-right" ng-click="ctrl.gotoTaskList()">\r\n            <img ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg01.png\')}}">\r\n            <span style="color: #4A6B9D!important;">赚智慧币</span>\r\n        </div>\r\n    </ion-header-bar>\r\n    <div class="sub-header-bar bar bar-subheader subheader-flex">\r\n        <div class="top-butn">\r\n            <div class="top-butn-item" ng-click="ctrl.gotoCreditsRecord()">\r\n                <img ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg02.png\')}}">\r\n                <p style="margin: 0 5px">我的智慧币</p>\r\n                <p style="margin: 0;color: #fafd05">{{ctrl.currentCredits}}</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <ion-content class="store-content has-subheader">\r\n        \x3c!--下拉刷新--\x3e\r\n        <ion-refresher pulling-text="下拉刷新..." on-refresh="ctrl.pullRefresh()" spinner="ios"></ion-refresher>\r\n\r\n        <div class="all-goods">\r\n            <div class="goods-list-title">\r\n                <span>· 热购商品 ·</span>\r\n            </div>\r\n            <div class="goods-list goods-list-hot">\r\n                <div class="goods-item goods-item" ng-repeat="item in ctrl.hotGoodsList track by $index"\r\n                     ng-click="ctrl.gotoExchangeGoods(item)">\r\n                    <p ng-bind="item.name" style="font-size: 18px;position: relative;z-index:20"></p>\r\n                    <div class="goods-img" style="position: relative;z-index:20">\r\n                        <img ng-src="{{item.imgUrl}}">\r\n                        \x3c!--<p ng-bind="\'参考价：\'+item.price"></p>--\x3e\r\n                    </div>\r\n                    <div class="goods-item-credits">\r\n                        <img ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg02.png\')}}">\r\n                        <p ng-bind="\'智慧币：\'+ item.credits"></p>\r\n                    </div>\r\n                    <img class="no-stock-mark" ng-style="{\'display\':item.hasStock?\'none\':\'block\'}"\r\n                         ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg12.png\')}}">\r\n                    <img class="hot-goods-mark" ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg14.png\')}}">\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n        <div class="all-goods">\r\n            <div class="goods-list-title">\r\n                <span>· 商品 ·</span>\r\n                <span ng-click="ctrl.selectSort()" class="sort-butn">\r\n                    {{ctrl.sortSelectOptions[ctrl.sortType].name}}\r\n                    <i class="ion-arrow-down-b"></i>\r\n                    <i class="ion-arrow-up-b" style="display: none"></i>\r\n                </span>\r\n                <div class="select-sort" id="selectSort" style="display: none">\r\n                    <p ng-if="ctrl.sortType !=\'desc\'" ng-click="ctrl.sortGoodsList(\'desc\')"\r\n                       ng-bind="ctrl.sortSelectOptions[\'desc\'].name"></p>\r\n                    <p ng-if="ctrl.sortType !=\'asc\'" ng-click="ctrl.sortGoodsList(\'asc\')"\r\n                       ng-bind="ctrl.sortSelectOptions[\'asc\'].name"></p>\r\n                </div>\r\n            </div>\r\n            <div class="goods-list">\r\n                <div class="goods-item" ng-repeat="goods in ctrl.goodsList track by $index"\r\n                     ng-click="ctrl.gotoExchangeGoods(goods)">\r\n                    <p ng-bind="goods.name" style="font-size: 18px;"></p>\r\n                    <div class="goods-img">\r\n                        <img ng-src="{{goods.imgUrl}}">\r\n                        \x3c!--<p ng-bind="\'参考价：\'+goods.price"></p>--\x3e\r\n                    </div>\r\n                    <div class="goods-item-credits">\r\n                        <img ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg02.png\')}}">\r\n                        <p ng-bind="\'智慧币：\'+goods.credits"></p>\r\n                    </div>\r\n                    <img class="no-stock-mark" ng-style="{\'display\':goods.hasStock?\'none\':\'block\'}"\r\n                         ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg12.png\')}}">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <ion-infinite-scroll id="loadMoreGoods" on-infinite="ctrl.loadMore()" ng-if="ctrl.moreFlag"\r\n                             immediate-check="false"\r\n                             spinner="ios" distance="10%"></ion-infinite-scroll>\r\n    </ion-content>\r\n</ion-view>'},4561:function(t,e,n){"use strict";function i(t,e,n,i){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,n,i,r){var o={};return Object.keys(i).forEach(function(t){o[t]=i[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(t,e,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0});var s,a,c,l,d,u,g,f,p,h=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),m=n(4533),b=(s=(0,m.View)("credits_exchange_goods",{url:"credits_exchange_goods",styles:n(4562),template:n(4564),inject:["$scope","$state","$rootScope","$stateParams","$ngRedux","$ionicHistory","$ionicLoading","$ionicPopup","$timeout","commonService","creditsStoreService"]}),a=(0,m.select)(function(t){return t.profile_user_auth.user.name}),c=(0,m.select)(function(t){return t.select_credits_goods}),l=(0,m.select)(function(t){return t.teacher_credits_detail}),s((u=function(){function t(){r(this,t),this.canOrderFlag=!1,this.explainDesc=[],this.goodsInfo={},i(this,"userName",g,this),i(this,"selectGoods",f,this),i(this,"currentCredits",p,this)}return h(t,[{key:"initData",value:function(){this.explain=["1.图片供参考，请以收到的实物为准。","2.本商品一次只可兑换1个。","3.同一姓名、手机号、收货地址视为同一账号。","4.商品一经兑换发出，一律不退还智慧币。","5.请填写准确收货地址，如因地址错误无法送达，智算365不承担任何责任。","6.如有疑问，请关注公众号“智算365” 进行提问。"]}},{key:"onAfterEnterView",value:function(){this.initData(),this.optionButn()}},{key:"onBeforeEnterView",value:function(){}},{key:"back",value:function(){this.$ionicHistory.goBack()}},{key:"gotoSubmitGoods",value:function(){var t=this;2!=this.goodsInfo.type&&(this.selectGoods.isOrder&&!this.selectGoods.orderInfo?this.creditsStoreService.getCreditsOrder(this.selectGoods.id).then(function(e){e&&200==e.code&&(e.result&&e.result.orderId?(t.selectGoods.isOrder=!0,t.selectGoods.orderInfo=e.result):(t.selectGoods.isOrder=!1,t.selectGoods.orderInfo=void 0)),t.creditsStoreService.selectCreditsGoods(t.selectGoods),t.go("submit_exchange_goods")}):this.go("submit_exchange_goods"))}},{key:"gotoCreditsRecord",value:function(){this.go("credits_list")}},{key:"gotoCreditsTask",value:function(){this.go("task_progress",{fromUrl:"credits_exchange_goods"})}},{key:"optionButn",value:function(){this.goodsInfo.type=void 0,this.goodsInfo.butnStr="",this.selectGoods.isOrder?(this.goodsInfo.type=1,this.goodsInfo.butnStr="详情"):this.selectGoods.hasStock?Number(this.selectGoods.credits)>Number(this.currentCredits)?(this.goodsInfo.type=3,this.goodsInfo.butnStr=""):(this.goodsInfo.type=4,this.goodsInfo.butnStr="兑换"):(this.goodsInfo.type=2,this.goodsInfo.butnStr="已售罄")}},{key:"enoughCredits",value:function(){return!!this.selectGoods&&(this.selectGoods.hasStock&&Number(this.selectGoods.credits)>Number(this.currentCredits))}},{key:"canExchange",value:function(){return!!this.selectGoods&&(!this.selectGoods.isOrder&&Number(this.selectGoods.credits)<=Number(this.currentCredits)&&this.selectGoods.hasStock)}}]),t}(),g=o(u.prototype,"userName",[a],{enumerable:!0,initializer:null}),f=o(u.prototype,"selectGoods",[c],{enumerable:!0,initializer:null}),p=o(u.prototype,"currentCredits",[l],{enumerable:!0,initializer:null}),d=u))||d);e.default=b},4562:function(t,e,n){var i=n(4563);"string"==typeof i&&(i=[[t.id,i,""]]);n(147)(i,{});i.locals&&(t.exports=i.locals)},4563:function(t,e,n){e=t.exports=n(146)(),e.push([t.id,".credits-exchange-goods {\n  background-color: #e8e8ee;\n}\n.credits-exchange-goods .title {\n  left: 0 !important;\n  right: 0 !important;\n  text-align: center !important;\n}\n.credits-exchange-goods .header-bar-right {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 15px;\n  margin: auto;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-exchange-goods .header-bar-right img {\n  width: 20px;\n  margin: 0 5px;\n}\n.credits-exchange-goods .sub-header-bar {\n  background-color: #e8e8ee !important;\n}\n.credits-exchange-goods .sub-header-bar .top-butn {\n  width: 100%;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-exchange-goods .sub-header-bar .top-butn .top-butn-item {\n  width: 100%;\n  padding: 5px 0;\n  background-color: #6fd7f0;\n  color: #ffffff;\n  display: flex;\n  display: -webkit-flex;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-exchange-goods .sub-header-bar .top-butn .top-butn-item img {\n  width: 22px;\n  margin: 0 5px;\n}\n.credits-exchange-goods .exchange-goods-content {\n  /* .top-butn {\n      width: 100%;\n      .display-flex(row, center, center);\n      .top-butn-item {\n        width: 48%;\n        height: 50px;\n        margin: 5px;\n        background-color: #ffffff;\n        .display-flex-center();\n        img {\n          width: 30px;\n          margin: 0 5px;\n        }\n      }\n    }*/\n}\n.credits-exchange-goods .exchange-goods-content .goods-info {\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n  background-color: #ffffff;\n  padding: 8px 0;\n}\n.credits-exchange-goods .exchange-goods-content .goods-info .goods-img-big {\n  width: 80%;\n  display: flex;\n  display: -webkit-flex;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-exchange-goods .exchange-goods-content .goods-info .goods-img-big img {\n  max-height: 180px;\n  display: inherit;\n  max-width: 100%;\n}\n.credits-exchange-goods .exchange-goods-content .goods-info .goods-item {\n  font-size: 20px;\n}\n.credits-exchange-goods .exchange-goods-content .goods-info .goods-item-credits {\n  height: 20px;\n  line-height: 20px;\n  color: #656161;\n  font-size: 16px;\n  font-weight: 800;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.credits-exchange-goods .exchange-goods-content .goods-info .goods-item-credits img {\n  width: 25px;\n  margin: 0 5px;\n}\n.credits-exchange-goods .exchange-goods-content .goods-desc {\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n  color: #656161;\n  padding-bottom: 100px;\n}\n.credits-exchange-goods .exchange-goods-content .goods-desc .goods-base-info {\n  width: 90%;\n  margin: 5px 0;\n}\n.credits-exchange-goods .exchange-goods-content .goods-desc .exchange-explain {\n  width: 90%;\n}\n.credits-exchange-goods .exchange-goods-content .goods-desc p {\n  margin: 0px;\n}\n.credits-exchange-goods .goods-exchange-butn {\n  position: absolute;\n  bottom: 0px;\n  background-color: #ffffff;\n  width: 100%;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n  color: #656161;\n  padding: 10px 0;\n}\n.credits-exchange-goods .goods-exchange-butn .exchange-butn {\n  width: 150px;\n  height: 35px;\n  line-height: 35px;\n  text-align: center;\n  border-radius: 8px;\n  background-color: #97f569;\n  box-shadow: 1px 1px 3px 1px #b0cba3;\n  margin: 10px;\n  color: #3e7867;\n  font-size: 20px;\n  font-weight: 900;\n}\n",""])},4564:function(t,e){t.exports='<ion-view hide-nav-bar="true" class="credits-exchange-goods">\r\n    <ion-header-bar>\r\n        <div class="button button-clear" ng-click="ctrl.back()">\r\n            <i class="icon ion-ios-arrow-back"> </i>\r\n            <span style="color: #4A6B9D!important;">返回</span>\r\n        </div>\r\n        <h1 class="title" style="font-family: \'Microsoft YaHei\';font-weight: 800;">商品详情</h1>\r\n    </ion-header-bar>\r\n    <div class="sub-header-bar bar bar-subheader subheader-flex">\r\n        <div class="top-butn">\r\n            <div class="top-butn-item" ng-click="ctrl.gotoCreditsRecord()">\r\n                <img ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg02.png\')}}">\r\n                <p style="margin: 0 5px">我的智慧币</p>\r\n                <p style="margin: 0;color: #fafd05">{{ctrl.currentCredits}}</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <ion-content class="exchange-goods-content has-subheader">\r\n        <div class="goods-info">\r\n            <div class="goods-img-big">\r\n                <img ng-src="{{ctrl.selectGoods.imgUrl}}">\r\n            </div>\r\n            <p class="goods-item" ng-bind="ctrl.selectGoods.name"></p>\r\n            <div class="goods-item-credits">\r\n                <img ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg02.png\')}}">\r\n                <p style="margin: 0" ng-bind="\'智慧币：\'+ctrl.selectGoods.credits"></p>\r\n            </div>\r\n            \x3c!--<p ng-bind="\'参考价：\'+ctrl.selectGoods.price"></p>--\x3e\r\n\r\n        </div>\r\n        <div class="goods-desc">\r\n            <div class="goods-base-info">\r\n                <p ng-bind="\'商品简介：\'+ctrl.selectGoods.detail"></p>\r\n                <p ng-bind="\'商品名称：\'+ctrl.selectGoods.name"></p>\r\n                <p ng-bind="\'数量：1\'"></p>\r\n                <p ng-bind="\'价格：\'+ctrl.selectGoods.credits+\'智慧币\'"></p>\r\n            </div>\r\n            <div class="exchange-explain">\r\n                <p>说明事项：</p>\r\n                <p ng-repeat="explain in ctrl.explain track by $index" ng-bind="explain"></p>\r\n            </div>\r\n        </div>\r\n    </ion-content>\r\n    <div class="goods-exchange-butn">\r\n        <div class="exchange-butn" ng-if="!!ctrl.goodsInfo.butnStr"\r\n             ng-click="ctrl.gotoSubmitGoods()">{{ctrl.goodsInfo.butnStr}}\r\n        </div>\r\n        <span ng-click="ctrl.gotoCreditsTask()" ng-if="!ctrl.goodsInfo.butnStr">智慧币不足，去赚取更多智慧币></span>\r\n        \x3c!--<div class="exchange-butn" ng-if="ctrl.canExchange()"\r\n             ng-click="ctrl.gotoSubmitGoods()">兑换\r\n        </div>\r\n        <div class="exchange-butn" ng-if="ctrl.selectGoods.isOrder"\r\n             ng-click="ctrl.gotoSubmitGoods()">详情\r\n        </div>\r\n        <div class="exchange-butn" style="background-color: cornsilk;color: darkseagreen;"\r\n             ng-if="!ctrl.selectGoods.isOrder&&!ctrl.selectGoods.hasStock">已售罄\r\n        </div>\r\n        <span ng-click="ctrl.gotoCreditsTask()" ng-if="ctrl.enoughCredits()">智慧币不足，去赚取更多智慧币></span>--\x3e\r\n    </div>\r\n</ion-view>'},4565:function(t,e,n){"use strict";function i(t,e,n,i){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,n,i,r){var o={};return Object.keys(i).forEach(function(t){o[t]=i[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(t,e,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0});var s,a,c,l,d,u,g,f,p,h=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),m=n(4533),b=(s=(0,m.View)("submit_exchange_goods",{url:"submit_exchange_goods",styles:n(4566),template:n(4568),inject:["$scope","$state","$rootScope","$stateParams","$ngRedux","$ionicHistory","$ionicLoading","$ionicPopup","$timeout","commonService","creditsStoreService"]}),a=(0,m.select)(function(t){return t.profile_user_auth.user.name}),c=(0,m.select)(function(t){return t.default_receiver}),l=(0,m.select)(function(t){return t.select_credits_goods}),s((u=function(){function t(){r(this,t),this.onOrOffFlag=!0,this.initOnOrOffFlag=this.onOrOffFlag,this.currentReceiver={},i(this,"userName",g,this),i(this,"defaultReceiver",f,this),i(this,"selectGoods",p,this)}return h(t,[{key:"initData",value:function(){var t=this;this.defaultReceiver||(this.defaultReceiver={}),this.creditsStoreService.getDefaultReceiver().then(function(e){t.onOrOffFlag=!0,t.currentReceiver=Object.assign({},t.defaultReceiver),$("#receiver_address").val(t.currentReceiver.address),t.selectGoods.isOrder&&t.selectGoods.orderInfo&&(t.defaultReceiver.name==t.selectGoods.orderInfo.name&&t.defaultReceiver.phone==t.selectGoods.orderInfo.phone&&t.defaultReceiver.address==t.selectGoods.orderInfo.address||(t.onOrOffFlag=!1,t.currentReceiver=Object.assign({},t.selectGoods.orderInfo)),t.canClickFlag=!1,$("#receiver_address").val(t.currentReceiver.address))})}},{key:"onAfterEnterView",value:function(){this.canClickFlag=!0,this.initData()}},{key:"onBeforeEnterView",value:function(){}},{key:"back",value:function(){this.$ionicHistory.goBack()}},{key:"onOrOffClickEvent",value:function(){var t=this;if(this.canClickFlag){this.canClickFlag=!1;var e="off-on-active";this.onOrOffFlag&&(e="on-off-active"),$(".on-off").addClass(e),this.clickTimer=this.$timeout(function(){t.onOrOffFlag=!t.onOrOffFlag,t.canClickFlag=!0,$(".on-off").removeClass(e),t.onOrOffFlag?($(".on-off").css("transform","translate3d(40px, 0, 0)"),$(".on-off").css("-webkit-transform","translate3d(40px, 0, 0)")):($(".on-off").css("transform","translate3d(0, 0, 0)"),$(".on-off").css("-webkit-transform","translate3d(0, 0, 0)")),t.$timeout.cancel(t.clickTimer)},500)}}},{key:"submitGoodsForOrder",value:function(){if(this.currentReceiver.address=$("#receiver_address").val(),!this.currentReceiver.name)return void this.commonService.alertDialog("收件人姓名不能为空！");if(!this.currentReceiver.phone)return void this.commonService.alertDialog("请填写正确的手机号！");if(!this.currentReceiver.address)return void this.commonService.alertDialog("收件人地址不能为空！");if(!this.selectGoods.isOrder&&this.selectGoods.hasStock){var t=this;this.commonService.showAlert("温馨提示","<p>您的商品已开始兑换流程，我们会在7—10个工作日内进行核对，请保证手机畅通以便我们联系您。</p>").then(function(){t.creditsStoreService.createCreditsOrder(t.selectGoods.id,t.currentReceiver,t.onOrOffFlag).then(function(e){e&&200==e.code&&(t.selectGoods.isOrder=!0,t.creditsStoreService.selectCreditsGoods(t.selectGoods),t.creditsStoreService.getDefaultReceiver())})})}}},{key:"submitFinishOrder",value:function(){var t=this,e=this;this.commonService.showPopup({title:"提示",template:'<p style="text-align: center">是否确认收货?</p>',buttons:[{text:"确定",type:"button-positive",onTap:function(n){e.creditsStoreService.submitFinishOrder(e.selectGoods.orderInfo.orderId).then(function(n){n&&200==n.code&&(e.commonService.alertDialog("订单完成"),t.$ionicHistory.goBack(-2))})}},{text:"取消",type:"button-default",onTap:function(t){}}]})}}]),t}(),g=o(u.prototype,"userName",[a],{enumerable:!0,initializer:null}),f=o(u.prototype,"defaultReceiver",[c],{enumerable:!0,initializer:null}),p=o(u.prototype,"selectGoods",[l],{enumerable:!0,initializer:null}),d=u))||d);e.default=b},4566:function(t,e,n){var i=n(4567);"string"==typeof i&&(i=[[t.id,i,""]]);n(147)(i,{});i.locals&&(t.exports=i.locals)},4567:function(t,e,n){e=t.exports=n(146)(),
e.push([t.id,".submit-exchange-goods {\n  background-color: #e8e8ee;\n}\n.submit-exchange-goods .title {\n  left: 0 !important;\n  right: 0 !important;\n  text-align: center !important;\n}\n.submit-exchange-goods .submit-goods-content .goods-info {\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n  background-color: #ffffff;\n  padding: 8px 0;\n}\n.submit-exchange-goods .submit-goods-content .goods-info .goods-img-big {\n  width: 80%;\n  display: flex;\n  display: -webkit-flex;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.submit-exchange-goods .submit-goods-content .goods-info .goods-img-big img {\n  display: inherit;\n  max-width: 100%;\n  max-height: 185px;\n}\n.submit-exchange-goods .submit-goods-content .goods-info .goods-item {\n  font-size: 20px;\n}\n.submit-exchange-goods .submit-goods-content .goods-info .goods-item-credits {\n  height: 20px;\n  line-height: 20px;\n  color: #656161;\n  font-size: 16px;\n  font-weight: 800;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.submit-exchange-goods .submit-goods-content .goods-info .goods-item-credits img {\n  width: 25px;\n  margin: 0 5px;\n}\n.submit-exchange-goods .submit-goods-content .input-address {\n  margin: 10px 0;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: space-around;\n  -webkit-justify-content: space-around;\n}\n.submit-exchange-goods .submit-goods-content .input-address .input-name {\n  width: 90%;\n  max-width: 350px;\n  margin: 5px;\n  padding: 5px 10px;\n  border-radius: 20px;\n}\n.submit-exchange-goods .submit-goods-content .input-address .input-phone-num {\n  width: 90%;\n  max-width: 350px;\n  margin: 5px;\n  padding: 5px 10px;\n  border-radius: 20px;\n}\n.submit-exchange-goods .submit-goods-content .input-address .input-address-detail {\n  width: 90%;\n  margin: 5px;\n  max-width: 750px;\n  padding: 5px 10px;\n  border-radius: 20px;\n}\n.submit-exchange-goods .submit-goods-content .input-address .on-off-button {\n  width: 68px;\n  min-width: 68px;\n  height: 28px;\n  background-color: #959b9a;\n  border-radius: 40px;\n  padding: 2px 2px;\n  margin-left: 5px;\n}\n.submit-exchange-goods .submit-goods-content .input-address .on-off-button .on-off {\n  width: 24px;\n  height: 24px;\n  border-radius: 40px;\n  background-color: #ffffff;\n}\n.submit-exchange-goods .submit-goods-content .input-address .set-default-butn {\n  width: 90%;\n  margin: 5px;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: flex-end;\n  -webkit-justify-content: flex-end;\n}\n.submit-exchange-goods .submit-goods-content .input-address .set-default-butn .on-off-active {\n  animation: on-to-off 0.5s;\n  -webkit-animation: on-to-off 0.5s;\n}\n.submit-exchange-goods .submit-goods-content .input-address .set-default-butn .off-on-active {\n  animation: off-to-on 0.5s;\n  -webkit-animation: off-to-on 0.5s;\n}\n.submit-exchange-goods .goods-exchange-butn {\n  position: absolute;\n  bottom: 0px;\n  background-color: #ffffff;\n  width: 100%;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n  color: #656161;\n  padding: 10px 0;\n}\n.submit-exchange-goods .goods-exchange-butn .exchange-butn {\n  width: 150px;\n  height: 35px;\n  line-height: 35px;\n  text-align: center;\n  border-radius: 8px;\n  background-color: #97f569;\n  box-shadow: 1px 1px 3px 1px #b0cba3;\n  margin: 10px;\n  color: #3e7867;\n  font-size: 20px;\n  font-weight: 900;\n}\n@keyframes on-to-off {\n  from {\n    transform: translate3d(40px, 0, 0);\n    -webkit-transform: translate3d(40px, 0, 0);\n  }\n  to {\n    transform: translate3d(0, 0, 0);\n    -webkit-transform: translate3d(0, 0, 0);\n  }\n}\n@-webkit-keyframes on-to-off {\n  from {\n    transform: translate3d(40px, 0, 0);\n    -webkit-transform: translate3d(40px, 0, 0);\n  }\n  to {\n    transform: translate3d(0, 0, 0);\n    -webkit-transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes off-to-on {\n  from {\n    transform: translate3d(0, 0, 0);\n    -webkit-transform: translate3d(0, 0, 0);\n  }\n  to {\n    transform: translate3d(40px, 0, 0);\n    -webkit-transform: translate3d(40px, 0, 0);\n  }\n}\n@-webkit-keyframes off-to-on {\n  from {\n    transform: translate3d(0, 0, 0);\n    -webkit-transform: translate3d(0, 0, 0);\n  }\n  to {\n    transform: translate3d(40px, 0, 0);\n    -webkit-transform: translate3d(40px, 0, 0);\n  }\n}\n",""])},4568:function(t,e){t.exports='<ion-view hide-nav-bar="true" class="submit-exchange-goods">\r\n    <ion-header-bar>\r\n        <div class="button button-clear" ng-click="ctrl.back()">\r\n            <i class="icon ion-ios-arrow-back"> </i><span style="color: #4A6B9D!important;">商品</span>\r\n        </div>\r\n        <h1 class="title" style="font-family: \'Microsoft YaHei\';font-weight: 800;">填写地址</h1>\r\n    </ion-header-bar>\r\n    <ion-content class="submit-goods-content">\r\n        <div class="goods-info">\r\n            <div class="goods-img-big">\r\n                <img ng-src="{{ctrl.selectGoods.imgUrl}}">\r\n            </div>\r\n            <p class="goods-item" ng-bind="ctrl.selectGoods.name"></p>\r\n            <div class="goods-item-credits">\r\n                <img ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg02.png\')}}">\r\n                <p style="margin: 0" ng-bind="\'智慧币：\'+ctrl.selectGoods.credits"></p>\r\n            </div>\r\n            \x3c!--<p ng-bind="\'参考价：\'+ctrl.selectGoods.price"></p>--\x3e\r\n        </div>\r\n        <div style="width: 100%;margin-bottom: 100px">\r\n            <ng-form name="receiverInfoForm"\r\n                     class="input-address"\r\n                     novalidate style="width: 100%">\r\n                <input type="text" ng-model="ctrl.currentReceiver.name" placeholder="请填写收货人" class="input-name"\r\n                       ng-readonly="!!ctrl.selectGoods.isOrder">\r\n                <input type="text" ng-model="ctrl.currentReceiver.phone" placeholder="请填写联系电话"\r\n                       class="input-phone-num" pattern="^1[0-9]{10}$"\r\n                       ng-readonly="!!ctrl.selectGoods.isOrder">\r\n                <textarea rows="6" id="receiver_address" placeholder="请填写详细地址，省、市、区、街道、单位或小区，以保证您能正常收到物品"\r\n                          class="input-address-detail"\r\n                          ng-readonly="!!ctrl.selectGoods.isOrder">\r\n            </textarea>\r\n                <div class="set-default-butn">\r\n                    设为默认\r\n                    <div class="on-off-button"\r\n                         ng-style="{\'background-color\':ctrl.onOrOffFlag?\'rgb(12, 206, 89)\':\'#959b9a\'}"\r\n                         ng-click="ctrl.onOrOffClickEvent()">\r\n                        <div class="on-off"\r\n                             ng-style="{\'transform\':ctrl.onOrOffFlag?\'translate3d(40px, 0, 0)\':\'translate3d(0, 0, 0)\',\'-webkit-transform\':ctrl.onOrOffFlag?\'translate3d(40px, 0, 0)\':\'translate3d(0, 0, 0)\'}">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </ng-form>\r\n\r\n        </div>\r\n    </ion-content>\r\n    <div class="goods-exchange-butn">\r\n        <div class="exchange-butn" ng-if="!ctrl.selectGoods.isOrder"\r\n             ng-style="{\'background-color\': ctrl.selectGoods.hasStock?\'#97f569\':\'#92a987\'}"\r\n             ng-click="ctrl.submitGoodsForOrder()">提交\r\n        </div>\r\n        <div class="exchange-butn" ng-if="ctrl.selectGoods.isOrder" ng-click="ctrl.submitFinishOrder()">确认收货</div>\r\n        <span>提交后，有关于商品兑换的问题，可致电：028-86956907</span>\r\n    </div>\r\n</ion-view>'},4569:function(t,e,n){"use strict";function i(t,e,n,i){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o,s,a,c,l,d=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(4533),g=(o=(0,u.View)("credits_list",{url:"credits_list/:fromUrl",styles:n(4570),template:n(4579),inject:["$scope","$state","$ngRedux","creditsInfoService","$stateParams","$ionicHistory","$rootScope"]}),s=(0,u.select)(function(t){return t.teacher_credits_detail}),o((c=function(){function t(){r(this,t),i(this,"score_all",l,this),this.score_list=[],this.pageIndex=1,this.pageSize=10,this.isFinish=!0}return d(t,[{key:"onBeforeLeaveView",value:function(){this.creditsInfoService.cancelRequestList.forEach(function(t){t.resolve(!0)}),this.creditsInfoService.cancelRequestList.length=0}},{key:"onAfterEnterView",value:function(){this.initData()}}]),d(t,[{key:"initData",value:function(){var t=this;this.pageIndex=1,this.isFinish=!0,this.getScoreInfo(),this.getTeaScoreList().then(function(e){t.score_list=e,t.getScope().$broadcast("scroll.refreshComplete")})}},{key:"loadMore",value:function(){var t=this;this.pageIndex++,this.getTeaScoreList().then(function(e){console.log(e),t.score_list=t.score_list.concat(e),t.getScope().$broadcast("scroll.infiniteScrollComplete")})}},{key:"getTeaScoreList",value:function(){var t=this;return this.creditsInfoService.fetchTeaScoreList({startIndex:this.pageIndex,size:this.pageSize}).then(function(e){return e.length<t.pageSize?t.isFinish=!0:t.isFinish=!1,e.map(function(t){return t.subType=t.subType||0,t.detail=t.dateTime.split(" ")[0]+" "+t.detail,t}),e})}},{key:"getScoreInfo",value:function(){return this.creditsInfoService.fetchTeaScoreDetail({})}},{key:"back",value:function(){null!==this.$ionicHistory.backView()?this.$ionicHistory.goBack():this.$stateParams.fromUrl?this.go(this.$stateParams.fromUrl):this.go("home.work_list")}},{key:"goCreditsStore",value:function(){this.go("credits_store")}},{key:"goCreditsTask",value:function(){this.go("credits_store_task")}}]),t}(),l=function(t,e,n,i,r){var o={};return Object.keys(i).forEach(function(t){o[t]=i[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(t,e,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}(c.prototype,"score_all",[s],{enumerable:!0,initializer:null}),a=c))||a);e.default=g},4570:function(t,e,n){var i=n(4571);"string"==typeof i&&(i=[[t.id,i,""]]);n(147)(i,{});i.locals&&(t.exports=i.locals)},4571:function(t,e,n){e=t.exports=n(146)(),e.push([t.id,".tea-score-list .myFooter {\n  background-color: #fff !important;\n  border-top: 1px solid #dfdfdf !important;\n  color: #726c8c !important;\n  height: 50px;\n}\n.tea-score-list .myFooter .item-score,\n.tea-score-list .myFooter .item-shop {\n  background-color: transparent !important;\n  flex: 1;\n  -webkit-flex: 1;\n}\n.tea-score-list .myFooter .item-score img,\n.tea-score-list .myFooter .item-shop img {\n  height: 25px;\n  vertical-align: middle;\n  margin-top: -1px;\n}\n.tea-score-list .myFooter .item-score span,\n.tea-score-list .myFooter .item-shop span {\n  color: #726c8c !important;\n  font-size: 14px;\n  font-weight: normal;\n}\n.tea-score-list .myFooter .item-score {\n  padding-left: 10px;\n}\n.tea-score-list .myFooter .item-score img {\n  margin-right: 10px;\n  margin-left: 10px;\n}\n.tea-score-list .myFooter .item-shop {\n  padding-right: 10px;\n  text-align: right;\n}\n.tea-score-list .myFooter .item-shop img {\n  margin-left: 10px;\n}\n.tea-score-list .tea-score-content {\n  background-color: #e8e8ee;\n}\n.tea-score-list .tea-score-content .scroll {\n  padding-left: 0 ;\n  padding-right: 0;\n}\n.tea-score-list .tea-score-content .content-score {\n  height: 30px;\n  line-height: 30px;\n  font-size: 14px;\n  color: #726c8c;\n  text-align: center;\n}\n.tea-score-list .tea-score-content .content-item {\n  height: 90px;\n  background: #fff;\n  margin-bottom: 12px;\n  padding: 20px 22px;\n  display: flex;\n  display: -webkit-flex;\n}\n.tea-score-list .tea-score-content .content-item.reduce {\n  background: #f9ea68;\n}\n.tea-score-list .tea-score-content .content-item.reduce .text {\n  color: #fd3a1a !important;\n}\n.tea-score-list .tea-score-content .content-item.reduce .img {\n  background-color: #f9ea68;\n}\n.tea-score-list .tea-score-content .content-item .img {\n  height: 50px;\n  width: 50px;\n  background: #87cff5 no-repeat center / cover;\n  background-size: 68%;\n  border-radius: 50%;\n  margin-right: 15px;\n}\n.tea-score-list .tea-score-content .content-item .img.img-0 {\n  background-image: url("+n(4572)+");\n}\n.tea-score-list .tea-score-content .content-item .img.img-1 {\n  background-image: url("+n(4573)+");\n}\n.tea-score-list .tea-score-content .content-item .img.img-2 {\n  background-image: url("+n(4574)+");\n}\n.tea-score-list .tea-score-content .content-item .img.img-3 {\n  background-image: url("+n(4575)+");\n}\n.tea-score-list .tea-score-content .content-item .img.img-4 {\n  background-image: url("+n(4576)+");\n}\n.tea-score-list .tea-score-content .content-item .img.img-5 {\n  background-image: url("+n(4577)+");\n}\n.tea-score-list .tea-score-content .content-item .img.img-6 {\n  background-image: url("+n(4578)+");\n}\n.tea-score-list .tea-score-content .content-item .text {\n  flex: 1;\n  -webkit-flex: 1;\n  font-size: 14px;\n  color: #726c8c;\n  padding-top: 5px;\n}\n.tea-score-list .tea-score-content .content-item .item-right {\n  margin-left: 15px;\n}\n.tea-score-list .tea-score-content .content-item .item-right img {\n  display: block;\n  width: 30px;\n  height: 30px;\n  margin: 0 auto;\n}\n.tea-score-list .tea-score-content .content-item .item-right .num {\n  display: block;\n  font-size: 12px;\n  color: #726c8c;\n  margin-top: 5px;\n  padding-right: 4px;\n}\n",""])},4572:function(t,e,n){t.exports=n.p+"images/icon-activity-0.png"},4573:function(t,e,n){t.exports=n.p+"images/icon-activity-1.png"},4574:function(t,e,n){t.exports=n.p+"images/icon-activity-2.png"},4575:function(t,e,n){t.exports=n.p+"images/icon-activity-3.png"},4576:function(t,e,n){t.exports=n.p+"images/icon-activity-4.png"},4577:function(t,e,n){t.exports=n.p+"images/icon-activity-5.png"},4578:function(t,e,n){t.exports=n.p+"images/icon-activity-6.png"},4579:function(t,e){t.exports='<ion-view class="tea-score-list">\r\n    <ion-header-bar class="bar-balanced bar-new" align-title="center">\r\n        <button class="button buttons button-clear item-back" ng-click="ctrl.back()">\r\n            <i class="icon ion-ios-arrow-back"></i>\r\n            <span>返回</span>\r\n        </button>\r\n        <h1 class="title">智慧币记录</h1>\r\n    </ion-header-bar>\r\n    <ion-content padding="true" class="tea-score-content">\r\n        <ion-refresher\r\n                pulling-text="下拉刷新..."\r\n                on-refresh="ctrl.initData()">\r\n        </ion-refresher>\r\n        <p class="content-score">当前总智慧币: {{ctrl.score_all}}</p>\r\n       \x3c!-- <div class="content-item">\r\n            <div class="img img-2"></div>\r\n            <p class="text">2017.10.30成功邀请1位老师</p>\r\n            <div class="item-right">\r\n                <img ng-src="{{$root.loadCreditsStoreImg(\'credits_list/icon-score.png\')}}">\r\n                <p class="num">+5000</p>\r\n            </div>\r\n        </div>\r\n        <div class="content-item">\r\n            <div class="img img-1"></div>\r\n            <p class="text">2017.10.30创建班级满20人 <br />（三年二班：610030）</p>\r\n            <div class="item-right">\r\n                <img ng-src="{{$root.loadCreditsStoreImg(\'credits_list/icon-score.png\')}}">\r\n                <p class="num">+2000</p>\r\n            </div>\r\n        </div>\r\n        <div class="content-item">\r\n            <div class="img img-3"></div>\r\n            <p class="text">2017.10.30创建班级满20人</p>\r\n            <div class="item-right">\r\n                <img ng-src="{{$root.loadCreditsStoreImg(\'credits_list/icon-score.png\')}}">\r\n                <p class="num">+2000</p>\r\n            </div>\r\n        </div>--\x3e\r\n        <div class="content-item" ng-class="{true: \'reduce\'}[v.type==2]" ng-repeat="v in ctrl.score_list">\r\n            <div class="img img-{{v.subType}}"></div>\r\n            <p class="text">{{v.detail}}</p>\r\n            <div class="item-right">\r\n                <img ng-src="{{$root.loadCreditsStoreImg(\'credits_list/icon-score.png\')}}">\r\n                <span class="num">{{v.type==2?"-":"+"}}{{v.credits}}</span>\r\n            </div>\r\n        </div>\r\n        <ion-infinite-scroll\r\n                ng-if="!ctrl.isFinish"\r\n                on-infinite="ctrl.loadMore()"\r\n                distance="1%">\r\n        </ion-infinite-scroll>\r\n    </ion-content>\r\n   \x3c!-- <ion-footer-bar class="bar-assertive myFooter"  align-title="center">\r\n        <div class="item-score" ng-click="ctrl.goCreditsTask()">\r\n            <img ng-src="{{$root.loadCreditsStoreImg(\'credits_list/icon-score.png\')}}">\r\n            <span>赚取智慧币</span>\r\n        </div>\r\n        <div class="item-shop" ng-click="ctrl.goCreditsStore()">\r\n            <span>智慧勾商城</span>\r\n            <img ng-src="{{$root.loadCreditsStoreImg(\'credits_list/icon-shop.png\')}}">\r\n        </div>\r\n    </ion-footer-bar>--\x3e\r\n</ion-view>'},4580:function(t,e,n){"use strict";n(4581),n(4582)},4581:function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,n,i,r){var o={};return Object.keys(i).forEach(function(t){o[t]=i[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(t,e,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0});var o,s,a,c,l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),d=n(4533),u=n(4537),g=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(u),f=(o=(0,d.Service)("creditsStoreService"),s=(0,d.Inject)("$q","$rootScope","$http","commonService","$ngRedux","$state","$ionicBackdrop","creditsStoreInterface","creditsInfoService"),o(a=s((c=function(){function t(){i(this,t),this.sortType="asc"}return l(t,[{key:"getAllTaskList",value:function(){var t=this;return function(e,n){var i=t.$q.defer();return t.commonService.commonPostSpecial(t.creditsStoreInterface.GET_TEACHER_ALL_TASK).then(function(t){if(200===t.code){var n=t.result;e({type:g.TEACHER_TASK.FETCH_TASK_LIST_SUCCESS,payload:n})}i.resolve(t)},function(t){i.resolve(!1)}),i.promise}}},{key:"selectTask",value:function(t){return function(e,n){e({type:g.TEACHER_TASK.SELECT_TEACHER_TASK,payload:t})}}},{key:"getCreateClassTaskProgress",value:function(){var t=this.$q.defer();return this.commonService.commonPostSpecial(this.creditsStoreInterface.CREATE_CLAZZ_INVITE_STUDENT_TASK_DETAIL).then(function(e){e.code,t.resolve(e)},function(e){t.resolve(!1)}),t.promise}},{key:"getInviteTeacherTaskProgress",value:function(){var t=this.$q.defer();return this.commonService.commonPostSpecial(this.creditsStoreInterface.INVITE_OTHER_TEACHER_TASK_DETAIL).then(function(e){e.code,t.resolve(e)},function(e){t.resolve(!1)}),t.promise}},{key:"getPublishWorkTaskProgress",value:function(){var t=this.$q.defer();return this.commonService.commonPostSpecial(this.creditsStoreInterface.PUBLISH_WORK_TASK_DETAIL).then(function(e){e.code,t.resolve(e)},function(e){t.resolve(!1)}),t.promise}},{key:"getPublishGameTaskProgress",value:function(){var t=this.$q.defer();return this.commonService.commonPostSpecial(this.creditsStoreInterface.PUBLISH_GAME_TASK_DETAIL).then(function(e){e.code,t.resolve(e)},function(e){t.resolve(!1)}),t.promise}},{key:"getTeacherTeachTaskProgress",value:function(){var t=this.$q.defer();return this.commonService.commonPostSpecial(this.creditsStoreInterface.TEACHER_TEACH_DETAIL).then(function(e){e.code,t.resolve(e)},function(e){t.resolve(!1)}),t.promise}},{key:"getAwardList",value:function(){var t=this.$q.defer();return this.commonService.commonPostSpecial(this.creditsStoreInterface.GET_ALL_AWARD_LIST).then(function(e){200===e.code?t.resolve(e):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise}},{key:"getTaskAward",value:function(t){var e=this,n=this.$q.defer(),i={awardIds:t};return this.commonService.commonPostSpecial(this.creditsStoreInterface.TASK_GAIN_AWARD,i).then(function(t){200===t.code?(n.resolve(t),e.creditsInfoService.fetchTeaScoreDetail()):n.resolve(!1)},function(t){n.resolve(!1)}),n.promise}},{key:"getDefaultReceiver",value:function(){var t=this;return function(e,n){var i=t.$q.defer();return e({type:g.GET_DEFAULT_RECEIVER_START}),t.commonService.commonPostSpecial(t.creditsStoreInterface.GET_DEFAULT_RECEIVER_INFO).then(function(t){if(200===t.code){var n=t.result;e({type:g.GET_DEFAULT_RECEIVER_SUCCESS,payload:n}),i.resolve(n)}else e({type:g.GET_DEFAULT_RECEIVER_FAIL}),i.resolve(!1)},function(t){e({type:g.GET_DEFAULT_RECEIVER_FAIL}),i.resolve(!1)}),i.promise}}},{key:"selectCreditsGoods",value:function(t){return function(e,n){e({type:g.CREDITS_GOODS.SELECT_CREDITS_GOODS,payload:t})}}},{key:"getAllGoodsList",value:function(t,e,n,i){var r=this;return function(o,s){var a={};a.sort="desc","asc"==t&&(a.sort="asc"),a.startIndex=e?0:n,a.size=i||16;var c=r.$q.defer();return o({type:g.CREDITS_GOODS.FETCH_CREDITS_GOODS_LIST_START}),r.commonService.commonPostSpecial(r.creditsStoreInterface.GET_GOODS_LIST,a).then(function(t){if(200===t.code){var r=t,s=[];!e&&n&&0!=n||(s=r.hotGoods);var a=r.normalGoods,l=n||0;l+=a.length,o(e?{type:g.CREDITS_GOODS.FETCH_CREDITS_GOODS_LIST_SUCCESS,payload:{hotSellGoods:s,goods:a,lastKey:l,count:i||16}}:{type:g.CREDITS_GOODS.FETCH_CREDITS_GOODS_LIST_MORE,payload:{goods:a,lastKey:l,count:i||16}}),c.resolve(!0)}else o({type:g.CREDITS_GOODS.FETCH_CREDITS_GOODS_LIST_FAIL}),c.resolve(!1)},function(t){o({type:g.CREDITS_GOODS.FETCH_CREDITS_GOODS_LIST_FAIL}),c.resolve(!1)}),c.promise}}},{key:"createCreditsOrder",value:function(t,e,n){var i=this,r={};r.goodsId=t,r.name=e.name,r.phone=e.phone,r.address=e.address,r.setDefault=n;var o=this.$q.defer();return this.commonService.commonPostSpecial(this.creditsStoreInterface.CREDITS_ORDER,r).then(function(t){200===t.code?(o.resolve(t),i.creditsInfoService.fetchTeaScoreDetail()):o.resolve(!1)},function(t){o.resolve(!1)}),o.promise}},{key:"getCreditsOrder",value:function(t){var e=this.$q.defer();return this.commonService.commonPostSpecial(this.creditsStoreInterface.GET_ORDER_DETAIL,{goodsId:t}).then(function(t){200===t.code?e.resolve(t):e.resolve(!1)},function(t){e.resolve(!1)}),e.promise}},{key:"submitFinishOrder",value:function(t){var e=this.$q.defer(),n={};return n.orderId=t,this.commonService.commonPostSpecial(this.creditsStoreInterface.FINISH_ORDER,n).then(function(t){200===t.code?e.resolve(t):e.resolve(!1)},function(t){e.resolve(!1)}),e.promise}}]),t}(),r(c.prototype,"getAllTaskList",[d.actionCreator],Object.getOwnPropertyDescriptor(c.prototype,"getAllTaskList"),c.prototype),r(c.prototype,"selectTask",[d.actionCreator],Object.getOwnPropertyDescriptor(c.prototype,"selectTask"),c.prototype),r(c.prototype,"getDefaultReceiver",[d.actionCreator],Object.getOwnPropertyDescriptor(c.prototype,"getDefaultReceiver"),c.prototype),r(c.prototype,"selectCreditsGoods",[d.actionCreator],Object.getOwnPropertyDescriptor(c.prototype,"selectCreditsGoods"),c.prototype),r(c.prototype,"getAllGoodsList",[d.actionCreator],Object.getOwnPropertyDescriptor(c.prototype,"getAllGoodsList"),c.prototype),a=c))||a)||a);e.default=f},4582:function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r,o,s,a,c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(4533),d=n(4537),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(d),g=(r=(0,l.Service)("ratoryInfoService"),o=(0,l.Inject)("$q","$rootScope","commonService","creditsStoreInterface","$ngRedux"),r(s=o((a=function(){function t(){i(this,t),this.cancelRequestList=[]}return c(t,[{key:"fetchRatoryList",value:function(t){var e=this;return function(n,i){var r=e.$q.defer();n({type:u.RATORY_INFO.FETCH_RATORY_INFO_START});var o=e.commonService.commonPost(e.creditsStoreInterface.GET_RATORY_LIST,t,!0);e.cancelRequestList.push(o.cancelDefer);var s=o.cancelDefer;return o.requestPromise.then(function(t){if(s=null,200==t.code){var e=t.result;n({type:u.RATORY_INFO.FETCH_RATORY_INFO_SUCCESS,payload:e}),r.resolve(e)}else n({type:u.RATORY_INFO.FETCH_RATORY_INFO_FAIL}),r.resolve(!1)},function(){n({type:u.RATORY_INFO.FETCH_RATORY_INFO_FAIL}),s=null,r.reject()}),r.promise}}},{key:"fetchRatoryInfo",value:function(t){var e=this.$q.defer(),n=this.commonService.commonPost(this.creditsStoreInterface.GET_RATORY_INFO,t,!0);this.cancelRequestList.push(n.cancelDefer);var i=n.cancelDefer;return n.requestPromise.then(function(t){i=null,200==t.code?e.resolve(t.result):e.resolve(!1)},function(){i=null,e.reject()}),e.promise}}]),t}(),function(t,e,n,i,r){var o={};return Object.keys(i).forEach(function(t){o[t]=i[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(t,e,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}(a.prototype,"fetchRatoryList",[l.actionCreator],Object.getOwnPropertyDescriptor(a.prototype,"fetchRatoryList"),a.prototype),s=a))||s)||s);e.default=g},4583:function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,o,s=n(4533);(r=(0,s.Constant)("creditsStoreInterface",{GET_TEACHER_ALL_TASK:"/task/teacher/getAll",CREATE_CLAZZ_INVITE_STUDENT_TASK_DETAIL:"/task/teacher/inviteStudent/detail",INVITE_OTHER_TEACHER_TASK_DETAIL:"/task/teacher/recommendTeacher/detail",PUBLISH_WORK_TASK_DETAIL:"/task/teacher/paper/detail",PUBLISH_GAME_TASK_DETAIL:"/task/teacher/game/detail",GET_DEFAULT_RECEIVER_INFO:"/credits/teacher/getDefaultReceiverInfo",GET_ALL_AWARD_LIST:"/task/teacher/awardList",TASK_GAIN_AWARD:"/task/teacher/gainAward",GET_TEACHER_SCORE_LIST:"/credits/teacher/history",GET_TEACHER_SCORE_DETAIL:"/credits/teacher/getCredits",GET_GOODS_LIST:"/credits/teacher/goods",CREDITS_ORDER:"/credits/teacher/creditsOrder",GET_ORDER_DETAIL:"/credits/teacher/getOrderDetail",FINISH_ORDER:"/credits/teacher/finishOrder",TEACHER_TEACH_DETAIL:"/task/teacher/teach/detail",GET_RATORY_LIST:"/task/teacher/lottoInfo",GET_RATORY_INFO:"/task/teacher/lotto"}))(o=function t(){i(this,t)})},4584:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(4585),o=i(r),s=n(4589),a=i(s),c=angular.module("t_credits_store.directives",[]);c.directive("getTeacherReward",o.default),c.directive("rotaryDraw",a.default)},4585:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return{restrict:"E",scope:{rewards:"=",allAwardFlag:"=",refresh:"&"},replace:!1,template:n(4586),controller:["$scope","$rootScope","$state","commonService","$ionicPopup","creditsStoreService","ratoryInfoService",function(t,e,n,i,r,o,s){t.rewardList=[],t.gotReward=0,t.showRotaryDraw=!1,t.rewards&&t.rewards.rewardList&&(t.rewardList=t.rewards.rewardList,t.gotReward=t.rewards.gotReward,t.awardId=t.rewards.awardId),t.allReward=[],t.allRewardIds=[],t.hideGetRewardDialog=function(){var n=t.awardId;t.allAwardFlag&&(n=t.allRewardIds.join(",")),o.getTaskAward(n).then(function(n){200==n.code?(i.alertDialog("领取成功"),t.refresh(),n.lottoTimes>0?t.showRotaryDraw=!0:e.getTeacherRewardFlag=!1):3002==n.code?(i.alertDialog("已经领取过了!"),e.getTeacherRewardFlag=!1):(i.alertDialog("领取失败"),e.getTeacherRewardFlag=!1)})},t.leaveRotaryDraw=function(){t.showRotaryDraw=!1,e.getTeacherRewardFlag=!1},t.getAwardList=function(){o.getAwardList().then(function(n){n&&(t.allReward=n.result,t.gotReward=0,t.rewardList=[],angular.forEach(t.allReward,function(e,n){t.gotReward+=Number(t.allReward[n].credits),t.rewardList.push(t.allReward[n].detail),t.allRewardIds.push(t.allReward[n].id)}),t.allReward&&t.allReward.length>0&&(e.getTeacherRewardFlag=!0))})},t.rewardFirst=t.rewardList[0],t.afterLeave=function(){e.getTeacherRewardFlag=!1}}],link:function(t,e,n,i){t.$on("allAwardFlag",t.getAwardList)}}},n(4587)},4586:function(t,e){t.exports='<div class="get_teacher_reward" ng-if="$root.getTeacherRewardFlag">\r\n    <div class="get-reward-backdrop" ng-if="!showRotaryDraw">\r\n        <div class="get-reward">\r\n            <div class="reward-desc">\r\n                <img class="reward-back-img" ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg08.png\')}}">\r\n                <img class="reward-mark-img" ng-src="{{$root.loadCreditsStoreImg(\'creditsStoreImg02.png\')}}">\r\n            </div>\r\n            <div class="reward-info-list">\r\n                <div class="done-tasks">\r\n                    <p ng-repeat="item in rewardList track by $index">{{item}}</p>\r\n                </div>\r\n                <div class="got-rewards">\r\n                    <p style="text-align: center;">{{\'获得智慧币：\' + gotReward}}</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="sure-butn" ng-click="hideGetRewardDialog()">\r\n                <p style="margin: 0">确定</p>\r\n            </div>\r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n    <rotary-draw\r\n            text="rewardFirst"\r\n            after-leave="leaveRotaryDraw()"\r\n            ng-if="showRotaryDraw"\r\n    ></rotary-draw>\r\n    <i class="icon ion-close-round close-btn" ng-click="afterLeave()"></i>\r\n</div>'},4587:function(t,e,n){var i=n(4588);"string"==typeof i&&(i=[[t.id,i,""]]);n(147)(i,{});i.locals&&(t.exports=i.locals)},4588:function(t,e,n){e=t.exports=n(146)(),
e.push([t.id,"get-teacher-reward {\n  /* width: 100%;\n   height: 100%;*/\n}\nget-teacher-reward .get_teacher_reward {\n  position: absolute;\n  z-index: 9999;\n  width: 100%;\n  height: 100%;\n  background-color: #0D3349;\n  position: relative;\n  display: flex;\n  display: -webkit-flex;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n}\nget-teacher-reward .get_teacher_reward .get-reward {\n  width: 300px;\n  height: 450px;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n  color: #ffffff;\n}\n@media screen and (max-height: 450px) and (orientation: landscape) {\n  get-teacher-reward .get_teacher_reward .get-reward {\n    overflow-y: scroll;\n  }\n}\nget-teacher-reward .get_teacher_reward .get-reward .reward-desc {\n  position: relative;\n  pointer-events: none;\n}\nget-teacher-reward .get_teacher_reward .get-reward .reward-desc .reward-back-img {\n  width: 300px;\n  -webkit-animation: rotate-bg 6s linear infinite;\n}\nget-teacher-reward .get_teacher_reward .get-reward .reward-desc .reward-mark-img {\n  width: 100px;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n}\nget-teacher-reward .get_teacher_reward .get-reward .reward-info-list {\n  position: relative;\n  width: 85%;\n  margin-top: -85px;\n  z-index: 10;\n}\nget-teacher-reward .get_teacher_reward .get-reward .reward-info-list .done-tasks {\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: column;\n  -webkit-flex-direction: column;\n  align-items: center;\n  -webkit-align-items: center;\n  max-height: 120px;\n  overflow-y: scroll;\n}\nget-teacher-reward .get_teacher_reward .get-reward .reward-info-list .got-rewards {\n  font-weight: 800;\n}\nget-teacher-reward .get_teacher_reward .get-reward .sure-butn {\n  width: 85px;\n  height: 30px;\n  line-height: 30px;\n  border-radius: 15px;\n  text-align: center;\n  background-color: #1ba4ed;\n  margin: 10% 0 0 0;\n  pointer-events: auto;\n}\n@keyframes rotate-bg {\n  0% {\n    transform: rotate(0deg);\n  }\n  50% {\n    transform: rotate(180deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n@-moz-keyframes rotate-bg {\n  /*Firefox*/\n  0% {\n    transform: rotate(0deg);\n    -moz-transform: rotate(0deg);\n  }\n  50% {\n    transform: rotate(180deg);\n    -moz-transform: rotate(180deg);\n  }\n  100% {\n    transform: rotate(360deg);\n    -moz-transform: rotate(360deg);\n  }\n}\n@-webkit-keyframes rotate-bg {\n  /*Safari and Chrome*/\n  0% {\n    transform: rotate(0deg);\n    -webkit-transform: rotate(0deg);\n  }\n  50% {\n    transform: rotate(180deg);\n    -webkit-transform: rotate(180deg);\n  }\n  100% {\n    transform: rotate(360deg);\n    -webkit-transform: rotate(360deg);\n  }\n}\nget-teacher-reward .close-btn {\n  font-size: 22px;\n  opacity: 0.5;\n  position: absolute;\n  right: 20px;\n  top: 20px;\n  color: #fff;\n}\n",""])},4589:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return{restrict:"AE",scope:{text:"=",afterLeave:"&"},replace:!1,template:n(4590),controller:["$scope","$rootScope","ratoryInfoService","$ionicLoading","$ngRedux",function(t,e,n,o,s){var a={},c={goods:[],outsideRadius:0,textRadius:0,insideRadius:20,startAngle:0,bRotate:!1};t.isFinish=!0,t.isFirst=!0,!t.text&&(t.text="邀请老师成功"),t.num=0,t.rewardType=1,t.showRewardInfo=!1,t.runDraw=function(){if(t.isFinish){if(t.num<=0)return void o.show({template:"不好意思,抽奖次数已经用完啦~",duration:2e3});if(t.showRewardInfo)return void o.show({template:"请您先确认中奖信息后再次抽奖!",duration:2e3});t.isFirst||a.reDraw(),t.isFinish=!1;var e=(0,i.initRotate)(window.jQuery),s=e("#wheelBox");s.rotate({angle:0,duration:5e3,animateTo:2160,easing:e.easing.easeInOutExpo,callback:function(){t.isFinish=!0,o.show({template:"服务器异常",duration:2e3})}}),n.fetchRatoryInfo({}).then(function(n){var i=0,l={};n?(l=(0,r.getAwardInfo)(n.id,c.goods),i=1800+l.angle):i=1800,t.num--,s.stopRotate(),s.rotate({angle:0,duration:5e3,animateTo:i,easing:e.easing.easeInOutExpo,callback:function(){if(t.isFinish=!0,1800==i)return void o.show({template:"服务器异常",duration:2e3});t.$apply(function(){t.isFirst=!1,t.text=l.good.text,t.showRewardInfo=!0,a.drawOne(l.index,!0),-1!=l.good.text.indexOf("币")?t.rewardType=1:-1!=l.good.text.indexOf("谢谢参与")?t.rewardType=3:t.rewardType=2})}})})}},function(){n.fetchRatoryList({}).then(function(e){t.num=e.lottoCount,e.lottoItemList.map(function(t){return t.text=t.name,t.img=t.imgUrl,delete t.name,delete t.imgUrl,t}),c.goods=e.lottoItemList,a=new r.drawWheelCanvas(c)})}()}],link:function(t,e,n,i){}}},n(4591);var i=n(4595),r=n(4596)},4590:function(t,e){t.exports='<div class="pane rotary-draw">\r\n    <p class="title">您有 <span class="num">{{num}}</span>次抽奖机会</p>\r\n    <div class="content">\r\n        <div class="wheel" id="wheelBox">\r\n            <img class="circle" ng-src="{{$root.loadCreditsStoreImg(\'rotary_draw/icon-circle.png\')}}" alt="">\r\n            <canvas id="wheelCanvas"></canvas>\r\n        </div>\r\n        <span class="pointer" ng-class="{true: \'active\'}[showRewardInfo||num<=0]" ng-click="runDraw()"></span>\r\n    </div>\r\n    <div class="tips" ng-show="isFirst">\r\n        <span class="tip">{{text}}</span>\r\n        <span class="tip">送你抽奖大机会！</span>\r\n        <span class="tip">点击上方开始抽奖吧！</span>\r\n    </div>\r\n    <div class="tips" ng-show="!isFirst&&rewardType==1&&showRewardInfo">\r\n        <span class="tip">恭喜你获得{{text}}！</span>\r\n    </div>\r\n    <div class="tips" ng-show="!isFirst&&rewardType==2&&showRewardInfo">\r\n        <span class="tip">恭喜你获得{{text}}！</span>\r\n        <span class="tip">请您截图发送到微信</span>\r\n        <span class="tip">公众号“智算365”联系我们</span>\r\n    </div>\r\n    <div class="tips" ng-show="!isFirst&&rewardType==3&&showRewardInfo">\r\n        <span class="tip">谢谢参与！</span>\r\n    </div>\r\n    <span class="hide-btn" ng-click="showRewardInfo=false" ng-show="showRewardInfo">确定</span>\r\n    <i class="icon ion-close-round close-btn" ng-click="afterLeave()"></i>\r\n</div>\r\n'},4591:function(t,e,n){var i=n(4592);"string"==typeof i&&(i=[[t.id,i,""]]);n(147)(i,{});i.locals&&(t.exports=i.locals)},4592:function(t,e,n){e=t.exports=n(146)(),e.push([t.id,".rotary-draw {\n  background-color: #f89b3f !important;\n  z-index: 2000 !important;\n  text-align: center;\n  overflow-y: scroll;\n  position: absolute;\n}\n.rotary-draw .title {\n  height: 80px;\n  line-height: 80px;\n  text-align: center;\n  color: #fff;\n  font-size: 16px;\n  font-weight: bold;\n  margin-top: 20px;\n}\n.rotary-draw .title .num {\n  color: #ffff00;\n  display: inline-block;\n  margin: 0 4px;\n}\n.rotary-draw .content {\n  position: relative;\n  overflow: hidden;\n}\n.rotary-draw .content .wheel {\n  width: 310px;\n  height: 310px;\n  position: relative;\n  box-sizing: border-box;\n  margin: 0 auto;\n  text-align: center;\n  background: #fdbf82;\n  border-radius: 50%;\n  z-index: 1;\n  pointer-events: none;\n}\n.rotary-draw .content .circle {\n  display: block;\n  position: absolute;\n  z-index: 1;\n  width: 310px;\n  height: 310px;\n}\n.rotary-draw .content .pointer {\n  position: absolute;\n  left: 50%;\n  margin-left: -38px;\n  top: 50%;\n  margin-top: -65px;\n  display: block;\n  width: 76px;\n  height: 98.5px;\n  text-align: center;\n  line-height: 40px;\n  font-size: 20px;\n  color: #0a0a0a;\n  z-index: 10;\n  pointer-events: auto;\n  background: url("+n(4593)+") center / cover no-repeat;\n}\n.rotary-draw .content .pointer.active {\n  background-image: url("+n(4594)+");\n}\n.rotary-draw .content #wheelCanvas {\n  width: 310px;\n  height: 310px;\n}\n.rotary-draw .tips {\n  font-size: 14px;\n  color: #fff;\n  font-weight: normal;\n  margin-top: 30px;\n  opacity: .9;\n}\n.rotary-draw .tips .tip {\n  display: block;\n  text-align: center;\n  line-height: 22px;\n}\n.rotary-draw .hide-btn {\n  display: block;\n  margin: 30px auto 0;\n  width: 240px;\n  height: 40px;\n  line-height: 40px;\n  text-align: center;\n  background-color: #97f569;\n  color: #407b68;\n  font-size: 16px;\n  border-radius: 6px;\n  font-weight: bold;\n  -webkit-box-shadow: 1px 1px 2px #666;\n  -moz-box-shadow: 1px 1px 2px #666;\n  box-shadow: 1px 1px 2px #666;\n}\n.rotary-draw .close-btn {\n  font-size: 22px;\n  opacity: 0.5;\n  position: absolute;\n  right: 20px;\n  top: 20px;\n}\n",""])},4593:function(t,e,n){t.exports=n.p+"images/icon-point.png"},4594:function(t,e,n){t.exports=n.p+"images/icon-point-active.png"},4595:function(module,exports){"use strict";function initRotate(jQuery){for(var $=jQuery,supportedCSS,styles=document.getElementsByTagName("head")[0].style,toCheck="transformProperty WebkitTransform OTransform msTransform MozTransform".split(" "),a=0;a<toCheck.length;a++)void 0!==styles[toCheck[a]]&&(supportedCSS=toCheck[a]);var IE=eval('"v"=="\v"');jQuery.fn.extend({rotate:function(t){if(0!==this.length&&void 0!==t){"number"==typeof t&&(t={angle:t});for(var e=[],n=0,i=this.length;n<i;n++){var r=this.get(n);if(r.Wilq32&&r.Wilq32.PhotoEffect)r.Wilq32.PhotoEffect._handleRotation(t);else{var o=$.extend(!0,{},t),s=new Wilq32.PhotoEffect(r,o)._rootObj;e.push($(s))}}return e}},getRotateAngle:function(){for(var t=[],e=0,n=this.length;e<n;e++){var i=this.get(e);i.Wilq32&&i.Wilq32.PhotoEffect&&(t[e]=i.Wilq32.PhotoEffect._angle)}return t},stopRotate:function(){for(var t=0,e=this.length;t<e;t++){var n=this.get(t);n.Wilq32&&n.Wilq32.PhotoEffect&&clearTimeout(n.Wilq32.PhotoEffect._timer)}}});var Wilq32=window.Wilq32||{};return Wilq32.PhotoEffect=function(){return supportedCSS?function(t,e){t.Wilq32={PhotoEffect:this},this._img=this._rootObj=this._eventObj=t,this._handleRotation(e)}:function(t,e){if(this._img=t,this._rootObj=document.createElement("span"),this._rootObj.style.display="inline-block",this._rootObj.Wilq32={PhotoEffect:this},t.parentNode.insertBefore(this._rootObj,t),t.complete)this._Loader(e);else{var n=this;jQuery(this._img).bind("load",function(){n._Loader(e)})}}}(),Wilq32.PhotoEffect.prototype={_setupParameters:function(t){this._parameters=this._parameters||{},"number"!=typeof this._angle&&(this._angle=0),"number"==typeof t.angle&&(this._angle=t.angle),this._parameters.animateTo="number"==typeof t.animateTo?t.animateTo:this._angle,this._parameters.step=t.step||this._parameters.step||null,this._parameters.easing=t.easing||this._parameters.easing||function(t,e,n,i,r){return-i*((e=e/r-1)*e*e*e-1)+n},this._parameters.duration=t.duration||this._parameters.duration||1e3,this._parameters.callback=t.callback||this._parameters.callback||function(){},t.bind&&t.bind!=this._parameters.bind&&this._BindEvents(t.bind)},_handleRotation:function(t){this._setupParameters(t),this._angle==this._parameters.animateTo?this._rotate(this._angle):this._animateStart()},_BindEvents:function(t){if(t&&this._eventObj){if(this._parameters.bind){var e=this._parameters.bind;for(var n in e)e.hasOwnProperty(n)&&jQuery(this._eventObj).unbind(n,e[n])}this._parameters.bind=t;for(var n in t)t.hasOwnProperty(n)&&jQuery(this._eventObj).bind(n,t[n])}},_Loader:function(){return IE?function(t){var e=this._img.width,n=this._img.height;this._img.parentNode.removeChild(this._img),this._vimage=this.createVMLNode("image"),this._vimage.src=this._img.src,this._vimage.style.height=n+"px",this._vimage.style.width=e+"px",this._vimage.style.position="absolute",this._vimage.style.top="0px",this._vimage.style.left="0px",this._container=this.createVMLNode("group"),this._container.style.width=e,this._container.style.height=n,this._container.style.position="absolute",this._container.setAttribute("coordsize",e-1+","+(n-1)),this._container.appendChild(this._vimage),this._rootObj.appendChild(this._container),this._rootObj.style.position="relative",this._rootObj.style.width=e+"px",this._rootObj.style.height=n+"px",this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._eventObj=this._rootObj,this._handleRotation(t)}:function(t){this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._width=this._img.width,this._height=this._img.height,this._widthHalf=this._width/2,this._heightHalf=this._height/2;var e=Math.sqrt(this._height*this._height+this._width*this._width);this._widthAdd=e-this._width,this._heightAdd=e-this._height,this._widthAddHalf=this._widthAdd/2,this._heightAddHalf=this._heightAdd/2,this._img.parentNode.removeChild(this._img),this._aspectW=(parseInt(this._img.style.width,10)||this._width)/this._img.width,this._aspectH=(parseInt(this._img.style.height,10)||this._height)/this._img.height,this._canvas=document.createElement("canvas"),this._canvas.setAttribute("width",this._width),this._canvas.style.position="relative",this._canvas.style.left=-this._widthAddHalf+"px",this._canvas.style.top=-this._heightAddHalf+"px",this._canvas.Wilq32=this._rootObj.Wilq32,this._rootObj.appendChild(this._canvas),this._rootObj.style.width=this._width+"px",this._rootObj.style.height=this._height+"px",this._eventObj=this._canvas,this._cnv=this._canvas.getContext("2d"),this._handleRotation(t)}}(),_animateStart:function(){this._timer&&clearTimeout(this._timer),this._animateStartTime=+new Date,this._animateStartAngle=this._angle,this._animate()},_animate:function(){var t=+new Date,e=t-this._animateStartTime>this._parameters.duration;if(e&&!this._parameters.animatedGif)clearTimeout(this._timer);else{if(this._canvas||this._vimage||this._img){var n=this._parameters.easing(0,t-this._animateStartTime,this._animateStartAngle,this._parameters.animateTo-this._animateStartAngle,this._parameters.duration);this._rotate(~~(10*n)/10)}this._parameters.step&&this._parameters.step(this._angle);var i=this;this._timer=setTimeout(function(){i._animate.call(i)},10)}this._parameters.callback&&e&&(this._angle=this._parameters.animateTo,this._rotate(this._angle),this._parameters.callback.call(this._rootObj))},_rotate:function(){var t=Math.PI/180;return IE?function(t){this._angle=t,this._container.style.rotation=t%360+"deg"}:supportedCSS?function(t){this._angle=t,this._img.style[supportedCSS]="rotate("+t%360+"deg)"}:function(e){this._angle=e,e=e%360*t,this._canvas.width=this._width+this._widthAdd,this._canvas.height=this._height+this._heightAdd,this._cnv.translate(this._widthAddHalf,this._heightAddHalf),this._cnv.translate(this._widthHalf,this._heightHalf),this._cnv.rotate(e),this._cnv.translate(-this._widthHalf,-this._heightHalf),this._cnv.scale(this._aspectW,this._aspectH),this._cnv.drawImage(this._img,0,0)}}()},IE&&(Wilq32.PhotoEffect.prototype.createVMLNode=function(){document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{return!document.namespaces.rvml&&document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<rvml:"+t+' class="rvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}}()),jQuery}Object.defineProperty(exports,"__esModule",{value:!0}),exports.initRotate=initRotate},4596:function(t,e){"use strict";function n(t){this.obj=t,this.zoom=4,this.maxLen=t.goods.length,this.canvas=document.getElementById("wheelCanvas"),this.canvas.width=310*this.zoom,this.canvas.height=this.canvas.width,this.obj.outsideRadius=this.canvas.width/2-5*this.zoom,this.obj.textRadius=this.obj.outsideRadius-36*this.zoom,this.baseAngle=2*Math.PI/this.obj.goods.length,this.ctx=this.canvas.getContext("2d"),this.canvasW=this.canvas.width,this.canvasH=this.canvas.height,this.ctx.clearRect(0,0,this.canvasW,this.canvasH),this.ctx.strokeStyle="#fdbf82",this.ctx.font=12*this.zoom+"px Microsoft YaHei",this.init()}function i(t){function e(){++r==n.length&&s(i)}for(var n=t.goods,i=[],r=0,s=function(){},n="object"!=(void 0===n?"undefined":o(n))?[n]:n,a=0;a<n.length;a++)i[a]=new Image,i[a].src=n[a].img,i[a].onload=function(){e()},i[a].onerror=function(){e()};return{done:function(t){s=t||s}}}function r(t,e){var n=0,i=360/e.length;return e.forEach(function(e,i){e.id==t&&(n=i)}),{angle:360-(i*n+Math.floor(Math.random()*(i-10))+5),good:e[n],index:n}}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.prototype={init:function(){this.drawAll()},drawAll:function(){var t=this;i(this.obj).done(function(){for(var e=0;e<t.obj.goods.length;e++)t.drawItem(e)})},drawItem:function(t,e){var n=this.obj.goods[t],i=this.obj.startAngle+t*this.baseAngle-Math.PI/2;this.ctx.fillStyle=e?"#ffb66e":t%2==0||this.maxLen%2!=0?"#fce096":"#fdbf82",this.ctx.beginPath(),this.ctx.arc(.5*this.canvasW,.5*this.canvasH,this.obj.outsideRadius,i,i+this.baseAngle-Math.PI/360,!1),this.ctx.arc(.5*this.canvasW,.5*this.canvasH,this.obj.insideRadius,i+this.baseAngle-Math.PI/360,i,!0),this.ctx.stroke(),this.ctx.fill(),this.ctx.save(),this.ctx.fillStyle="#f74f46",this.ctx.font="bold  "+12*this.zoom+"px Microsoft YaHei";var r=n.text,o=17*this.zoom,s=.5*this.canvasW+Math.cos(i+this.baseAngle/2)*this.obj.textRadius,a=.5*this.canvasH+Math.sin(i+this.baseAngle/2)*this.obj.textRadius;this.ctx.translate(s,a),this.ctx.rotate(i+this.baseAngle/2+Math.PI/2);var c=new Image;c.src=n.img;var l=.7,d=c.width*l*this.zoom,u=c.height*l*this.zoom;if(d>50*this.zoom&&(l=d/(40*this.zoom),d=40*this.zoom,u/=l),r.length,1)this.ctx.fillText(r,-this.ctx.measureText(r).width/2,0),this.ctx.drawImage(c,-d/2,12*this.zoom,d,u);else{r=r.substring(0,6)+"||"+r.substring(6);for(var g=r.split("||"),f=0;f<g.length;f++)this.ctx.fillText(g[f],-this.ctx.measureText(g[f]).width/2,f*o);this.ctx.drawImage(c,-d/2,12*this.zoom+o,d,u)}this.ctx.restore()},drawOne:function(t,e){var n=this;i({goods:new Array(1).fill(this.obj.goods[t])}).done(function(){n.drawItem(t,e)})},reDraw:function(){this.drawAll()}},e.drawWheelCanvas=n,e.getAwardInfo=r}});
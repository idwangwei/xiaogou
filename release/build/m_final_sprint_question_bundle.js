webpackJsonp([9],{0:function(e,t,n){"use strict";n(432),n(433),n(437),n(443),n(447),n(451),n(455),n(459)},151:function(e,t,n){var r,r;(function(t){!function(t){e.exports=t()}(function(){return function e(t,n,i){function o(s,l){if(!n[s]){if(!t[s]){var c="function"==typeof r&&r;if(!l&&c)return r(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){var n=t[s][1][e];return o(n||e)},d,d.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,n,r){(function(e){"use strict";function t(){u=!0;for(var e,t,n=d.length;n;){for(t=d,d=[],e=-1;++e<n;)t[e]();n=d.length}u=!1}function r(e){1!==d.push(e)||u||i()}var i,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var a=0,s=new o(t),l=e.document.createTextNode("");s.observe(l,{characterData:!0}),i=function(){l.data=a=++a%2}}else if(e.setImmediate||void 0===e.MessageChannel)i="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var n=e.document.createElement("script");n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(t,0)};else{var c=new e.MessageChannel;c.port1.onmessage=t,i=function(){c.port2.postMessage(0)}}var u,d=[];n.exports=r}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";function r(){}function i(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,e!==r&&l(this,e)}function o(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function a(e,t,n){h(function(){var r;try{r=t(n)}catch(t){return g.reject(e,t)}r===e?g.reject(e,new TypeError("Cannot resolve promise with itself")):g.resolve(e,r)})}function s(e){var t=e&&e.then;if(e&&"object"==typeof e&&"function"==typeof t)return function(){t.apply(e,arguments)}}function l(e,t){function n(t){o||(o=!0,g.reject(e,t))}function r(t){o||(o=!0,g.resolve(e,t))}function i(){t(r,n)}var o=!1,a=c(i);"error"===a.status&&n(a.value)}function c(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function u(e){return e instanceof this?e:g.resolve(new this(r),e)}function d(e){var t=new this(r);return g.reject(t,e)}function f(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var o=new Array(n),a=0,s=-1,l=new this(r);++s<n;)!function(e,r){function s(e){o[r]=e,++a!==n||i||(i=!0,g.resolve(l,o))}t.resolve(e).then(s,function(e){i||(i=!0,g.reject(l,e))})}(e[s],s);return l}function p(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var o=-1,a=new this(r);++o<n;)!function(e){t.resolve(e).then(function(e){i||(i=!0,g.resolve(a,e))},function(e){i||(i=!0,g.reject(a,e))})}(e[o]);return a}var h=e(1),g={},v=["REJECTED"],m=["FULFILLED"],b=["PENDING"];t.exports=n=i,i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){if("function"!=typeof e&&this.state===m||"function"!=typeof t&&this.state===v)return this;var n=new this.constructor(r);if(this.state!==b){a(n,this.state===m?e:t,this.outcome)}else this.queue.push(new o(n,e,t));return n},o.prototype.callFulfilled=function(e){g.resolve(this.promise,e)},o.prototype.otherCallFulfilled=function(e){a(this.promise,this.onFulfilled,e)},o.prototype.callRejected=function(e){g.reject(this.promise,e)},o.prototype.otherCallRejected=function(e){a(this.promise,this.onRejected,e)},g.resolve=function(e,t){var n=c(s,t);if("error"===n.status)return g.reject(e,n.value);var r=n.value;if(r)l(e,r);else{e.state=m,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},g.reject=function(e,t){e.state=v,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},n.resolve=u,n.reject=d,n.all=f,n.race=p},{1:1}],3:[function(e,n,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(t.type)}}function o(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function a(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function s(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function l(e){return new oe(function(t){var n=e.transaction(ae,"readwrite"),r=i([""]);n.objectStore(ae).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}function c(e){return"boolean"==typeof re?oe.resolve(re):l(e).then(function(e){return re=e})}function u(e){var t=ie[e.name],n={};n.promise=new oe(function(e){n.resolve=e}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function d(e){var t=ie[e.name],n=t.deferredOperations.pop();n&&n.resolve()}function f(e,t){return new oe(function(n,r){if(e.db){if(!t)return n(e.db);u(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var o=ne.open.apply(ne,i);t&&(o.onupgradeneeded=function(t){var n=o.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(ae)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),r(o.error)},o.onsuccess=function(){n(o.result),d(e)}})}function p(e){return f(e,!1)}function h(e){return f(e,!0)}function g(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function v(e){return new oe(function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}function m(e){return i([s(atob(e.data))],{type:e.type})}function b(e){return e&&e.__local_forage_encoded_blob}function y(e){var t=this,n=t._initReady().then(function(){var e=ie[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return a(n,e,e),n}function _(e){function t(){return oe.resolve()}var n=this,r={db:null};if(e)for(var i in e)r[i]=e[i];ie||(ie={});var o=ie[r.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},ie[r.name]=o),o.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=y);for(var a=[],s=0;s<o.forages.length;s++){var l=o.forages[s];l!==n&&a.push(l._initReady().catch(t))}var c=o.forages.slice(0);return oe.all(a).then(function(){return r.db=o.db,p(r)}).then(function(e){return r.db=e,g(r,n._defaultConfig.version)?h(r):e}).then(function(e){r.db=o.db=e,n._dbInfo=r;for(var t=0;t<c.length;t++){var i=c[t];i!==n&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}})}function w(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new oe(function(t,r){n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),a=o.get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),b(e)&&(e=m(e)),t(e)},a.onerror=function(){r(a.error)}}).catch(r)});return o(r,t),r}function S(e,t){var n=this,r=new oe(function(t,r){n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),a=o.openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;b(r)&&(r=m(r));var i=e(r,n.key,s++);void 0!==i?t(i):n.continue()}else t()},a.onerror=function(){r(a.error)}}).catch(r)});return o(r,t),r}function k(e,t,n){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new oe(function(n,i){var o;r.ready().then(function(){return o=r._dbInfo,"[object Blob]"===se.call(t)?c(o.db).then(function(e){return e?t:v(t)}):t}).then(function(t){var r=o.db.transaction(o.storeName,"readwrite"),a=r.objectStore(o.storeName),s=a.put(t,e);null===t&&(t=void 0),r.oncomplete=function(){void 0===t&&(t=null),n(t)},r.onabort=r.onerror=function(){var e=s.error?s.error:s.transaction.error;i(e)}}).catch(i)});return o(i,n),i}function I(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new oe(function(t,r){n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readwrite"),a=o.objectStore(i.storeName),s=a.delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(s.error)},o.onabort=function(){var e=s.error?s.error:s.transaction.error;r(e)}}).catch(r)});return o(r,t),r}function x(e){var t=this,n=new oe(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readwrite"),o=i.objectStore(r.storeName),a=o.clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=a.error?a.error:a.transaction.error;n(e)}}).catch(n)});return o(n,e),n}function C(e){var t=this,n=new oe(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),o=i.count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}).catch(n)});return o(n,e),n}function Q(e,t){var n=this,r=new oe(function(t,r){if(e<0)return void t(null);n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),a=!1,s=o.openCursor();s.onsuccess=function(){var n=s.result;if(!n)return void t(null);0===e?t(n.key):a?t(n.key):(a=!0,n.advance(e))},s.onerror=function(){r(s.error)}}).catch(r)});return o(r,t),r}function T(e){var t=this,n=new oe(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),o=i.openCursor(),a=[];o.onsuccess=function(){var t=o.result;if(!t)return void e(a);a.push(t.key),t.continue()},o.onerror=function(){n(o.error)}}).catch(n)});return o(n,e),n}function F(e){var t,n,r,i,o,a=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),u=new Uint8Array(c);for(t=0;t<s;t+=4)n=ce.indexOf(e[t]),r=ce.indexOf(e[t+1]),i=ce.indexOf(e[t+2]),o=ce.indexOf(e[t+3]),u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&o;return c}function R(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=ce[n[t]>>2],r+=ce[(3&n[t])<<4|n[t+1]>>4],r+=ce[(15&n[t+1])<<2|n[t+2]>>6],r+=ce[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function $(e,t){var n="";if(e&&(n=Ce.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===Ce.call(e.buffer))){var r,i=fe;e instanceof ArrayBuffer?(r=e,i+=he):(r=e.buffer,"[object Int8Array]"===n?i+=ve:"[object Uint8Array]"===n?i+=me:"[object Uint8ClampedArray]"===n?i+=be:"[object Int16Array]"===n?i+=ye:"[object Uint16Array]"===n?i+=we:"[object Int32Array]"===n?i+=_e:"[object Uint32Array]"===n?i+=Se:"[object Float32Array]"===n?i+=ke:"[object Float64Array]"===n?i+=Ie:t(new Error("Failed to get type for BinaryArray"))),t(i+R(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n=ue+e.type+"~"+R(this.result);t(fe+ge+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function A(e){if(e.substring(0,pe)!==fe)return JSON.parse(e);var t,n=e.substring(xe),r=e.substring(pe,xe);if(r===ge&&de.test(n)){var o=n.match(de);t=o[1],n=n.substring(o[0].length)}var a=F(n);switch(r){case he:return a;case ge:return i([a],{type:t});case ve:return new Int8Array(a);case me:return new Uint8Array(a);case be:return new Uint8ClampedArray(a);case ye:return new Int16Array(a);case we:return new Uint16Array(a);case _e:return new Int32Array(a);case Se:return new Uint32Array(a);case ke:return new Float32Array(a);case Ie:return new Float64Array(a);default:throw new Error("Unkown type: "+r)}}function P(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new oe(function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction(function(i){i.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=n,e()},function(e,t){r(t)})})});return n.serializer=Qe,i}function D(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new oe(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return o(r,t),r}function L(e,t){var n=this,r=new oe(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT * FROM "+i.storeName,[],function(n,r){for(var o=r.rows,a=o.length,s=0;s<a;s++){var l=o.item(s),c=l.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,l.key,s+1)))return void t(c)}t()},function(e,t){r(t)})})}).catch(r)});return o(r,t),r}function E(e,t,n,r){var i=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var a=new oe(function(o,a){i.ready().then(function(){void 0===t&&(t=null);var s=t,l=i._dbInfo;l.serializer.serialize(t,function(t,c){c?a(c):l.db.transaction(function(n){n.executeSql("INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){o(s)},function(e,t){a(t)})},function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void o(E.apply(i,[e,s,n,r-1]));a(t)}})})}).catch(a)});return o(a,n),a}function q(e,t,n){return E.apply(this,[e,t,n,1])}function O(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new oe(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return o(r,t),r}function N(e){var t=this,n=new oe(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})}).catch(n)});return o(n,e),n}function B(e){var t=this,n=new oe(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})}).catch(n)});return o(n,e),n}function j(e,t){var n=this,r=new oe(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})}).catch(r)});return o(r,t),r}function W(e){var t=this,n=new oe(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)},function(e,t){n(t)})})}).catch(n)});return o(n,e),n}function M(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=n.name+"/",n.storeName!==t._defaultConfig.storeName&&(n.keyPrefix+=n.storeName+"/"),t._dbInfo=n,n.serializer=Qe,oe.resolve()}function z(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}});return o(n,e),n}function U(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return o(r,t),r}function K(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,o=localStorage.length,a=1,s=0;s<o;s++){var l=localStorage.key(s);if(0===l.indexOf(r)){var c=localStorage.getItem(l);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,l.substring(i),a++)))return c}}});return o(r,t),r}function V(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return o(r,t),r}function H(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++)0===localStorage.key(i).indexOf(e.keyPrefix)&&r.push(localStorage.key(i).substring(e.keyPrefix.length));return r});return o(n,e),n}function Y(e){var t=this,n=t.keys().then(function(e){return e.length});return o(n,e),n}function G(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return o(r,t),r}function X(e,t,n){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new oe(function(i,o){var a=r._dbInfo;a.serializer.serialize(t,function(t,r){if(r)o(r);else try{localStorage.setItem(a.keyPrefix+e,t),i(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}})})});return o(i,n),i}function J(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function Z(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ee(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}function ee(e){for(var t in $e)if($e.hasOwnProperty(t)&&$e[t]===e)return!0;return!1}var te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){}}();"undefined"==typeof Promise&&e(3);var re,ie,oe=Promise,ae="local-forage-detect-blob-support",se=Object.prototype.toString,le={_driver:"asyncStorage",_initStorage:_,iterate:S,getItem:w,setItem:k,removeItem:I,clear:x,length:C,key:Q,keys:T},ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ue="~~local_forage_type~",de=/^~~local_forage_type~([^~]+)~/,fe="__lfsc__:",pe=fe.length,he="arbf",ge="blob",ve="si08",me="ui08",be="uic8",ye="si16",_e="si32",we="ur16",Se="ui32",ke="fl32",Ie="fl64",xe=pe+he.length,Ce=Object.prototype.toString,Qe={serialize:$,deserialize:A,stringToBuffer:F,bufferToString:R},Te={_driver:"webSQLStorage",_initStorage:P,iterate:L,getItem:D,setItem:q,removeItem:O,clear:N,length:B,key:j,keys:W},Fe={_driver:"localStorageWrapper",_initStorage:M,iterate:K,getItem:U,setItem:X,removeItem:G,clear:z,length:Y,key:V,keys:H},Re={},$e={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},Ae=[$e.INDEXEDDB,$e.WEBSQL,$e.LOCALSTORAGE],Pe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],De={description:"",driver:Ae.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},Le={};Le[$e.INDEXEDDB]=function(){try{if(!ne)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),Le[$e.WEBSQL]=function(){return"function"==typeof openDatabase}(),Le[$e.LOCALSTORAGE]=function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(e){return!1}}();var Ee=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},qe=function(){function e(t){r(this,e),this.INDEXEDDB=$e.INDEXEDDB,this.LOCALSTORAGE=$e.LOCALSTORAGE,this.WEBSQL=$e.WEBSQL,this._defaultConfig=Z({},De),this._config=Z({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":te(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new oe(function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),o=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void n(i);if(ee(e._driver))return void n(o);for(var a=Pe.concat("_initStorage"),s=0;s<a.length;s++){var l=a[s];if(!l||!e[l]||"function"!=typeof e[l])return void n(i)}var c=oe.resolve(!0);"_support"in e&&(c=e._support&&"function"==typeof e._support?e._support():oe.resolve(!!e._support)),c.then(function(n){Le[r]=n,Re[r]=e,t()},n)}catch(e){n(e)}});return a(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=this,i=oe.resolve().then(function(){if(!ee(e)){if(Re[e])return Re[e];throw new Error("Driver not found.")}switch(e){case r.INDEXEDDB:return le;case r.LOCALSTORAGE:return Fe;case r.WEBSQL:return Te}});return a(i,t,n),i},e.prototype.getSerializer=function(e){var t=oe.resolve(Qe);return a(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return a(n,e,e),n},e.prototype.setDriver=function(e,t,n){function r(){s._config.driver=s.driver()}function i(e){return s._extend(e),r(),s._ready=s._initStorage(s._config),s._ready}function o(e){return function(){function t(){for(;n<e.length;){var o=e[n];return n++,s._dbInfo=null,s._ready=null,s.getDriver(o).then(i).catch(t)}r();var a=new Error("No available storage method found.");return s._driverSet=oe.reject(a),s._driverSet}var n=0;return t()}}var s=this;Ee(e)||(e=[e]);var l=this._getSupportedDrivers(e),c=null!==this._driverSet?this._driverSet.catch(function(){return oe.resolve()}):oe.resolve();return this._driverSet=c.then(function(){var e=l[0];return s._dbInfo=null,s._ready=null,s.getDriver(e).then(function(e){s._driver=e._driver,r(),s._wrapLibraryMethodsWithReady(),s._initDriver=o(l)})}).catch(function(){r();var e=new Error("No available storage method found.");return s._driverSet=oe.reject(e),s._driverSet}),a(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Le[e]},e.prototype._extend=function(e){Z(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0;e<Pe.length;e++)J(this,Pe[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),Oe=new qe;t.exports=Oe},{3:3}]},{},[4])(4)})}).call(t,function(){return this}())},171:function(e,t,n){"use strict";function r(e,t,n){S=e,t&&(k=t),n&&(I=n);var r=angular.element("body").injector(),i=r.get("$rootScope"),o=r.get("$ngRedux");k&&n?o?o.mergeReducer(k,I).then(function(){console.log(e.name+"-storeReady!!!!!!!!!!"),i.$$listeners[e.name+"-storeReady"]?i.$broadcast(e.name+"-storeReady"):i[e.name+"-storeReady"]=!0}):(console.error("$ngRedux not found!"),i[e.name+"-storeReady"]=!0):i[e.name+"-storeReady"]=!0}function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){function n(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return x(t,e,r),e.$inject=t,e.instance=new(Function.prototype.bind.apply(e,[null].concat(r))),e.instance}return n.prototype=e.prototype,n.$inject=t,n}}function o(e,t){return function(n){var r=function(e){return e.targetScope.ctrl},i=function(e,t){Object.keys(t).concat(Object.getOwnPropertyNames(t.__proto__)).forEach(function(n){if("constructor"!==n)if(e[n])if(angular.isFunction(e[n])&&angular.isFunction(t[n])){var r=e[n];e[n]=function(){var e=this,i=arguments;r.call(this,arguments).then(function(){t[n].call(e,i)})}}else e[n]=t[n];else e[n]=t[n]})};S.run(["$rootScope","$injector",function(o,a){o.$on("$ionicView.loaded",function(o,s){if(s.stateName===e){var l=r(o),c=new n;t.inject&&t.inject.length&&t.inject.forEach(function(e){c[e]=a.get(e)}),i(l,c)}})}])}}function a(e,t){return function(n){function r(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];t.inject&&t.inject.length&&x(t.inject,n,r);var o=new(Function.prototype.bind.apply(n,[null].concat(r)));o.selectorList=o.selectorList?o.selectorList:[];var a=function(){},s={initFlags:a,initData:a,mapStateToThis:a,mapActionToThis:a,componentWillReceiveProps:a,onBeforeEnterView:a,onAfterEnterView:a,onBeforeLeaveView:a,onLoadedView:a,onUpdate:a,configDataPipe:a,onReceiveProps:a},l={viewEntered:!1,hasPageRefreshManger:!1,dataPipe:new v.default},c=a,u=a;Object.keys(s).forEach(function(e){o[e]||(o[e]=s[e])}),Object.assign(o,l),o.configDataPipe(),o.mapStateObj={selectorList:o.selectorList,mapStateToThis:o.mapStateToThis};var d=o.getScope();if(!d)throw new Error('$scope must be injected with Decorator "@View"');var f=o.$ngRedux;if(!f)throw new Error('$ngRedux must be injected with Decorator "@View"');var p=o.pageRefreshManager;if(!o.getStateService)throw new Error("$state is required with pageRefreshManager");if(o.go=function(e,t,n){if(!o.getStateService||!o.getStateService())return console.error("$state service is not injected!");"string"!=typeof t&&(n=t,t="forward");var r=o.$injector.get("$ionicViewSwitcher");o.viewEntered=!1,"none"!=t?r.nextDirection(t):r.nextDirection("none"),o.getStateService().go(e,n)},p&&p.getListenerName&&(o.hasPageRefreshManger=!0,o.hasPageRefreshManger)){var h=o.getStateService();u=d.$on(p.getListenerName(h.current,h.params),function(e,t){p.shouldUpdate(h,t.url)&&o.onUpdate()})}var g=d.$on("$ionicView.beforeEnter",function(){if(o.onBeforeEnterView(),o.getRootScope&&o.back){o.getRootScope().viewGoBack=o.back.bind(o)}}),m=d.$on("$ionicView.beforeLeave",function(){c(),o.viewEntered=!1,o.onBeforeLeaveView()}),b=d.$on("$ionicView.loaded",function(){o.onLoadedView()}),y=d.$on("$ionicView.afterEnter",function(){d.$evalAsync(function(){o.viewEntered=!0,c=f.connect(o.mapStateObj,o.mapActionToThis(),o)(function(e,t){o.viewEntered&&(Object.assign(o,e,t),o.dataPipe.run(o),d.$evalAsync(function(){o.onReceiveProps(e,t)}))}),o.onAfterEnterView()})});return d.$on("$destroy",function(){c(),u(),y(),g(),m(),b()}),o}return r.prototype=n.prototype,r.$inject=n.$inject,t.inject&&t.inject.length&&(r.$inject=t.inject),r.$inject.push("$injector"),S.config(["$stateProvider",function(n){if(t.views){var i=Object.keys(t.views)[0],o=t.views[i];o.controller=r,o.controllerAs=o.controllerAs||"ctrl"}else t.controller=r,t.controllerAs=t.controllerAs||"ctrl";n.state(e,t)}]),r}}function s(e){return function(t){if(!e.selector)throw new Error("selector must be provided!");e.controller=t,e.controllerAs||(e.controllerAs="ctrl"),S.directive(e.selector,function(){return e})}}function l(e){return function(t){t.controller=t,S.component(e.selector,e)}}function c(e){return function(t,n,r){if(r.writable=!0,t.selectorList||(t.selectorList=[]),e)if("string"==typeof e)t.selectorList.push({type:w,key:n,selector:e});else if(e instanceof Array)t.selectorList.push({type:y,key:n,selector:e});else{if(!(e instanceof Function))throw new Error("unknown selector type!");t.selectorList.push({type:_,key:n,selector:e})}else t.selectorList.push({type:b,key:n})}}function u(e,t,n){var r=n.value,i=void 0;return n.value=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=e.$ngRedux;if(!a)throw new Error("$ngRedux is required by decorator @actionCreator");var s=(0,m.bindActionCreators)(r.bind(e.constructor.instance),a.dispatch);return i=s.apply(e,n)},n}function d(e,t){return function(n){S.constant(e,t)}}function f(e,t){return function(n){t&&t.inject&&t.inject.length&&(n.$inject=t.inject),S.service(e,n)}}function p(e,t,n){var r=n.value;return n.value=function(){var e=this;return new Promise(function(t){r.call(e,t)})},n}Object.defineProperty(t,"__esModule",{value:!0}),t.registerModule=r,t.Inject=i,t.ViewDecorator=o,t.View=a,t.Directive=s,t.Component=l,t.select=c,t.actionCreator=u,t.Constant=d,t.Service=f,t.PromiseFn=p;var h=n(172),g=n(174),v=function(e){return e&&e.__esModule?e:{default:e}}(g),m=n(176),b="EMPTY_SELECTOR_TYPE",y="PATH_SELECTOR_TYPE",_="FUNCTION_SELECTOR_TYPE",w="STR_SELECTOR_TYPE",S=h.ngDecModule,k=void 0,I=void 0,x=function(e,t,n){e.forEach(function(e,r){"$scope"==e?t.prototype.getScope=function(){return n[r]}:"$rootScope"==e?t.prototype.getRootScope=function(){return n[r]}:"$state"==e?t.prototype.getStateService=function(){return n[r]}:"$ngRedux"==e?(t.prototype.getState=function(){return n[r].getState()},t.prototype[e]=n[r]):t.prototype[e]=n[r]})}},172:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ngDecModule=void 0,n(173);var r=angular.module("ngDecModule",[]);t.ngDecModule=r},174:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(175),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t,n,i){r(this,e),this.id=(0,a.default)(),this.criteriaList=t||[],this.invokeList=n||[],this.sequence=i||0}return i(e,[{key:"pushCriteria",value:function(e){this.criteriaList.push(e)}},{key:"pushInvoke",value:function(e){this.invokeList.push(e)}}]),e}(),l=function(){function e(){r(this,e),this.configList=[],this.lastConfigId=null,this.lastActionType=u.PUSH_CRITERIA}return i(e,[{key:"getLastConfig",value:function(){var e=this,t=null,n=void 0;switch(this.lastActionType){
case u.PUSH_CRITERIA:return this.lastConfigId?this.configList.forEach(function(n){n.id==e.lastConfigId&&(t=n)}):(t=new s,t.sequence=1,this.configList.push(t),this.lastConfigId=t.id),t;case u.PUSH_INVOKE:case u.NEXT:return this.configList.forEach(function(n){n.id==e.lastConfigId&&(t=n)}),n=new s,n.sequence=t.sequence++,this.configList.push(n),this.lastConfigId=n.id,n}}},{key:"when",value:function(e){return"function"!=typeof e?console.error(c.CRITERIA_ERROR):(this.getLastConfig().pushCriteria(e),this.lastActionType=u.PUSH_CRITERIA,this)}},{key:"then",value:function(e){return"function"!=typeof e?console.error(c.INVOKE_ERROR):(this.getLastConfig().pushInvoke(e),this.lastActionType=u.PUSH_INVOKE,this)}},{key:"next",value:function(){return this.lastActionType=u.NEXT,this}},{key:"run",value:function(e){for(var t=!0,n=this.configList.slice(0,this.configList.length);t&&n.length;){for(var r=[n.shift()];n[0]&&r[0].sequence==n[0].sequence;)r.push(n.shift());for(var i=0;i<r.length;i++)!function(n){var i=r[n],o=!0;i.criteriaList.forEach(function(t){o=o&&t.call(e)}),o?i.invokeList.forEach(function(t){t.call(e)}):t=!1}(i)}}}]),e}(),c={CRITERIA_ERROR:"criteria should be function!",INVOKE_ERROR:"invoke should be function"},u={PUSH_CRITERIA:"PUSH_CRITERIA",PUSH_INVOKE:"PUSH_INVOKE",NEXT:"NEXT"};window.dataPipe=new l,t.default=l},175:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return Math.pow(2,e)},r=(n(4),n(6)),i=n(8),o=n(12),a=(n(14),n(16)),s=n(32),l=(n(40),n(48),function(e,t){return Math.floor(Math.random()*(t-e+1))+e}),c=function(){return l(0,r-1)},u=function(){return l(0,i-1)},d=function(){return l(0,o-1)},f=function(){return l(0,a-1)},p=function(){return l(0,s-1)},h=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},g=function(e,t,n){e=String(e),n=n||"0";for(var r=t-e.length;r>0;r>>>=1,n+=n)1&r&&(e=n+e);return e},v=function(e,t,n,r,i,o){return g(e.toString(16),8)+"-"+g(t.toString(16),4)+"-"+g(n.toString(16),4)+"-"+g(r.toString(16),2)+g(i.toString(16),2)+"-"+g(o.toString(16),12)},m=function(){return v(p(),f(),16384|d(),128|c(),u(),h())};t.default=m},282:function(e,t,n){(function(e,n){function r(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function i(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function o(e){return function(t){return null==t?void 0:t[e]}}function a(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function s(e,t){return null==e?void 0:e[t]}function l(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function c(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function u(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function d(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function f(){this.__data__=Ht?Ht(null):{}}function p(e){return this.has(e)&&delete this.__data__[e]}function h(e){var t=this.__data__;if(Ht){var n=t[e];return n===Ne?void 0:n}return Dt.call(t,e)?t[e]:void 0}function g(e){var t=this.__data__;return Ht?void 0!==t[e]:Dt.call(t,e)}function v(e,t){return this.__data__[e]=Ht&&void 0===t?Ne:t,this}function m(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function b(){this.__data__=[]}function y(e){var t=this.__data__,n=N(t,e);return!(n<0)&&(n==t.length-1?t.pop():Bt.call(t,n,1),!0)}function _(e){var t=this.__data__,n=N(t,e);return n<0?void 0:t[n][1]}function w(e){return N(this.__data__,e)>-1}function S(e,t){var n=this.__data__,r=N(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function k(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function I(){this.__data__={hash:new d,map:new(zt||m),string:new d}}function x(e){return ie(this,e).delete(e)}function C(e){return ie(this,e).get(e)}function Q(e){return ie(this,e).has(e)}function T(e,t){return ie(this,e).set(e,t),this}function F(e){var t=-1,n=e?e.length:0;for(this.__data__=new k;++t<n;)this.add(e[t])}function R(e){return this.__data__.set(e,Ne),this}function $(e){return this.__data__.has(e)}function A(e){this.__data__=new m(e)}function P(){this.__data__=new m}function D(e){return this.__data__.delete(e)}function L(e){return this.__data__.get(e)}function E(e){return this.__data__.has(e)}function q(e,t){var n=this.__data__;if(n instanceof m){var r=n.__data__;if(!zt||r.length<qe-1)return r.push([e,t]),this;n=this.__data__=new k(r)}return n.set(e,t),this}function O(e,t){var n=sn(e)||_e(e)?a(e.length,String):[],r=n.length,i=!!r;for(var o in e)!t&&!Dt.call(e,o)||i&&("length"==o||le(o,r))||n.push(o);return n}function N(e,t){for(var n=e.length;n--;)if(ye(e[n][0],t))return n;return-1}function B(e,t){t=ce(t,e)?[t]:ee(t);for(var n=0,r=t.length;null!=e&&n<r;)e=e[ge(t[n++])];return n&&n==r?e:void 0}function j(e){return Lt.call(e)}function W(e,t){return null!=e&&t in Object(e)}function M(e,t,n,r,i){return e===t||(null==e||null==t||!xe(e)&&!Ce(t)?e!==e&&t!==t:z(e,t,M,n,r,i))}function z(e,t,n,r,i,o){var a=sn(e),s=sn(t),c=Ve,u=Ve;a||(c=rn(e),c=c==Ke?tt:c),s||(u=rn(t),u=u==Ke?tt:u);var d=c==tt&&!l(e),f=u==tt&&!l(t),p=c==u;if(p&&!d)return o||(o=new A),a||ln(e)?te(e,t,n,r,i,o):ne(e,t,c,n,r,i,o);if(!(i&je)){var h=d&&Dt.call(e,"__wrapped__"),g=f&&Dt.call(t,"__wrapped__");if(h||g){var v=h?e.value():e,m=g?t.value():t;return o||(o=new A),n(v,m,r,i,o)}}return!!p&&(o||(o=new A),re(e,t,n,r,i,o))}function U(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=n[i];var l=s[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var d=new A;if(r)var f=r(c,u,l,e,t,d);if(!(void 0===f?M(u,c,r,Be|je,d):f))return!1}}return!0}function K(e){return!(!xe(e)||de(e))&&(ke(e)||l(e)?Et:ht).test(ve(e))}function V(e){return Ce(e)&&Ie(e.length)&&!!mt[Lt.call(e)]}function H(e){return"function"==typeof e?e:null==e?Le:"object"==typeof e?sn(e)?X(e[0],e[1]):G(e):Ee(e)}function Y(e){if(!fe(e))return jt(e);var t=[];for(var n in Object(e))Dt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function G(e){var t=oe(e);return 1==t.length&&t[0][2]?he(t[0][0],t[0][1]):function(n){return n===e||U(n,e,t)}}function X(e,t){return ce(e)&&pe(t)?he(ge(e),t):function(n){var r=Ae(n,e);return void 0===r&&r===t?Pe(n,e):M(t,r,void 0,Be|je)}}function J(e){return function(t){return B(t,e)}}function Z(e){if("string"==typeof e)return e;if(Qe(e))return nn?nn.call(e):"";var t=e+"";return"0"==t&&1/e==-We?"-0":t}function ee(e){return sn(e)?e:on(e)}function te(e,t,n,i,o,a){var s=o&je,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var d=-1,f=!0,p=o&Be?new F:void 0;for(a.set(e,t),a.set(t,e);++d<l;){var h=e[d],g=t[d];if(i)var v=s?i(g,h,d,t,e,a):i(h,g,d,e,t,a);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!r(t,function(e,t){if(!p.has(t)&&(h===e||n(h,e,i,o,a)))return p.add(t)})){f=!1;break}}else if(h!==g&&!n(h,g,i,o,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function ne(e,t,n,r,i,o,a){switch(n){case st:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case at:return!(e.byteLength!=t.byteLength||!r(new Ot(e),new Ot(t)));case He:case Ye:case et:return ye(+e,+t);case Ge:return e.name==t.name&&e.message==t.message;case nt:case it:return e==t+"";case Ze:var s=c;case rt:var l=o&je;if(s||(s=u),e.size!=t.size&&!l)return!1;var d=a.get(e);if(d)return d==t;o|=Be,a.set(e,t);var f=te(s(e),s(t),r,i,o,a);return a.delete(e),f;case ot:if(tn)return tn.call(e)==tn.call(t)}return!1}function re(e,t,n,r,i,o){var a=i&je,s=De(e),l=s.length;if(l!=De(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:Dt.call(t,u)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<l;){u=s[c];var h=e[u],g=t[u];if(r)var v=a?r(g,h,u,t,e,o):r(h,g,u,e,t,o);if(!(void 0===v?h===g||n(h,g,r,i,o):v)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var m=e.constructor,b=t.constructor;m!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b)&&(f=!1)}return o.delete(e),o.delete(t),f}function ie(e,t){var n=e.__data__;return ue(t)?n["string"==typeof t?"string":"hash"]:n.map}function oe(e){for(var t=De(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,pe(i)]}return t}function ae(e,t){var n=s(e,t);return K(n)?n:void 0}function se(e,t,n){t=ce(t,e)?[t]:ee(t);for(var r,i=-1,o=t.length;++i<o;){var a=ge(t[i]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}if(r)return r;var o=e?e.length:0;return!!o&&Ie(o)&&le(a,o)&&(sn(e)||_e(e))}function le(e,t){return!!(t=null==t?Me:t)&&("number"==typeof e||vt.test(e))&&e>-1&&e%1==0&&e<t}function ce(e,t){if(sn(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Qe(e))||(ct.test(e)||!lt.test(e)||null!=t&&e in Object(t))}function ue(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function de(e){return!!At&&At in e}function fe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Rt)}function pe(e){return e===e&&!xe(e)}function he(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function ge(e){if("string"==typeof e||Qe(e))return e;var t=e+"";return"0"==t&&1/e==-We?"-0":t}function ve(e){if(null!=e){try{return Pt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function me(e,t,n){var r=e?e.length:0;if(!r)return-1;var o=null==n?0:Fe(n);return o<0&&(o=Wt(r+o,0)),i(e,H(t,3),o)}function be(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(Oe);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(be.Cache||k),n}function ye(e,t){return e===t||e!==e&&t!==t}function _e(e){return Se(e)&&Dt.call(e,"callee")&&(!Nt.call(e,"callee")||Lt.call(e)==Ke)}function we(e){return null!=e&&Ie(e.length)&&!ke(e)}function Se(e){return Ce(e)&&we(e)}function ke(e){var t=xe(e)?Lt.call(e):"";return t==Xe||t==Je}function Ie(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Me}function xe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ce(e){return!!e&&"object"==typeof e}function Qe(e){return"symbol"==typeof e||Ce(e)&&Lt.call(e)==ot}function Te(e){if(!e)return 0===e?e:0;if((e=Re(e))===We||e===-We){return(e<0?-1:1)*ze}return e===e?e:0}function Fe(e){var t=Te(e),n=t%1;return t===t?n?t-n:t:0}function Re(e){if("number"==typeof e)return e;if(Qe(e))return Ue;if(xe(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=xe(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(dt,"");var n=pt.test(e);return n||gt.test(e)?bt(e.slice(2),n?2:8):ft.test(e)?Ue:+e}function $e(e){return null==e?"":Z(e)}function Ae(e,t,n){var r=null==e?void 0:B(e,t);return void 0===r?n:r}function Pe(e,t){return null!=e&&se(e,t,W)}function De(e){return we(e)?O(e):Y(e)}function Le(e){return e}function Ee(e){return ce(e)?o(ge(e)):J(e)}var qe=200,Oe="Expected a function",Ne="__lodash_hash_undefined__",Be=1,je=2,We=1/0,Me=9007199254740991,ze=1.7976931348623157e308,Ue=NaN,Ke="[object Arguments]",Ve="[object Array]",He="[object Boolean]",Ye="[object Date]",Ge="[object Error]",Xe="[object Function]",Je="[object GeneratorFunction]",Ze="[object Map]",et="[object Number]",tt="[object Object]",nt="[object RegExp]",rt="[object Set]",it="[object String]",ot="[object Symbol]",at="[object ArrayBuffer]",st="[object DataView]",lt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ct=/^\w*$/,ut=/^\./,dt=/^\s+|\s+$/g,ft=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,ht=/^\[object .+?Constructor\]$/,gt=/^0o[0-7]+$/i,vt=/^(?:0|[1-9]\d*)$/,mt={};mt["[object Float32Array]"]=mt["[object Float64Array]"]=mt["[object Int8Array]"]=mt["[object Int16Array]"]=mt["[object Int32Array]"]=mt["[object Uint8Array]"]=mt["[object Uint8ClampedArray]"]=mt["[object Uint16Array]"]=mt["[object Uint32Array]"]=!0,mt[Ke]=mt[Ve]=mt[at]=mt[He]=mt[st]=mt[Ye]=mt[Ge]=mt[Xe]=mt[Ze]=mt[et]=mt[tt]=mt[nt]=mt[rt]=mt[it]=mt["[object WeakMap]"]=!1;var bt=parseInt,yt="object"==typeof e&&e&&e.Object===Object&&e,_t="object"==typeof self&&self&&self.Object===Object&&self,wt=yt||_t||Function("return this")(),St="object"==typeof t&&t&&!t.nodeType&&t,kt=St&&"object"==typeof n&&n&&!n.nodeType&&n,It=kt&&kt.exports===St,xt=It&&yt.process,Ct=function(){try{return xt&&xt.binding("util")}catch(e){}}(),Qt=Ct&&Ct.isTypedArray,Tt=Array.prototype,Ft=Function.prototype,Rt=Object.prototype,$t=wt["__core-js_shared__"],At=function(){var e=/[^.]+$/.exec($t&&$t.keys&&$t.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Pt=Ft.toString,Dt=Rt.hasOwnProperty,Lt=Rt.toString,Et=RegExp("^"+Pt.call(Dt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qt=wt.Symbol,Ot=wt.Uint8Array,Nt=Rt.propertyIsEnumerable,Bt=Tt.splice,jt=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),Wt=Math.max,Mt=ae(wt,"DataView"),zt=ae(wt,"Map"),Ut=ae(wt,"Promise"),Kt=ae(wt,"Set"),Vt=ae(wt,"WeakMap"),Ht=ae(Object,"create"),Yt=ve(Mt),Gt=ve(zt),Xt=ve(Ut),Jt=ve(Kt),Zt=ve(Vt),en=qt?qt.prototype:void 0,tn=en?en.valueOf:void 0,nn=en?en.toString:void 0;d.prototype.clear=f,d.prototype.delete=p,d.prototype.get=h,d.prototype.has=g,d.prototype.set=v,m.prototype.clear=b,m.prototype.delete=y,m.prototype.get=_,m.prototype.has=w,m.prototype.set=S,k.prototype.clear=I,k.prototype.delete=x,k.prototype.get=C,k.prototype.has=Q,k.prototype.set=T,F.prototype.add=F.prototype.push=R,F.prototype.has=$,A.prototype.clear=P,A.prototype.delete=D,A.prototype.get=L,A.prototype.has=E,A.prototype.set=q;var rn=j;(Mt&&rn(new Mt(new ArrayBuffer(1)))!=st||zt&&rn(new zt)!=Ze||Ut&&"[object Promise]"!=rn(Ut.resolve())||Kt&&rn(new Kt)!=rt||Vt&&"[object WeakMap]"!=rn(new Vt))&&(rn=function(e){var t=Lt.call(e),n=t==tt?e.constructor:void 0,r=n?ve(n):void 0;if(r)switch(r){case Yt:return st;case Gt:return Ze;case Xt:return"[object Promise]";case Jt:return rt;case Zt:return"[object WeakMap]"}return t});var on=be(function(e){e=$e(e);var t=[];return ut.test(e)&&t.push(""),e.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(e,n,r,i){t.push(r?i.replace(/\\(\\)?/g,"$1"):n||e)}),t}),an=function(e){return function(t,n,r){var i=Object(t);if(!we(t)){var o=H(n,3);t=De(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:void 0}}(me);be.Cache=k;var sn=Array.isArray,ln=Qt?function(e){return function(t){return e(t)}}(Qt):V;n.exports=an}).call(t,function(){return this}(),n(190)(e))},283:function(e,t){"use strict";e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.VERTICAL_CALC_SCOREPOINT_TYPE="vertical",t.VERTICAL_ERROR_SCOREPOINT_TYPE="verticalErr",t.VERTICAL_FILLBLANKS_SCOREPOINT_TYPE="vertical"}])},432:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.finalSprintQuestionModule=void 0;var r=n(171);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var i=angular.module("m_final_sprint_question",[]);(0,r.registerModule)(i),i.run(["$state","$rootScope","$ngRedux",function(e,t,n){console.log("model final sprint question install======================")}]),t.finalSprintQuestionModule=i},433:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i,o,a,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(282),c=function(e){return e&&e.__esModule?e:{default:e}}(l),u=n(432),d=(i=(0,u.View)("final_sprint_select_question",{url:"/final_sprint_select_question/:paperId/:paperInstanceId/:redoFlag/:urlFrom/:questionIndex/:urlFromMark",template:n(434),styles:n(435),inject:["$scope","$rootScope","$log","$state","commonService","paperService","uuid4","$ionicPopup","$ngRedux","$ionicSlideBoxDelegate","$ionicTabsDelegate","ngLocalStore","$timeout","$ionicHistory","finalData","workStatisticsServices","pageRefreshManager","countDownService","competitionFinalData"]}))((a=function(){function e(){r(this,e),this.initFlags()}return s(e,[{key:"initFlags",value:function(){this.paperDataInitializedFlag=!1,this.qsList=[],this.regFlag=!1,this.onLine=!0}},{key:"onReceiveProps",value:function(){this.ensurePageData()}},{key:"onUpdate",value:function(){}},{key:"onBeforeEnterView",value:function(){this.regFlag=!1,this.paperDataInitializedFlag=!1}},{key:"onAfterEnterView",value:function(){}},{key:"onBeforeLeaveView",value:function(){}},{key:"parseSeqNumToInt",value:function(e){return parseInt(e)}},{key:"ensurePageData",value:function(){function e(){var e=this;(0,c.default)(this.qsList,function(t){return(0,c.default)(t.qsList,function(t){return void 0===e.statusMapForQuestions[t.id]})})&&this.getPaperDataFromService()}var t=this;this.getStateService().params;if(this.btnText="试卷","doQuestion"!=this.getRootScope().selectQuestionUrlFrom&&!this.paperDataInitializedFlag&&this.selectedWork&&this.selectedWork.paperId&&(this.paperDataInitializedFlag=!0,this.getPaperDataFromService()),this.canFetchDoPaper&&!this.paperDataInitializedFlag&&!this.isFetchDoPaperLoading&&this.selectedWork&&this.selectedWork.paperId&&(this.paperDataInitializedFlag=!0,this.getPaperDataFromService()),this.paperDataInitializedFlag&&!this.paperService.startPaperTimeCollectorFlag&&this.selectedPaperId&&(this.paperService.startPaperTimeCollectorFlag=!0,this.paperService.timeCollector.checkStatusForPaper(this.selectedPaperInstanceId,this.paperStatus,this.title)),!this.canFetchDoPaper&&!this.paperDataInitializedFlag&&this.selectedWork&&this.selectedWork.paperId||!this.onLine&&!this.paperDataInitializedFlag){this.regFlag=!0,this.paperDataInitializedFlag=!0;var n=this.ngLocalStore.getTempWork();n.id==this.bigQList?(this.qsList=n.qsList,e.call(this)):this.ngLocalStore.doPaperStore.getItem(this.loginName+"/"+this.selectedWork.instanceId).then(function(n){n&&(t.ngLocalStore.setTempWork(t.loginName+"/"+t.bigQList,n),t.getScope().$apply(function(){t.qsList=n,e.call(t)}))},function(){e.call(t)})}}},{key:"getPaperDataFromService",value:function(e){var t=this;this.fetchPaper(this.getStateService().params.redoFlag,!1).then(function(n){if(t.regFlag=!0,n){if(t.getRootScope().$emit("fetch_competition_info_from_server"),t.selectedWork.publishType===t.finalData.WORK_TYPE.MATCH_WORK){var r=t.commonService.getLocalStorage(t.competitionFinalData.COMPETITION_PAPER_COUNT_DOWN_TIME),i=60*t.selectedWork.limitTime,o=r&&r[t.loginName+t.selectedWork.instanceId];r&&void 0!==o&&(i=o),t.countDownService.updateTime(i)}var a=t.ngLocalStore.getTempWork();a.id==t.bigQList&&(t.qsList=a.qsList),t.getScope().$broadcast("scroll.refreshComplete"),e()}},function(){t.regFlag=!0,t.getScope().$broadcast("scroll.refreshComplete")})}},{key:"mapStateToThis",value:function(e){var t=e.work_list_route.urlFrom,n=e.profile_user_auth.user.userId,r="olympic_math_t"===e.work_list_route.urlFrom?e.olympic_math_selected_clazz.id:"olympic_math_s"===e.work_list_route.urlFrom?n:e.wl_selected_clazz.id,i=e.wl_clazz_list_with_works,o=(e.wl_selected_clazz.id,e.wl_selected_work),a=i[r]&&(0,c.default)(i[r],{instanceId:o.instanceId}),s=a?a.paperInfo.doPaper:null,l=s&&s.history.paperId,u=s&&s.history.paperInstanceId,d=s&&s.availableTime,f=e.wl_selected_work.instanceId,p=e.oral_calculation_limittime[f],h=e.final_access_limittime[f];return{loginName:e.profile_user_auth.user.loginName,isFetchDoPaperLoading:e.wl_is_fetch_doPaper_loading,isLoadingProcessing:(e.wl_is_fetch_doPaper_loading||e.wl_is_paper_submitting||e.wl_is_post_answer_loading)&&"oral_work"!=t,isLoadingProcessingOral:"oral_work"==t,ansChanged:e.wl_is_local_ans_changed,selectedWork:o,stateUrlFrom:e.work_list_route.urlFrom,selectedPaperId:l,selectedPaperInstanceId:u,canFetchDoPaper:a&&a.canFetchDoPaper,paperStatus:s&&s.history.status.key,title:a&&a.paperInfo.paperName,bigQList:s&&s.bigQList,statusMapForQuestions:s&&s.statusMapForQuestions||[],availableTime:d,onLine:e.app_info.onLine,paperTime:13==o.publishType?h:p}}},{key:"mapActionToThis",value:function(){return{fetchPaper:this.paperService.fetchPaper,submitPaper:this.paperService.submitPaper,submitAnsAndPaper:this.paperService.submitAnsAndPaper.bind(this.paperService),postAnsToServer:this.paperService.postAnsToServer,checkAssignedQuestion:this.paperService.checkAssignedQuestion,fillSlideBoxData:this.paperService.fillSlideBoxData,deleteOralPaperLimitTime:this.workStatisticsServices.deleteLimitTimeByOralPaperId}}},{key:"goToCheck",value:function(e,t){var n=this;this.checkAssignedQuestion(e,t),this.fillSlideBoxData(this.qsList);var r=e.qsList.filter(function(e){return 0==n.statusMapForQuestions[e.id]}),i={paperId:this.selectedPaperId,paperInstanceId:this.selectedPaperInstanceId,urlFrom:this.getStateService().params.urlFrom,urlFromMark:this.getStateService().params.urlFromMark||""};r.length==e.qsList.length&&(i.isFirst="yes"),this.go("final_sprint_do_question","forward",i)}},{key:"goUrlHandle",value:function(){var e=this.getStateService().params;return"finalSprint"==e.urlFrom?void this.go("final_sprint_home"):"detail"==e.urlFrom&&"finalSprint"==e.urlFromMark?void this.go("work_detail","back",{urlFrom:"finalSprint"}):void this.go("work_detail","back")}},{key:"back",value:function(){var e=this,t=this;if(this.paperService.timeCollector.stopCollectTimeForPaper(),this.selectedWork.publishType==this.finalData.WORK_TYPE.FINAL_ACCESS&&this.paperTime&&this.paperTime.startTime)return void this.commonService.showConfirm("信息提示","<p>正在进行中，退出仍会继续计时，确定退出吗？</p>").then(function(n){n&&t.postAnsToServer().then(function(){t.goUrlHandle(),e.paperService.startPaperTimeCollectorFlag=!1,t.paperService.timeCollector.clearIntervalTime(t.selectedPaperInstanceId)})});this.ansChanged[this.selectedPaperInstanceId]?this.onLine?this.$ionicPopup.alert({title:"信息提示",template:"<p>有部分试题答案仍保存在本机，上传到服务器？</p>",okText:"确定"}).then(function(){t.postAnsToServer().then(function(){t.goUrlHandle(),e.paperService.startPaperTimeCollectorFlag=!1,t.paperService.timeCollector.clearIntervalTime(t.selectedPaperInstanceId)})}):this.$ionicPopup.alert({title:"信息提示",template:"<p>当前网络不可用,有部分试题答案仍保存在本机,请在连接好网络后,上传到服务器</p>",okText:"确定"}).then(function(){e.paperService.startPaperTimeCollectorFlag=!1,t.goUrlHandle()}):(t.goUrlHandle(),this.paperService.startPaperTimeCollectorFlag=!1)}},{key:"submitCallback",value:function(e){var t=this;console.log("提交成功后清空计时"),this.$timeout(function(){t.selectedWork.publishType!=t.finalData.WORK_TYPE.ORAL_WORK_KEYBOARD&&t.selectedWork.publishType!=t.finalData.WORK_TYPE.ORAL_WORK&&t.selectedWork.publishType!=t.finalData.WORK_TYPE.FINAL_ACCESS||t.deleteOralPaperLimitTime(t.selectedWork.paperId),t.paperService.timeCollector.stopCollectTimeForPaper(),t.paperService.startPaperTimeCollectorFlag=!1,t.paperService.timeCollector.clearIntervalTime(t.selectedPaperInstanceId);var e=t.getStateService().params;return"finalSprint"==e.urlFrom?void t.go("final_sprint_home"):"detail"==e.urlFrom&&"finalSprint"==e.urlFromMark?void t.go("final_sprint_check"):void 0},100)}},{key:"submitPaperHandle",value:function(){var e=this,t=this.selectedWork.publishType===this.finalData.WORK_TYPE.MATCH_WORK?"试卷无法改错，请仔细检查后再提交。确定提交吗？":"你确定要提交"+this.btnText+"吗？",n={title:"信息提示",msg:t},r=this;this.selectedWork.publishType===this.finalData.WORK_TYPE.FINAL_ACCESS&&(n.msg="试卷无法改错，请仔细检查后再提交。确定提交吗？"),this.commonService.showConfirm(n.title,n.msg).then(function(t){if(t){var n=void 0;if((e.selectedWork.publishType==e.finalData.WORK_TYPE.ORAL_WORK_KEYBOARD||e.selectedWork.publishType==e.finalData.WORK_TYPE.ORAL_WORK||e.selectedWork.publishType==e.finalData.WORK_TYPE.FINAL_ACCESS)&&e.paperTime){var i=Math.floor(((new Date).getTime()-e.paperTime.startTime)/1e3);n=i>60*e.selectedWork.limitTime||i<0?60*e.selectedWork.limitTime:i}r.submitAnsAndPaper(r.submitCallback.bind(r),!1,void 0,n?1e3*n:void 0)}})}}]),e}(),function(e,t,n,r,i){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}(a.prototype,"getPaperDataFromService",[u.PromiseFn],Object.getOwnPropertyDescriptor(a.prototype,"getPaperDataFromService"),a.prototype),o=a))||o;t.default=d},434:function(e,t){e.exports='<ion-view hide-nav-bar="true" class="select_question_file">\r\n    <loading-processing-v2></loading-processing-v2>\r\n    \x3c!--页眉--\x3e\r\n    <div class="bar bar-header page_header">\r\n        <button ng-click="ctrl.back()"\r\n                class="button buttons  button-clear page_header_btn_back common-back-btn">\r\n            <i class="icon ion-ios-arrow-back page_header_btn_back_i"></i>\r\n        </button>\r\n        \x3c!--试卷标题--\x3e\r\n        <h1 class="title page_header_content" ng-bind="ctrl.title"\r\n            style="margin-left: 72px;margin-right: 72px;">\r\n        </h1>\r\n    </div>\r\n\r\n\r\n\r\n    \x3c!--试卷内容--\x3e\r\n    <ion-content class="page_content">\r\n        <div ng-show="!ctrl.onLine" class="offline-alert-container">\r\n            <span class="alert-text"> <i class="icon ion-alert-circled"></i>&nbsp;无法连接网络</span>\r\n        </div>\r\n        \x3c!--  <ion-refresher pulling-text="下拉刷新..." on-refresh="ctrl.getPaperDataFromService()"></ion-refresher>--\x3e\r\n\r\n        \x3c!--每一道大题--\x3e\r\n        <div class="card page_content_box" ng-repeat="bigQ in ctrl.qsList"\r\n             ng-init="firstIndex=$index">\r\n            \x3c!--大题标题--\x3e\r\n            <div class="page_content_bigTitle"\r\n                 ng-bind="bigQ.bigQVoIndex + \'、\' + bigQ.title + \'(\'+bigQ.score+\'分)\'">\r\n            </div>\r\n            \x3c!--大题框--\x3e\r\n            <div class="list page_content_list">\r\n                \x3c!--大题下的每一小题--\x3e\r\n                <a class="item item-icon-left page_content_list_cell"\r\n                   ng-repeat="qs in  bigQ.qsList"\r\n                   ng-click="ctrl.goToCheck(bigQ,qs)">\r\n\r\n                    <span class="page_content_list_left" ng-bind="\'第\'+(ctrl.parseSeqNumToInt(qs.seqNum)+1)+\'小题\'"></span>\r\n                    <span class="page_content_list_right page_content_list_right_todo"\r\n                          ng-if="ctrl.statusMapForQuestions[qs.id]==0">未做</span>\r\n                    <span class="page_content_list_right page_content_list_right_modify"\r\n                          ng-if="ctrl.statusMapForQuestions[qs.id]==1">未改</span>\r\n                    <span class="page_content_list_right page_content_list_right_check"\r\n                          ng-if="ctrl.statusMapForQuestions[qs.id]==2">未检查</span>\r\n                    <span class="page_content_list_right page_content_list_right_ok"\r\n                          ng-if="ctrl.statusMapForQuestions[qs.id]==3">已检查</span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n    </ion-content>\r\n\r\n    \x3c!--loading图--\x3e\r\n    \x3c!--<loading-processing load-top="200"></loading-processing>--\x3e\r\n    \x3c!--<loading-processing-oral></loading-processing-oral>--\x3e\r\n    \x3c!--页脚--\x3e\r\n    <ion-footer-bar class="page_footer">\r\n        <button class="button-clear bg-calm  bar-item flex_1 button" ng-click="ctrl.submitPaperHandle()"\r\n                ng-if="ctrl.qsList&&ctrl.qsList.length>0">\r\n            <i class="icon ion-paper-airplane"></i>\r\n            提交{{ctrl.btnText}}\r\n        </button>\r\n    </ion-footer-bar>\r\n</ion-view>'},435:function(e,t,n){var r=n(436);"string"==typeof r&&(r=[[e.id,r,""]]);n(147)(r,{});r.locals&&(e.exports=r.locals)},436:function(e,t,n){t=e.exports=n(146)(),t.push([e.id,"",""])},437:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(438),c=r(l),u=n(439),d=r(u),f=n(282),p=r(f),h=n(283),g=n(432),v=(o=(0,g.View)("final_sprint_do_question",{url:"/final_sprint_do_question/:paperId/:paperInstanceId/:redoFlag/:questionIndex/:urlFrom/:urlFromMark/:isFirst",template:n(440),styles:n(441),controllerAs:"doCtrl",inject:["$log","$ionicScrollDelegate","$state","$scope","$rootScope","$timeout","commonService","paperService","finalData","$ionicSlideBoxDelegate","$ngRedux","ngLocalStore","countDownService","workStatisticsServices","$interval"]}))(a=function(){function e(){i(this,e),this.configKeyboardOnMobile(),window.ls=d.default,this.initFlags(),this.initData()}return s(e,[{key:"initFlags",value:function(){this.screenWidth=window.innerWidth,this.slideChangeDirection=0,this.slideChangeByEnterPage=!1,this.draftShow=!1,this.isSlideBoxInit=!1,this.startTimeFlag=void 0,this.stopTimer={},this.isBackModalShow=!1,this.isBackModalShowFlag=!1}},{key:"initData",value:function(){this.solidBoxInfo={currentIndex:0},this.ox=null,this.oy=null,this.initFinalSprint()}},{key:"closeBackModal",value:function(){var e=this;this.isBackModalShowFlag=!1,this.$timeout(function(){e.isBackModalShow=!1},1e3)}},{key:"initFinalSprint",value:function(){var e=this;if("yes"==this.getStateService().params.isFirst)return this.isBackModalShow=!0,void this.$timeout(function(){e.isBackModalShowFlag=!0},50)}},{key:"onReceiveProps",value:function(e,t){var n=this;!this.isSlideBoxInit&&this.slideBoxDataList.length&&(this.isSlideBoxInit=!0,this.$timeout(function(){n.$ionicSlideBoxDelegate.enableSlide(!1),$(document).trigger("click"),n.getScope().$broadcast("question.slide.change",{init:!0})},500))}},{key:"configKeyboardOnMobile",value:function(){var e=this;this.getScope().$on("keyboard.show",function(t,n){e.$timeout(function(){var t=$(n.ele),r=$(".keyboard").offset().top,i=t.offset().top,o=i+t.height()-r+60;o>0&&e.$ionicScrollDelegate.scrollBy(0,o)},50)})}},{key:"mapStateToThis",value:function(e){var t=e.profile_user_auth.user.userId,n="olympic_math_t"===e.work_list_route.urlFrom?e.olympic_math_selected_clazz.id:"olympic_math_s"===e.work_list_route.urlFrom?t:e.wl_selected_clazz.id,r="olympic_math_s"===e.work_list_route.urlFrom,i=e.wl_clazz_list_with_works,o=n,a=e.wl_selected_work,s=d.default.getTempWork().qsList,l=(0,p.default)(i[o],{instanceId:a.instanceId});if(!l)return{};var c=l.paperInfo.doPaper,u=c&&c.from,f=e.wl_selected_work.paperName,h=e.wl_selected_work.instanceId,g=e.oral_calculation_limittime[h],v=e.final_access_limittime[h];return{loginName:e.profile_user_auth.user.loginName,comeFromOlympicMathS:r,selectedWork:a,from:u,title:f,instanceId:c&&c.history.paperInstanceId,redoFlag:c&&c.redoFlag,bigQList:c&&s,bigQIndex:c&&c.bigQIndex,smallQIndex:c&&c.smallQIndex,currentSmallQ:c&&s&&s[c.bigQIndex].qsList[c.smallQIndex],slideBoxDataList:c&&c.slideBoxDataList||[],statusMapForQuestions:c&&c.statusMapForQuestions,serverIdForQuestions:c&&c.serverIdForQuestions,limitTime:a.limitTime,paperTime:13==a.publishType?v:g}}},{key:"mapActionToThis",value:function(){return{refreshSlideBoxList:this.paperService.refreshSlideBoxList,
refreshCurrentSmallQByNewSlide:this.paperService.refreshCurrentSmallQByNewSlide,doQuestionBackToSelect:this.paperService.doQuestionBackToSelect,questionCheckOkGoToSelect:this.paperService.questionCheckOkGoToSelect,checkAssignedQuestion:this.paperService.checkAssignedQuestion,fillSlideBoxData:this.paperService.fillSlideBoxData,savePaper:this.paperService.savePaper,updateOralPaperLimitTime:this.workStatisticsServices.updateLimitTimeByOralPaperId}}},{key:"getIonSlideEle",value:function(e){return $("ion-slide[data-index="+e+"]")}},{key:"isCurrentQuestionStatusNotChecked",value:function(){var e=this.slideBoxDataList[this.$ionicSlideBoxDelegate.currentIndex()];return this.statusMapForQuestions[e.displayData.id]?this.statusMapForQuestions[e.displayData.id]==this.finalData.WORK_STATUS.NOT_CHECKED:0}},{key:"currentQInArrayShow",value:function(){if(!this.statusMapForQuestions)return"";var e=this.slideBoxDataList[this.$ionicSlideBoxDelegate.currentIndex()],t=1,n=Object.keys(this.statusMapForQuestions).length;for(var r in this.statusMapForQuestions){if(r===e.displayData.id){this.currentQIndex=t;break}t++}return t+"/"+n}},{key:"onBeforeEnterView",value:function(){this.$ionicSlideBoxDelegate.currentIndex()>0&&(this.slideChangeByEnterPage=!0,this.$ionicSlideBoxDelegate.slide(0)),this.countDownService.removeCallback(this.getScope().$id)}},{key:"onCloseTouch",value:function(e){if(this.ox=283,this.oy=this.oy||e.target.offsetTop,$(e.target).removeClass("active"),$(e.target).css({opacity:0}),this.showErrorRecordFlag){var t=$(".q-error-record-btn-open");t[0].style.removeProperty("left"),t.removeClass("ng-leave").addClass("ng-enter"),t.css({visibility:"visible",right:"0px"})}else this.showErrorRecordFlag=!0}},{key:"onTouch",value:function(e){e.stopPropagation(),e.preventDefault(),this.ox=e.target.offsetLeft,this.oy=e.target.offsetTop}},{key:"onDrag",value:function(e){e.stopPropagation(),e.preventDefault();var t=e.target,n=e.gesture.deltaX,r=e.gesture.deltaY,i=window.innerWidth-$(t).width(),o=window.innerHeight-$(t).height()-44,a=this.ox+n,s=this.oy+r;a<0?t.style.left="0px":a>i?this.handleImgStop(t):t.style.left=this.ox+n+"px",t.style.top=s<44?"44px":s>o?o+"px":this.oy+r+"px"}},{key:"handleImgStop",value:function(e){var t=$(".q-error-record-btn-close");e.style.removeProperty("left"),$(e).removeClass("ng-enter").addClass("ng-leave"),t.length&&($(t)[0].style.top=e.style.top,$(t).addClass("active"))}},{key:"onAfterEnterView",value:function(){this.startTimeFlag=!!this.paperTime}},{key:"onBeforeLeaveView",value:function(){this.stopTimer.timer&&this.$interval.cancel(this.stopTimer.timer)}},{key:"saveCurrentQAns",value:function(){var e=this.bigQList[this.bigQIndex].qsList[this.smallQIndex];this.handleSpecial();var t=this.getAndSaveCurrentQNewAns(e,this.getIonSlideEle(this.$ionicSlideBoxDelegate.currentIndex()),!1);t.hasChangeAnsFlag&&this.savePaper(e,!1,t.isAllInputBoxesEmpty,t.ansStrArray)}},{key:"back",value:function(e){if(this.draftShow)return this.draftShow=!1,void this.getRootScope().$broadcast("draft.hide");if(!1===$(".keyboard")[0].hidden&&"none"!=$(".keyboard")[0].style.display&&!e)return void this.getScope().$broadcast("keyboard.hide");this.saveCurrentQAns(),this.doQuestionBackToSelect();var t=this.$ngRedux.getState().wl_selected_work,n={paperId:t.paperId,paperInstanceId:t.instanceId,redoFlag:this.redoFlag};"finalSprint"==this.getStateService().params.urlFrom&&(n.urlFrom="finalSprint"),"detail"==this.getStateService().params.urlFrom&&"finalSprint"==this.getStateService().params.urlFromMark&&(n.urlFrom="detail",n.urlFromMark="finalSprint"),this.getRootScope().selectQuestionUrlFrom="doQuestion",this.go("final_sprint_select_question","back",n)}},{key:"handleDraft",value:function(){"none"===$(".draft_container").css("display")?(console.log("draft.show"),this.getScope().$root.$broadcast("draft.show"),this.draftShow=!0):(console.log("draft.hide"),this.getScope().$root.$broadcast("draft.hide"),this.draftShow=!1)}},{key:"findNextNoCheckedQ",value:function(){for(var e=this.bigQList.length,t=-1,n=-1,r=this.statusMapForQuestions,i=0;i<e;i++){for(var o=this.bigQList[i],a=0;a<o.qsList.length;a++)if(2===r[o.qsList[a].id]){t=i,n=a;break}if(n>-1)break}if(t>-1){var s=this.bigQList[t],l=this.bigQList[t].qsList[n];return this.checkAssignedQuestion(s,l),void this.fillSlideBoxData(this.bigQList,!0,this.$ionicSlideBoxDelegate.currentIndex())}var c=this.$ngRedux.getState().wl_selected_work,u={paperId:c.paperId,paperInstanceId:c.instanceId,redoFlag:this.redoFlag};"finalSprint"==this.getStateService().params.urlFrom&&(u.urlFrom="finalSprint"),"detail"==this.getStateService().params.urlFrom&&(u.urlFrom="detail",u.urlFromMark="finalSprint"),this.go("final_sprint_select_question","back",u)}},{key:"checkAnswer",value:function(){this.handleSpecial();var e=this.bigQList[this.bigQIndex].qsList[this.smallQIndex],t=this.getAndSaveCurrentQNewAns(e,this.getIonSlideEle(this.$ionicSlideBoxDelegate.currentIndex()),!0);t.canModifyStatus&&this.savePaper(e,!0,t.isAllInputBoxesEmpty,t.ansStrArray),this.questionCheckOkGoToSelect(),this.findNextNoCheckedQ()}},{key:"getAndSaveCurrentQNewAns",value:function(e,t,n){var r=e.inputList,i=[],o=!0,a=!1,s=function(e){return e==h.VERTICAL_CALC_SCOREPOINT_TYPE||e==h.VERTICAL_ERROR_SCOREPOINT_TYPE||e==h.VERTICAL_FILLBLANKS_SCOREPOINT_TYPE};return(0,c.default)(r,function(e){var n={answer:e.openStyle?e.answer:"",uuid:""},r={};(0,c.default)(e.spList,function(i,l){n.uuid=i.scorePointQbuId;var c=t.find("#"+i.inputBoxUuid);if(s(i.type)){var u=angular.element(c).scope();return i.matrix=u.getVerticalAnswerMatrix(i.inputBoxUuid),n.answer+=JSON.stringify([{id:i.inputBoxUuid,matrix:i.matrix}]),a=!0,void(o&&(o=!u.isAnswerMatrixModified(i.matrix,i.inputBoxUuid)))}var d="";c&&0!=c.length?d=angular.element(c).scope().textContent.expr?angular.element(c).scope().textContent.expr:$(c).val():console.error("出题bug,试题内容和答案所映射的输入框不匹配!输入框id:"+i.inputBoxUuid),d&&(o=!1),e.openStyle?r[i.label]=d:0==l?n.answer=d:n.answer+="#"+d,i.inputBoxStuAns=d},this),e.answer==n.answer||e.openStyle?e.answer!=JSON.stringify(r)&&e.openStyle&&(a=!0,e.answer=n.answer=JSON.stringify(r)):(a=!0,e.answer=n.answer),i.push(n)},this),this.ngLocalStore.setTempWork(this.$ngRedux.getState().wl_selected_work.instanceId,this.bigQList),this.ngLocalStore.doPaperStore.setItem(this.loginName+"/"+this.$ngRedux.getState().wl_selected_work.instanceId,this.bigQList),{ansStrArray:i,isAllInputBoxesEmpty:o,hasChangeAnsFlag:a,canModifyStatus:n}}},{key:"slideChange",value:function(e){var t=this.bigQList[this.bigQIndex].qsList[this.smallQIndex];if(this.slideChangeByEnterPage)return void(this.slideChangeByEnterPage=!1);var n=this.slideChangeDirection?(this.$ionicSlideBoxDelegate.currentIndex()+2)%3:(this.$ionicSlideBoxDelegate.currentIndex()+1)%3,r=this.getIonSlideEle(n),i=this.getAndSaveCurrentQNewAns(t,r,!1);i.hasChangeAnsFlag&&this.savePaper(t,!1,i.isAllInputBoxesEmpty,i.ansStrArray);var o={bigQIndex:this.bigQIndex,smallQIndex:this.smallQIndex},a=this.slideBoxDataList[e].displayData;o.bigQIndex=a.bigQArrayIndex,o.smallQIndex=a.smallQArrayIndex,console.log(o),this.refreshCurrentSmallQByNewSlide(o),this.refreshSlideBoxList(e),this.solidBoxInfo.currentIndex=this.$ionicSlideBoxDelegate.currentIndex(),this.$ionicScrollDelegate.scrollTop()}},{key:"handleSpecial",value:function(){this.getScope().$root.$broadcast("keyboard.hide.change.question"),$(document).trigger("click"),this.draftShow=!1,this.getScope().$root.$broadcast("draft.hide"),this.getScope().$broadcast("question.slide.change",{init:!1})}},{key:"goNextQuestion",value:function(){this.debounce()||(this.slideChangeDirection=1,this.handleSpecial(),this.$ionicSlideBoxDelegate.next())}},{key:"previousQuestion",value:function(){this.debounce()||(this.slideChangeDirection=0,this.handleSpecial(),this.$ionicSlideBoxDelegate.previous())}},{key:"debounce",value:function(){this.lastInputTime||(this.lastInputTime=(new Date).getTime());var e=(new Date).getTime(),t=e-this.lastInputTime;return this.lastInputTime=e,console.log(t),t<250&&0!=t}},{key:"getCountDownStartTime",value:function(){var e=0;if(this.paperTime||(e=60*Number(this.limitTime),this.updateOralPaperLimitTime(this.selectedWork.instanceId,(new Date).getTime())),this.paperTime){var t=(new Date).getTime();e=60*Number(this.limitTime)-Math.round((Number(t)-Number(this.paperTime.startTime))/1e3),e<0&&(e=0)}return e}},{key:"timeCountCallBack",value:function(e){(!this.paperTime||this.paperTime&&!this.paperTime.countDownTimer)&&this.updateOralPaperLimitTime(this.selectedWork.paperId,null,this.stopTimer.timer)}},{key:"timeEndCallBack",value:function(){var e=this;this.paperTime&&(this.spentTime=60*Number(this.limitTime),this.commonService.showAlert("提示","答题时间已到，返回总览页面提交。").then(function(){e.back()}))}},{key:"timeRestCallback",value:function(e){this.spentTime=60*Number(this.limitTime)-e}},{key:"startTimer",value:function(){this.startTimeFlag=!0}},{key:"showNormalTitle",value:function(){return"true"==this.redoFlag||this.currentSmallQ&&this.selectedWork&&this.selectedWork.publishType!=this.finalData.WORK_TYPE.MATCH_WORK&&this.selectedWork.publishType!=this.finalData.WORK_TYPE.ORAL_WORK&&this.selectedWork.publishType!=this.finalData.WORK_TYPE.ORAL_WORK_KEYBOARD&&this.selectedWork.publishType!=this.finalData.WORK_TYPE.FINAL_ACCESS}},{key:"isOralWork",value:function(){return this.selectedWork&&(this.selectedWork.publishType==this.finalData.WORK_TYPE.ORAL_WORK_KEYBOARD||this.selectedWork.publishType==this.finalData.WORK_TYPE.ORAL_WORK||this.selectedWork.publishType==this.finalData.WORK_TYPE.FINAL_ACCESS)}}]),e}())||a;t.default=v},438:function(e,t){function n(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););return e}function r(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function i(e,t){var n=$(e)||u(e)?r(e.length,String):[],i=n.length,o=!!i;for(var a in e)!t&&!x.call(e,a)||o&&("length"==a||s(a,i))||n.push(a);return n}function o(e,t){return e&&R(e,t,m)}function a(e){if(!l(e))return T(e);var t=[];for(var n in Object(e))x.call(e,n)&&"constructor"!=n&&t.push(n);return t}function s(e,t){return!!(t=null==t?y:t)&&("number"==typeof e||k.test(e))&&e>-1&&e%1==0&&e<t}function l(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||I)}function c(e,t){return($(e)?n:F)(e,"function"==typeof t?t:b)}function u(e){return f(e)&&x.call(e,"callee")&&(!Q.call(e,"callee")||C.call(e)==_)}function d(e){return null!=e&&h(e.length)&&!p(e)}function f(e){return v(e)&&d(e)}function p(e){var t=g(e)?C.call(e):"";return t==w||t==S}function h(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=y}function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){return!!e&&"object"==typeof e}function m(e){return d(e)?i(e):a(e)}function b(e){return e}var y=9007199254740991,_="[object Arguments]",w="[object Function]",S="[object GeneratorFunction]",k=/^(?:0|[1-9]\d*)$/,I=Object.prototype,x=I.hasOwnProperty,C=I.toString,Q=I.propertyIsEnumerable,T=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),F=function(e,t){return function(n,r){if(null==n)return n;if(!d(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Object(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}(o),R=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}(),$=Array.isArray;e.exports=c},439:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(151),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(){r(this,e),window.paperStore=this.paperStore=a.default.createInstance({name:"PAPER_STORE"}),window.doPaperStore=this.doPaperStore=a.default.createInstance({name:"DO_PAPER_STORE"}),window.paperAnsStore=this.paperAnsStore=a.default.createInstance({name:"PAPER_ANS_STORE"}),window.workListStore=this.workListStore=a.default.createInstance({name:"WORK_LIST_STORE"}),window.gameListStore=this.gameListStore=a.default.createInstance({name:"GAME_LIST_STORE"}),window.diagnoseKnowledgeQStore=this.diagnoseKnowledgeQStore=a.default.createInstance({name:"DIAGNOSE_KNOWLEDGE_Q"}),this.tempWorkContentInfo={id:null,qsList:null},this.stateWorkContentInfo={id:null,qsList:null},this.diagnoseKnowledgeQContentInfo={id:null,question:null,answer:null},this.localforage=a.default,this.tempPaperContentInfo={id:null,data:null}}return i(e,[{key:"setTempWork",value:function(e,t){this.tempWorkContentInfo.id=e,this.tempWorkContentInfo.qsList=t}},{key:"getTempWork",value:function(){return this.tempWorkContentInfo}},{key:"setStateWork",value:function(e,t){this.stateWorkContentInfo.id=e,this.stateWorkContentInfo.qsList=t}},{key:"getStateWork",value:function(){return this.stateWorkContentInfo}},{key:"setTempPaper",value:function(e,t){this.tempPaperContentInfo.id=e,this.tempPaperContentInfo.data=t}},{key:"getTempPaper",value:function(){return this.tempPaperContentInfo}},{key:"setDiagnoseKnowledgeQ",value:function(e,t,n){this.diagnoseKnowledgeQContentInfo.id=e,this.diagnoseKnowledgeQContentInfo.question=t,this.diagnoseKnowledgeQContentInfo.answer=n}},{key:"getDiagnoseKnowledgeQ",value:function(){return this.diagnoseKnowledgeQContentInfo}},{key:"getLocalForage",value:function(){return this.localforage}},{key:"clear",value:function(){this.localforage.clear()}}]),e}(),l=new s;t.default=l},440:function(e,t){e.exports='<ion-view hide-nav-bar="true" class="do_question_file" cache-view="false">\r\n\r\n    <div class="bar bar-header " style="background: #d2f7ef!important;">\r\n        <button ng-click="doCtrl.back(true)" class="button buttons  button-clear common-back-btn">\r\n            <i class="icon ion-ios-arrow-back"></i>&nbsp;总览\r\n        </button>\r\n        <h1 class="title"\r\n            style="font-family: \'Microsoft YaHei\';margin-left: 72px;margin-right: 72px;"\r\n            ng-if="doCtrl.showNormalTitle()"\r\n            ng-bind="doCtrl.title">\r\n        </h1>\r\n\r\n        <div class="button button-clear dqf_draft"\r\n             ng-if="doCtrl.showNormalTitle()"\r\n             ng-click="doCtrl.handleDraft()">\r\n\r\n            <div ng-if="!doCtrl.draftShow" style="width: 55px;">\r\n                <img ng-src="{{$root.loadImg(\'do_question/draft.png\')}}" alt="" style="width: 40px">\r\n                <p style="font-size: 13px; line-height: 16px; margin-top: -6px">草稿</p>\r\n            </div>\r\n\r\n            <div ng-if="doCtrl.draftShow"\r\n                 style="font-size: 17px;display: -webkit-flex;display: flex;-webkit-align-items:center;align-items: center;">\r\n                <i>草稿&nbsp;</i>\r\n                <img ng-src="{{$root.loadImg(\'do_question/close_draft.png\')}}" alt="" style="width: 20px;height: 20px">\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="keyboard" style="z-index: 5000"></div>\r\n    \x3c!--<div class="simplify-keyboard" style="z-index: 5000"></div>--\x3e\r\n\r\n    <draft style="position: relative;"></draft>\r\n\r\n    <ion-slide-box on-slide-changed="doCtrl.slideChange($index)"\r\n                   ng-if="doCtrl.slideBoxDataList.length"\r\n                   does-continue="true"\r\n                   show-pager="false"\r\n                   class="">\r\n\r\n        <ion-slide ng-repeat="currentQ in doCtrl.slideBoxDataList track by $index" auto-height="30"\r\n                   slideBoxCurrentIndex="{{doCtrl.solidBoxInfo.currentIndex}}" ng-c>\r\n            <ion-content  class="do_question_content"\r\n                          ng-style="{top:(doCtrl.getScope().$root.platform.IS_IPHONE||doCtrl.getScope().$root.platform.IS_IPAD)?\'20px\':0}">\r\n\r\n                <div class="edit-section do-question-area">\r\n                    <loading-processing load-top="100"></loading-processing>\r\n                    \x3c!--大题小题题干--\x3e\r\n                    <div class="big_q_title">\r\n                        <img ng-src="{{$root.loadImg(\'do_question/q_title_bg.png\')}}" alt=""/>\r\n                        <div class="big_q_title_text">\r\n                            <div class="title_left">\r\n                                <span style="font-family: \'Microsoft YaHei\'" ng-if="currentQ"\r\n                                      ng-bind="doCtrl.commonService.convertToChinese(+currentQ.displayData.bigQseqNum+1)+\'、\'+currentQ.displayData.bigQTitle"></span>\r\n                            </div>\r\n                            <div class="title_right">\r\n                                <span style="font-family: \'Microsoft YaHei\'" ng-if="currentQ"\r\n                                      ng-bind="\' | 第\'+(+currentQ.displayData.seqNum+1)+\'小题\'"></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="error-q-records-wrap"\r\n                         error-q-records\r\n                         small-q="doCtrl.currentSmallQ"\r\n                         instance-id="doCtrl.instanceId"\r\n                         ng-click="doCtrl.saveCurrentQAns()"\r\n                         ng-if="doCtrl.redoFlag===\'true\'&&!doCtrl.comeFromOlympicMathS">\r\n                        <img ng-src="{{$root.loadImg(\'do_question/do-q-error-records.png\')}}" alt=""/>\r\n                        <span>查看出错记录</span>\r\n                        <i class="icon ion-chevron-right"></i>\r\n                    </div>\r\n                    \x3c!--show-type:展示类型为=> 做题:\'doQuestion\', 批改:\'correct\', 其他:undefined   --\x3e\r\n                    <div class="editor for-content do_question_text"\r\n                         ng-style="{marginTop:(doCtrl.getScope().$root.platform.IS_IPAD)?\'40px\':0}"\r\n                         ng-show="!doCtrl.getScope().$root.isLoadingProcessing"\r\n                         compile-html="currentQ.displayData.qContext"\r\n                         current_q_input="currentQ.displayData.inputList"\r\n                         possible-units="currentQ.displayData.possibleUnits"\r\n                         question="currentQ.displayData"\r\n                         show-type="doQuestion">\r\n                    </div>\r\n                    <div class="place-holder"></div>\r\n                    \x3c!--\r\n                         on-touch="doCtrl.onTouch($event)"\r\n                         on-drag="doCtrl.onDrag($event);"\r\n\r\n\r\n                    --\x3e\r\n\r\n                </div>\r\n            </ion-content>\r\n\r\n        </ion-slide>\r\n    </ion-slide-box>\r\n\r\n    <div class="button button-primary do_question_check_over"\r\n         ng-if="doCtrl.from==\'select\' && doCtrl.isCurrentQuestionStatusNotChecked()"\r\n         ng-click="doCtrl.checkAnswer()">\r\n        <img ng-src="{{$root.loadImg(\'do_question/check_over.png\')}}" alt=""/>\r\n    </div>\r\n\r\n    <div class="bar bar-footer " style="font-size: 20px;z-index: 2000;background: #e6e9ec">\r\n        <button class="button-clear flex_1"\r\n                ng-click="doCtrl.currentSmallQ.isFirstOfAllQ?\'\':doCtrl.previousQuestion()"\r\n                ng-style="{color: doCtrl.currentSmallQ.isFirstOfAllQ?\'#33cd5f !important\':\' #4a6b9d\'}">\r\n            <i class="icon   ion-arrow-left-b "></i>\r\n            <span ng-if="doCtrl.redoFlag === \'false\'">上一题</span>\r\n            <span ng-if="doCtrl.redoFlag === \'true\'">上一错题</span>\r\n        </button>\r\n        <div class="flex_1" style="color: #4a6b9d;text-align: center;line-height: 35px;"\r\n             ng-if="doCtrl.selectedWork.publishType===doCtrl.finalData.WORK_TYPE.MATCH_WORK">\r\n            <span ng-bind="doCtrl.currentQInArrayShow()"></span>\r\n        </div>\r\n        <button class="button-clear flex_1"\r\n                ng-click="doCtrl.currentSmallQ.isLastOfAllQ ? doCtrl.back(): doCtrl.goNextQuestion()"\r\n                style="color:#4a6b9d">\r\n            \x3c!-- ng-click="doCtrl.currentSmallQ.isLastOfAllQ? \'\':doCtrl.goNextQuestion()"\r\n             ng-style="{color: doCtrl.currentSmallQ.isLastOfAllQ?\'#33cd5f !important\':\' #4a6b9d\'}">--\x3e\r\n            <span ng-if="doCtrl.redoFlag === \'false\' && !doCtrl.currentSmallQ.isLastOfAllQ">下一题</span>\r\n            <span ng-if="doCtrl.redoFlag === \'true\' && !doCtrl.currentSmallQ.isLastOfAllQ">下一错题</span>\r\n            <span ng-if="doCtrl.currentSmallQ.isLastOfAllQ">总览.提交</span>\r\n            <i class="icon  ion-arrow-right-b"></i>\r\n        </button>\r\n    </div>\r\n    <div class="back-modal" ng-if="doCtrl.isBackModalShow">\r\n        <div class="back-modal-content diagnose-popup-bounce" ng-if="doCtrl.isBackModalShowFlag">\r\n            <img ng-src="{{$root.loadFinalSprintImg(\'final_sprint_home/back-modal-header.png\')}}" alt="" class="modal-content-header">\r\n            <div class="text-box">\r\n                <p>本套题为《期末全真模拟密卷》</p>\r\n                <p>，请认真作答！</p>\r\n            </div>\r\n            <div class="btn-box">\r\n                <img ng-src="{{$root.loadFinalSprintImg(\'final_sprint_home/back-modal-btn1.png\')}}" alt="" ng-click="doCtrl.closeBackModal()">\r\n                <img ng-src="{{$root.loadFinalSprintImg(\'final_sprint_home/back-modal-btn2.png\')}}" alt="" ng-click="doCtrl.back()">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ion-view>\r\n'},441:function(e,t,n){var r=n(442);"string"==typeof r&&(r=[[e.id,r,""]]);n(147)(r,{});r.locals&&(e.exports=r.locals)},442:function(e,t,n){t=e.exports=n(146)(),t.push([e.id,"",""])},443:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i,o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(282),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(432),u=(i=(0,c.View)("final_sprint_work_detail",{url:"/final_sprint_work_detail/:paperId/:paperInstanceId/:urlFrom",template:n(444),styles:n(445),inject:["$scope","$rootScope","$ngRedux","$state","$ionicScrollDelegate","$ionicPopup","$ionicHistory","paperService","workStatisticsServices","ngLocalStore","commonService","finalData","olympicMathService","subHeaderService"]}))(o=function(){function e(){r(this,e)}return a(e,[{key:"onReceiveProps",value:function(){this.ensurePaperFetched()}},{key:"onUpdate",value:function(){this.paperFetched=!1,this.retFlag=!1}},{key:"loadCallback",value:function(){this.getScope().$broadcast("scroll.refreshComplete")}},{key:"pullRefresh",value:function(){var e=this;this.fetchPaper("false",!0,this.loadCallback.bind(this)).then(function(){if(e.paper&&e.paper.bigQList){var t=e.ngLocalStore.getStateWork();e.parseWasteTime(e.paper.wasteTime),t.id==e.paper.bigQList&&(e.qsList=t.qsList)}})}},{key:"onAfterEnterView",value:function(){}},{key:"initFlags",value:function(){this.paperFetched=!1,this.tabFlags={WORK_DETAIL:"work_detail",WORK_STAR:"work_star"},this.onLine=!0,this.currentTab=this.tabFlags.WORK_DETAIL,this.qsList=[],this.alertTipInfo={workDetail:this.commonService.getLocalStorage(this.getState().profile_user_auth.user.userId+"workDetail")},this.noTip={status:!1},this.retFlag=!1}},{key:"initData",value:function(){this.isIos=this.getRootScope().platform.IS_IPHONE||this.getRootScope().platform.IS_IPAD,this.WORK_TYPE=this.finalData.WORK_TYPE}},{key:"ensurePaperFetched",value:function(){var e=this;!this.paperFetched&&!this.isLoadingProcessing&&this.selectedWork&&this.selectedWork.paperId&&(this.paperFetched=!0,this.fetchPaper("false",!0,null).then(function(t){if(e.retFlag=!0,t&&e.paper&&e.paper.bigQList){var n=e.ngLocalStore.getStateWork();e.parseWasteTime(e.paper.wasteTime),n.id==e.paper.bigQList&&(e.qsList=n.qsList)}})),!this.paperFetched&&!this.onLine&&this.selectedWork&&this.selectedWork.paperId&&(this.paperFetched=!0,this.ngLocalStore.paperStore.getItem(this.loginName+"/"+this.selectedWork.instanceId).then(function(t){e.retFlag=!0,e.getScope().$apply(function(){return e.qsList=t})}))}},{key:"parseWasteTime",value:function(e){e=parseInt(e);var t=Math.floor(e/60),n=e%60;this.paper.wasteTime={minutes:t,seconds:n}}},{key:"showQ",value:function(e,t){e.showQFlag=!e.showQFlag,t.stopPropagation()}},{key:"hideAllQ",value:function(){$.each(this.qsList,function(e,t){$.each(t.qsList,function(e,t){console.log("smallQStuAnsMapList",t.smallQStuAnsMapList),t.smallQStuAnsMapList||(t.smallQStuAnsMapList={}),$.each(t.smallQStuAnsMapList,function(e,t){t.showQFlag=!1})})})}},{key:"getScrollPosition",value:function(){var e=this.getScope();e.moveData=this.$ionicScrollDelegate.getScrollPosition().top,e.moveData>=250?$(".scrollToTop").fadeIn():e.moveData<250&&$(".scrollToTop").fadeOut()}},{key:"scrollTop",value:function(){this.$ionicScrollDelegate.scrollTop(!0)}},{key:"redoWork",value:function(){var e=this.commonService,t={paperId:this.selectedWork.paperId,paperInstanceId:this.selectedWork.instanceId};if(this.selectedWork.failMsg&&(this.selectedWork.failMsg=""),this.getPaperStatus(t,!0),this.selectedWork.failMsg)return void e.alertDialog(this.selectedWork.failMsg,1500);if(-1==this.selectedWork.status)return void e.showAlert("信息提示","该作业已经被老师删除").then(function(){this.workList.splice($index,1)});if(3==this.selectedWork.status)return void $ionicPopup.alert({title:"信息提示",template:"<p>您上次提交的答案还在批改中，等批改结果出来后，再进行改错！</p>",okText:"确定"});this.selectedWork.status;var n={paperId:this.selectedWork.paperId,paperInstanceId:this.selectedWork.instanceId,redoFlag:"true",urlFrom:"detail"};"finalSprint"==this.getStateService().params.urlFrom&&(n.urlFromMark="finalSprint"),this.getRootScope().selectQuestionUrlFrom="detail",this.go("final_sprint_select_question",n)}},{key:"mapActionToThis",value:function(){return{changeUrlFromForStore:this.olympicMathService.changeUrlFromForStore.bind(this.olympicMathService),fetchPaper:this.paperService.fetchPaper,getPaperStatus:this.workStatisticsServices.getPaperStatus}}},{key:"mapStateToThis",value:function(e){var t=e.profile_user_auth.user.userId,n=e.wl_selected_clazz.id,r="olympic_math_s"===e.work_list_route.urlFrom,i=e.wl_clazz_list_with_works[n],o=e.wl_selected_work,a=e.profile_user_auth.user.name,s=i&&(0,l.default)(i,{instanceId:o.instanceId});if(!s)return{};var c=e.wl_selected_clazz.name;return{isLoadingProcessing:e.wl_is_fetch_paper_loading,comeFromOlympicMathS:r,urlFrom:e.work_list_route.urlFrom,clzName:c,selectedWork:o,isFinalSprint:!0,paper:s&&s.paperInfo.paper,canFetchPaper:s&&s.canFetchPaper,title:s&&s.paperInfo.paper&&s.paperInfo.paper.title,loginName:e.profile_user_auth.user.loginName,userName:a,userId:t,user:e.profile_user_auth.user,onLine:e.app_info.onLine}}},{key:"back",value:function(){if("finalSprint"==this.getStateService().params.urlFrom)return void this.go("final_sprint_check")}},{key:"onBeforeEnterView",value:function(){this.initFlags(),this.initData(),this.subHeaderService.save({id:"oral_calculation_work_detail_subheader",activeEle:"oral_calculation_after_correct"})}}]),e}())||o;t.default=u},444:function(e,t){
e.exports='<ion-view hide-nav-bar="true" class="work_detail_file">\r\n    <ion-header-bar class="page_header" style="background: #d2f7ef" align-title="center">\r\n        <button class="button buttons  button-clear common-back-btn" ng-click="ctrl.back()">\r\n            <i class="icon ion-ios-arrow-back"></i>\r\n        </button>\r\n        <h1 class="title"\r\n            ng-if="ctrl.retFlag"\r\n            style="color:#4a6b9d;font-weight: bold;margin-left: 72px;margin-right: 72px;">\r\n            {{ctrl.selectedWork.paperName}}\r\n        </h1>\r\n        <div class="title spinner-container" ng-show="ctrl.isLoadingProcessing && !ctrl.retFlag"\r\n             style="display: flex;display: -webkit-flex;justify-content: center;-webkit-justify-content:center">\r\n            <ion-spinner icon="ripple"></ion-spinner>\r\n            <span class="spinner-text">正在加载数据....</span>\r\n        </div>\r\n    </ion-header-bar>\r\n    <div>\r\n        <sub-header id="work_detail_subheader">\r\n            <div class="subheader-item" id="work_detail">\r\n                <span ng-bind="ctrl.userName" class="sub-title">姓名</span>\r\n            </div>\r\n        </sub-header>\r\n        \x3c!--作业详情--\x3e\r\n        <ion-content class="has-header has-subheader"\r\n                     overflow-scroll="true"\r\n                     on-scroll="ctrl.getScrollPosition()"\r\n                     ng-class="{\'ios-content\':ctrl.isIos}">\r\n            <ion-refresher pulling-text="下拉刷新..." on-refresh="ctrl.pullRefresh()"></ion-refresher>\r\n            <div ng-if="!ctrl.isLoadingProcessing" style="height: 100%;">\r\n                \x3c!--作业详情列--\x3e\r\n                <div style="height: 100%;">\r\n                    <div class="paper-title-box" ng-show="ctrl.title && ctrl.retFlag">\r\n                        <img ng-src="{{$root.loadImg(\'work/work_detail_bg.png\')}}" width="100%" height="100%">\r\n                        <img ng-src="{{$root.loadImg(\'work/work_detail_bg_1.png\')}}" class="bg_t_photo">\r\n                        <img ng-src="{{$root.loadImg(\'work/work_detail_bg_2.png\')}}" class="bg_file">\r\n                        <div class="title-text-box">\r\n                            <div class="text-box">\r\n                                <div class="row">\r\n                                    <div class="col">\r\n                                        <label class="text-title">\r\n                                            <span ng-bind="ctrl.clzName"></span>\r\n                                        </label>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="row">\r\n                                    <div class="col ">\r\n                                        <span class="deserve-score" ng-bind="\'首次做: \'"></span>\r\n                                        <span>\r\n                                        <span class="actual-score" ng-bind="ctrl.paper.firstScore"></span>\r\n                                        <span class="deserve-score" ng-bind="\'分\'"></span>\r\n                                    </span>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="row">\r\n                                    <div class="col ">\r\n                                        <span class="deserve-score" ng-bind="\'首次用时: \'"></span>\r\n                                        <span>\r\n                                        <span class="actual-score" ng-bind="ctrl.paper.wasteTime.minutes"></span>\r\n                                        <span class="deserve-score" ng-bind="ctrl.paper.wasteTime.seconds===0?\'分钟\':\'分\'"></span>\r\n                                        <span ng-if="ctrl.paper.wasteTime.seconds!==0" class="actual-score" ng-bind="ctrl.paper.wasteTime.seconds"></span>\r\n                                        <span ng-if="ctrl.paper.wasteTime.seconds!==0" class="deserve-score" ng-bind="\'秒\'"></span>\r\n                                    </span>\r\n                                    </div>\r\n\r\n                                </div>\r\n                                <div class="row" ng-if="ctrl.paper.reworkTimes>0">\r\n                                    <div class="col ">\r\n                                        <span class="deserve-score" ng-bind="\'改错次数: \'"></span>\r\n                                        <span>\r\n                                        <span class="actual-score" ng-bind="ctrl.paper.reworkTimes||0"></span>\r\n                                        <span class="deserve-score" ng-bind="\'次\'"></span>\r\n                                    </span>\r\n                                    </div>\r\n\r\n                                </div>\r\n                                <div class="row" ng-if="ctrl.paper.reworkTimes>0">\r\n                                    <div class="col ">\r\n                                        <span class="deserve-score" ng-bind="\'改错后: \'"></span>\r\n                                        <span>\r\n                                        <span class="actual-score" ng-bind="ctrl.paper.latestScore"></span>\r\n                                        <span class="deserve-score" ng-bind="\'分\'"></span>\r\n                                    </span>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="row">\r\n                                    <div class="col">\r\n                                        <span ng-bind="\'首次提交: \'+ctrl.paper.firstSubmitTime"></span>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="row" ng-if="ctrl.paper.reworkTimes>0">\r\n                                    <div class="col">\r\n                                        <span ng-bind="\'最近提交: \'+ctrl.paper.latestSubmitTime"></span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    \x3c!--showTipType为1 显示整个paper --\x3e\r\n                    <div ng-repeat="bigQ in ctrl.qsList track by $index" ng-init="bigIndex = $index; bigLast = $last">\r\n                        \x3c!--大题名称和分数--\x3e\r\n                        <div class="big-q">\r\n                            <div style="text-overflow: ellipsis;overflow: hidden;white-space: nowrap;">\r\n                                <label class="big-q-title-adapt">\r\n                                    <span ng-bind="bigQ.bigQVoIndex+\'、\'+bigQ.title"></span>\r\n                                    &nbsp;\r\n                                    <span ng-bind="\'(\'+bigQ.score+\'分)\'"></span>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        \x3c!--大题下的小题列表--\x3e\r\n                        <div ng-repeat="record in bigQ.qsList track by record.id" ng-init="smallQIndex = $index"\r\n                             ng-style="{\'margin-bottom\':$last&&bigLast?\'140px\':\'\'}"\r\n                             ng-class="{\'last-samllQ\':$last&&bigLast}">\r\n                            <div class="image-type-question">\r\n                                <div class="question-content card card-better small_q_bg">\r\n\r\n                                    \x3c!--改错列--\x3e\r\n                                    <div ng-repeat="(key,doneInfo) in record.smallQStuAnsMapList track by $index"\r\n                                         ng-init="doneIndex=$index;doneLast=$last"\r\n                                         ng-class="doneInfo.showQFlag?\'open\':\'\'" class="accordion">\r\n                                        <div class="smallq-title"\r\n                                             ng-class="{\'smallq-title-first\':doneIndex==0,\'smallq-title-more\':doneIndex>=1}">\r\n                                            <div class="text-div-adapt" ng-click="ctrl.showQ(doneInfo,$event)">\r\n                                                <label class="text-adapt">\r\n                                                <span ng-bind="\'第\'+(+record.seqNum+1)+\'题\'"\r\n                                                      ng-class="{\'done-more\':doneIndex>=1}"></span>\r\n                                                    <span ng-if="doneIndex==0" ng-bind="\'首次做: \'"></span>\r\n                                                    <span ng-if="doneIndex>=1" ng-bind="\'改错后: \'"></span>\r\n                                                    <span class="correct-icons">\r\n                                                    <img ng-show="doneInfo.passFlag==0"\r\n                                                         ng-src="{{$root.loadImg(\'other/icon_no.png\')}}">\r\n                                                    <img ng-show="doneInfo.passFlag==1"\r\n                                                         ng-src="{{$root.loadImg(\'other/icon_yes2.png\')}}">\r\n                                                    <img ng-show="doneInfo.passFlag==2"\r\n                                                         ng-src="{{$root.loadImg(\'other/icon_yes3.png\')}}">\r\n                                                    <img ng-show="doneInfo.score===-1"\r\n                                                         ng-src="{{$root.loadImg(\'other/grading-icon.png\')}}">\r\n                                                </span>\r\n                                                    <span class="actual-score" ng-bind="doneInfo.score"\r\n                                                          ng-show="doneInfo.passFlag!=3"></span>\r\n                                                    <span class="actual-score" ng-bind="\'?\'"\r\n                                                          ng-show="doneInfo.passFlag==3"></span>\r\n                                                    <span class="deserve-score" ng-bind="\'/\'+record.score+\'分\'"></span>\r\n                                                </label>\r\n                                            </div>\r\n                                            <div class="img-align-right">\r\n                                                <span ng-click="ctrl.showQ(doneInfo,$event)" ng-class="{\'final_access_open_btn\':ctrl.selectedWork.publishType==ctrl.WORK_TYPE.FINAL_ACCESS}">\r\n                                                    <img ng-src="{{$root.loadImg(\'other/open.png\')}}" class="row-icon">\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div compile-html="record.qContext" show_type="correct"\r\n                                             current_q_input="doneInfo.inputList"\r\n                                             ng-if="doneInfo.showQFlag" class="qcontext">\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </ion-content>\r\n        \x3c!--回到页面顶部按钮--\x3e\r\n        <div class="scrollToTop" ng-click="ctrl.scrollTop()"></div>\r\n        \x3c!--页面底部的改错按钮--\x3e\r\n        <ion-footer-bar\r\n                ng-if="!ctrl.isLoadingProcessing && ctrl.title && ctrl.paper.paperScore>ctrl.paper.latestScore"\r\n                style="background: #e6e9ec">\r\n            <button class="button-clear bg-calm  bar-item flex_1"\r\n                    ng-click="ctrl.redoWork()"\r\n                    style="font-weight: bold;color: #627482;font-size: 19px">\r\n                <i class="icon ion-ios-paperplane" style="font-size: 19px"> </i>\r\n                改错\r\n            </button>\r\n        </ion-footer-bar>\r\n    </div>\r\n    <recognize-stroke-image></recognize-stroke-image>\r\n\r\n</ion-view>\r\n'},445:function(e,t,n){var r=n(446);"string"==typeof r&&(r=[[e.id,r,""]]);n(147)(r,{});r.locals&&(e.exports=r.locals)},446:function(e,t,n){t=e.exports=n(146)(),t.push([e.id,"",""])},447:function(e,t,n){"use strict";function r(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n,r,i){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(t,"__esModule",{value:!0});var a,s,l,c,u,d,f,p,h,g,v,m,b,y,_,w,S,k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),I=n(432),x=(a=(0,I.View)("final_sprint_ques_record",{url:"/final_sprint_ques_record/:pointIndex/:urlFrom/:formText",template:n(448),styles:n(449),inject:["$scope","$state","$rootScope","$ngRedux","commonService","diagnoseService"]}),s=(0,I.select)(function(e){return e.select_work_knowledge}),l=(0,I.select)(function(e){return e.wl_selected_clazz.id}),c=(0,I.select)(function(e){return e.knowledge_with_report}),u=(0,I.select)(function(e){return e.work_report_info.paperName}),d=(0,I.select)(function(e){return e.work_report_info.instanceId}),f=(0,I.select)(function(e){return e.work_report_info.select_work_knowledge}),p=(0,I.select)(function(e){return e.ques_record}),a((g=function(){function e(){i(this,e),r(this,"chapterSelectPoint",v,this),r(this,"clazzId",m,this),r(this,"workReports",b,this),r(this,"paperName",y,this),r(this,"paperInstanceId",_,this),r(this,"knowledgeName",w,this),r(this,"allPointsQues",S,this),this.pointIndex=this.getStateService().params.pointIndex,this.initData(),this.initFlags()}return k(e,[{key:"closeFinalSprintCheck",value:function(){this.isFinalSprintCheckFlag=!1,jQuery(".work_report_ques_record .final_sprint_check").hide()}},{key:"getKnowledgeTxt",value:function(){var e=this.chapterSelectPoint.knowledgeTxt.split(".");return 2==e.length?e[1]:this.chapterSelectPoint.knowledgeTxt}},{key:"configData",value:function(){if(!this.chapterSelectPoint.knowledgeId)return{};this.diagnoseReport=this.workReports[this.chapterSelectPoint.knowledgeId],this.qRecords=this.diagnoseReport?this.diagnoseReport.qRecords:null}},{key:"checkQuesFromThisPaper",value:function(e){var t=e.id+this.paperInstanceId;return e.quesIdAndInstanceId==t}},{key:"checkThisPaperQues",value:function(e,t){if(!this.checkQuesFromThisPaper(e))return"第"+t+"题";try{var n=+this.allPointsQues[this.chapterSelectPoint.knowledgeId].questionDict[e.id].qSeq,r=+this.allPointsQues[this.chapterSelectPoint.knowledgeId].questionDict[e.id].qgSeq;return this.commonService.convertToChinese(r+1)+"、"+(n+1)}catch(e){return"第"+t+"题"}}},{key:"initFlags",value:function(){this.initCtrl=!1,this.loadMoreExecuteCount=0,this.moreFlag=!1,this.showDiaglog=!0}},{key:"initData",value:function(){this.firstLoading=!0,this.loadingText="获取考点诊断中",this.showBottomFlag="diagnose_do_question02"!=this.getStateService().params.urlFrom,this.formText=this.getStateService().params.formText||"作业",this.isFinalSprintCheckFlag="final_sprint_check"==this.getStateService().params.urlFrom}},{key:"onBeforeEnterView",value:function(){}},{key:"onAfterEnterView",value:function(){if(this.configData(),this.pointIndex=this.getStateService().params.pointIndex,this.chapterSelectPoint)return this.initCtrl=!0,void this.fetchDiagnoseReport(!1,this.loadCallback.bind(this),this.chapterSelectPoint.knowledgeId,this.clazzId)}},{key:"onBeforeLeaveView",value:function(){this.showDiaglog=!1}},{key:"hideAllQ",value:function(){this.qRecords.forEach(function(e){for(var t in e.smallQStuAnsMapList)e.smallQStuAnsMapList[t].showQFlag=!1})}},{key:"hasNoRecords",value:function(){return this.initCtrl&&!this.firstLoading&&(!this.qRecords||!this.qRecords.length)}},{key:"onReceiveProps",value:function(){this.ensurePageData()}},{key:"ensurePageData",value:function(){this.chapterSelectPoint&&!this.initCtrl&&(this.initCtrl=!0,this.fetchDiagnoseReport(!1,this.loadCallback.bind(this),this.chapterSelectPoint.knowledgeId,this.clazzId))}},{key:"loadCallback",value:function(e,t){this.configData(),this.moreFlag=!t,this.firstLoading=!1,e?this.getScope().$broadcast("scroll.infiniteScrollComplete"):this.getScope().$broadcast("scroll.refreshComplete")}},{key:"fetchQRecordsWithLoadMore",value:function(){0==this.loadMoreExecuteCount&&this.getScope().$broadcast("scroll.infiniteScrollComplete"),this.loadMoreExecuteCount>0&&this.fetchDiagnoseReport(!0,this.loadCallback.bind(this),this.chapterSelectPoint.knowledgeId,this.clazzId),this.loadMoreExecuteCount++}},{key:"pullRefresh",value:function(){this.fetchDiagnoseReport(!1,this.loadCallback.bind(this),this.chapterSelectPoint.knowledgeId,this.clazzId)}},{key:"back",value:function(){return"final_sprint_check"===this.getStateService().params.urlFrom?void this.go("final_sprint_check"):"final_sprint_train"===this.getStateService().params.urlFrom?void this.go("final_sprint_train"):void 0}},{key:"onBeforeLeaveView",value:function(){this.diagnoseService.cancelDiagnoseReportRequestList.forEach(function(e){e.resolve(!0)}),this.diagnoseService.cancelDiagnoseReportRequestList.splice(0,this.diagnoseService.cancelDiagnoseReportRequestList.length)}},{key:"mapActionToThis",value:function(){var e=this.diagnoseService;return{fetchDiagnoseReport:e.fetchDiagnoseReportForWork.bind(e)}}}]),e}(),v=o(g.prototype,"chapterSelectPoint",[s],{enumerable:!0,initializer:null}),m=o(g.prototype,"clazzId",[l],{enumerable:!0,initializer:null}),b=o(g.prototype,"workReports",[c],{enumerable:!0,initializer:null}),y=o(g.prototype,"paperName",[u],{enumerable:!0,initializer:null}),_=o(g.prototype,"paperInstanceId",[d],{enumerable:!0,initializer:null}),w=o(g.prototype,"knowledgeName",[f],{enumerable:!0,initializer:null}),S=o(g.prototype,"allPointsQues",[p],{enumerable:!0,initializer:null}),h=g))||h);t.default=x},448:function(e,t){e.exports='<ion-view hide-nav-bar="true" class="work_report_ques_record">\r\n    <ion-header-bar align-title="center" class="bar-better" style="background: #FCF3CB;">\r\n        <button ng-click="ctrl.back()" class="button button-clear common-back-btn">\r\n            <i class="icon ion-ios-arrow-back"></i>\r\n        </button>\r\n        <h1 class="title"\r\n            style="color:#4a6b9d;font-weight: bold;font-size: 20px;"\r\n            ng-bind="\'考点\'+ (ctrl.pointIndex == \'-1\' ? \'\':ctrl.pointIndex) +\'诊断报告\'">\r\n            做题记录\r\n        </h1>\r\n    </ion-header-bar>\r\n    <ion-content has-header="false" overflow-scroll="true">\r\n        <ion-refresher pulling-text="下拉刷新..." on-refresh="ctrl.pullRefresh()"></ion-refresher>\r\n        <div class="records-title" ng-if="ctrl.qRecords&&ctrl.qRecords.length">\r\n            <b>{{\'考点\'+(ctrl.pointIndex == \'-1\' ? \'\':ctrl.pointIndex)}}</b>：{{ctrl.getKnowledgeTxt()}}\r\n        </div>\r\n        <div ng-repeat="record in ctrl.qRecords " ng-init="smallQIndex = $index"\r\n             ng-style="{\'margin-bottom\':$last&&bigLast?\'140px\':\'\'}">\r\n            <div class="image-type-question">\r\n                <div class="question-content card card-better small_q_bg">\r\n                    \x3c!--改错列--\x3e\r\n                    <div ng-repeat="(key,doneInfo) in record.smallQStuAnsMapList track by $index"\r\n                         ng-init="doneIndex=$index;doneLast=$last">\r\n                        <div class="smallq-title"\r\n                             ng-class="{\'smallq-title-first\':doneIndex==0,\'smallq-title-more\':doneIndex>=1}">\r\n                            <div class="text-div-adapt" ng-click="doneInfo.showQFlag=!doneInfo.showQFlag">\r\n                                <div class="text-adapt">\r\n                                     <span ng-bind="\'第\'+(smallQIndex+1)+\'题\'"\r\n                                           ng-class="{\'done-more\':doneIndex>=1}"></span>\r\n                                    \x3c!--<span ng-class="{\'done-more\':doneIndex>=1}">{{ctrl.checkThisPaperQues(record,smallQIndex+1)}}</span>--\x3e\r\n                                    <span ng-if="doneIndex==0" ng-bind="\'首次做 \'"></span>\r\n                                    <span ng-if="doneIndex>=1" ng-bind="\'改错后\'"></span>\r\n                                    <span ng-bind="doneInfo.createTime"></span>\r\n                                    <span class="correct-icons">\r\n                                        <img ng-show="doneInfo.passFlag==0"\r\n                                             ng-src="{{$root.loadImg(\'other/icon_no.png\')}}">\r\n                                        <img ng-show="doneInfo.passFlag==1"\r\n                                             ng-src="{{$root.loadImg(\'other/icon_yes2.png\')}}">\r\n                                        <img ng-show="doneInfo.passFlag==2"\r\n                                             ng-src="{{$root.loadImg(\'other/icon_yes3.png\')}}">\r\n                                        <img ng-show="doneInfo.passFlag==3"\r\n                                             ng-src="{{$root.loadImg(\'other/grading-icon.png\')}}">\r\n                                    </span>\r\n                                </div>\r\n                                <div class="record-type">\r\n                                    \x3c!--<span ng-bind="doneInfo.keyValuePairs.key===\'0\'?\'( 该记录来自单题 )\':ctrl.checkQuesFromThisPaper(record)?\'( 该记录来自本次作业 \'+ctrl.checkThisPaperQues(record,smallQIndex+1)+\')\':\'( 该记录来自作业 )\'"></span>--\x3e\r\n                                    \x3c!--<span ng-bind="doneInfo.keyValuePairs.key===\'1\'?\'( 该记录来自其他作业 )\':!ctrl.checkQuesFromThisPaper(record)?\'(该记录来自学霸驯宠记)\':\'( 该记录来自本次作业 \'+ctrl.checkThisPaperQues(record,smallQIndex+1)+\')\'"></span>--\x3e\r\n                                    \x3c!--<span ng-bind="ctrl.checkQuesFromThisPaper(record,doneIndex)==1?\'( 该记录来自学霸驯宠记 )\':ctrl.checkQuesFromThisPaper(record,doneIndex)==2?\'( 该记录来自本次作业 \'+ctrl.checkThisPaperQues(record,smallQIndex+1)+\')\':\'( 该记录来自其他作业 )\'"></span>--\x3e\r\n                                    <span ng-bind="doneInfo.keyValuePairs.key!==\'1\'?\'( 该记录来自学霸驯宠记 )\':ctrl.checkQuesFromThisPaper(record)?\'( 该记录来自本次作业 \'+ctrl.checkThisPaperQues(record,smallQIndex+1)+\')\':\'( 该记录来自\'+ctrl.formText+\' )\'"></span>\r\n                                </div>\r\n                            </div>\r\n                            <div class="img-align-right">\r\n                                <span ng-click="doneInfo.showQFlag=!doneInfo.showQFlag">\r\n                                    <img ng-src="{{!doneInfo.showQFlag==true?$root.loadImg(\'other/open.png\'):$root.loadImg(\'other/collapse.png\')}}"\r\n                                    >\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div compile-html="record.question" show_type="correct" current_q_input="doneInfo.inputList"\r\n                             ng-if="doneInfo.showQFlag" class="qcontext">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <ion-infinite-scroll on-infinite="ctrl.fetchQRecordsWithLoadMore();"\r\n                             distance="1%" ng-if="ctrl.moreFlag">\r\n        </ion-infinite-scroll>\r\n\r\n        <div class="tip" ng-if="ctrl.hasNoRecords()">\r\n            <span>该知识点下，暂无做题记录。</span>\r\n        </div>\r\n    </ion-content>\r\n    <loading-processing ng-if="ctrl.firstLoading"></loading-processing>\r\n    <img ng-src="{{$root.loadFinalSprintImg(\'final_sprint_home/final_sprint_check.png\')}}"\r\n         class="final_sprint_check"\r\n         ng-click="ctrl.closeFinalSprintCheck()"\r\n         ng-if="ctrl.isFinalSprintCheckFlag"\r\n    >\r\n</ion-view>'},449:function(e,t,n){var r=n(450);"string"==typeof r&&(r=[[e.id,r,""]]);n(147)(r,{});r.locals&&(e.exports=r.locals)},450:function(e,t,n){t=e.exports=n(146)(),t.push([e.id,"",""])},451:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i,o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(432),l=(i=(0,s.View)("final_sprint_diagnose_do_question",{url:"/final_sprint_diagnose_do_question/:urlFrom/:pointName/:pointIndex/:backWorkReportUrl",template:n(452),styles:n(453),controllerAs:"doQCtrl",inject:["$scope","$rootScope","$state","$stateParams","$ionicScrollDelegate","commonService","profileService","$interval","$ngRedux","$ionicPopup","$ionicTabsDelegate","$timeout","$ionicSideMenuDelegate","$ionicSlideBoxDelegate","subHeaderService","dateUtil","diagnoseService","workStatisticsServices","tabItemService"]}))(o=function(){function e(){var t=this;r(this,e),this.pointName=this.getStateService().params.pointName,this.backWorkReportUrl=this.getStateService().params.backWorkReportUrl,this.configKeyboardOnMobile(),this.$timeout(function(){t.$ionicSlideBoxDelegate.enableSlide(!1)},500),this.initFlags(),this.initData()}return a(e,[{key:"initFlags",value:function(){this.questionDataInitlized=!1,this.showDraft=!0,this.isVertical=!1,this.showDiaglog=!0,this.noQuestionTip=!0,this.firstBloodFull=!1,this.secondBloodFull=!1,this.thirdBloodFull=!1,this.enterPageHasErrorQuestionNum=0}},{key:"initData",value:function(){this.isIos=this.getRootScope().platform.IS_IPHONE||this.getRootScope().platform.IS_IPAD||this.getRootScope().platform.IS_MAC_OS,this.loadingNewQText="获取试题中",this.submitText="正在提交",this.smallQ={qContext:null},this.slideBoxDataList=[1,2,3,4],this.solidBoxInfo={currentIndex:0},this.showRightAnimateFlag=!1,this.showWrongAnimateFlag=!1,this.showWordAnimateFlag=!1,this.workStr="还不够牢固",this.isFromFinalSprint="final_sprint_train"===this.getStateService().params.backWorkReportUrl}},{key:"getRightAnimate",value:function(){var e=this;if(4===this.masterCode)return void(this.showMasterActFlag=!0);this.showRightAnimateFlag=!0,this.$timeout(function(){e.showSecondImgFlag=!0},1e3),this.$timeout(function(){var t=$("#master-img-btn").offset(),n=$(".test-wrap .second-img").offset(),r=$("#master-img-btn").height(),i=$("#master-img-btn").width();$("#second-img").css({visibility:"visible",zIndex:800,top:n.top,left:n.left}),$(".test-wrap .second-img").css({display:"none"}),$("#second-img").animate({top:t.top+"px",left:t.left+"px",height:r+"px",width:i+"px"},1e3,"swing",function(){e.getScope().$apply(function(){e.showRightAnimateFlag=!1})})},2e3)}},{key:"getWrongAnimate",value:function(){var e=this;this.showWrongAnimateFlag=!0,this.$timeout(function(){e.showSecondImgFlag=!0},1e3),this.$timeout(function(){var t=$("#master-img-btn").offset(),n=$(".test-wrap .second-img").offset(),r=$("#master-img-btn").height(),i=$("#master-img-btn").width();$("#second-img").css({visibility:"visible",zIndex:800,top:n.top,left:n.left}),$(".test-wrap .second-img").css({display:"none"}),$("#second-img").animate({top:t.top+"px",left:t.left+"px",height:r+"px",width:i+"px"},1e3,"swing",function(){e.getScope().$apply(function(){e.showWrongAnimateFlag=!1})})},2e3)}},{key:"getWordAnimate",value:function(e){var t=this;this.workStr=e?"还未掌握":"还不牢固",this.showWordAnimateFlag=!0,this.$timeout(function(){t.showWordAnimateFlag=!1},2500)}},{key:"onReceiveProps",value:function(){this.ensurePageData()}},{key:"ensurePageData",value:function(){var e=this;this.chapterSelectPoint&&!this.questionDataInitlized&&(this.questionDataInitlized=!0,this.fetchQuestionNew(this.questionInfo,function(t){e.firstBloodFull=0===t.error&&3!=t.new,e.enterPageHasErrorQuestionNum=t.error,e.secondBloodFull=t.new<2,e.thirdBloodFull=0==t.new}))}},{key:"onBeforeLeaveView",value:function(){this.showDiaglog=!1,this.$interval.cancel(this.intervalInfo),this.diagnoseService.cancelDiagnoseDoRequestList.forEach(function(e){e.resolve(!0)}),this.diagnoseService.cancelDiagnoseDoRequestList.splice(0,this.diagnoseService.cancelDiagnoseDoRequestList.length),this.intervalInfo&&this.$interval.cancel(this.intervalInfo)}},{key:"getCorrectQ",value:function(){this.questionInfo.hasNoSubmit=!1,this.goToDoQuestion(this.suggestCode),this.fetchQuestion(this.unitSelectKnowledge,this.suggestCode)}},{key:"showErrorRecords",value:function(){this.saveQReferAns(),this.backWorkReportUrl?this.go("final_sprint_error_records","forward",{backWorkReportUrl:this.backWorkReportUrl}):this.go("final_sprint_error_records","forward")}},{key:"back",value:function(){var e=this;if(this.draftShow)return this.draftShow=!1,void this.getRootScope().$broadcast("draft.hide");if(!1===$(".keyboard")[0].hidden&&"none"!=$(".keyboard")[0].style.display)return void this.getScope().$broadcast("keyboard.hide");if(angular.element($(".diagnose-dialog-box").eq(0)).scope()&&angular.element($(".diagnose-dialog-box").eq(0)).scope().showDiagnoseDialogFalg)return void this.getScope().$emit("diagnose.dialog.hide");if(4!==this.masterCode){var t=function(){var t=e.$ionicSlideBoxDelegate.$getByHandle("diagnose-do-quetison-slidebox");!e.isSubmitted&&e.questionInfo&&e.saveQuestionLocal(e.questionInfo,e.chapterSelectPoint,t.currentIndex()),e.getRootScope().$broadcast("draft.hide"),e.go("final_sprint_train")};this.getScope().$emit("diagnose.dialog.show",{showType:"confirm",comeFrom:"diagnose",content:this.getRootScope().isIncreaseScore?"此考点还未掌握，确定要退出？":"此考点萌宠还未驯服，确定要退出？",confirmCallBack:t.bind(this)})}else if(this.getRootScope().$broadcast("draft.hide"),this.resetKnowledgeQuestion(this.chapterSelectPoint),"final_sprint_train"==this.backWorkReportUrl)return void this.go("final_sprint_train")}},{key:"slideChange",value:function(e){var t=this.$ionicSlideBoxDelegate.$getByHandle("diagnose-do-quetison-slidebox");this.solidBoxInfo.currentIndex=t.currentIndex()}},{key:"showAnalysis",value:function(){this.showAnalysisFlag=!this.showAnalysisFlag,this.showAnalysisFlag&&this.questionInfo.analysisImgUrl&&(this.questionInfo.analysisImgUrl=this.commonService.replaceAnalysisImgAddress(this.questionInfo.analysisImgUrl)),this.timeCount=0,this.showAnalysisFlag?(this.smallQ.qContext=angular.copy(this.questionInfo.question),this.referAnsHandle()):this.$interval.cancel(this.intervalInfo)}},{key:"goToShowReport",value:function(){this.saveQReferAns();var e="";void 0!==this.chapterSelectPoint.pointIndex&&(e=this.chapterSelectPoint.pointIndex+1),this.go("final_sprint_report","forward",{urlFrom:"diagnose_do_question02",pointIndex:e,backWorkReportUrl:this.backWorkReportUrl})}},{key:"saveQReferAns",value:function(){var e=this.$ionicSlideBoxDelegate.$getByHandle("diagnose-do-quetison-slidebox");!this.isSubmitted&&this.questionInfo&&this.saveQuestionLocal(this.questionInfo,this.chapterSelectPoint,e.currentIndex()),this.goToErrorQRecords(this.questionInfo,this.knowledgeStateKey),this.getScope().$root.$broadcast("draft.hide")}},{key:"showMasterTip",value:function(){var e=this;this.getScope().$emit("diagnose.dialog.show",{comeFrom:"diagnose",content:function(){switch(e.chapterSelectPoint.level){case 1:return"小伙伴，我看好你哦！";case 2:return"仔细一点，加油哦！";case 3:
return"我有点犹豫要不要被你领养...";case 4:return"太赞了，主人求带走！"}}()})}},{key:"getReferAns",value:function(e){var t=this;if(!this.hasShowDiaglog){if(e.stopPropagation(),this.timeCount>0){this.hasShowDiaglog=!0;var n=function(){t.hasShowDiaglog=!1};return void this.getScope().$emit("diagnose.dialog.show",{showType:"confirm",comeFrom:"diagnose",content:'同学，请先看下这个解答，才能再点击"学霸解答"哦。',confirmCallBack:n})}this.intervalInfo&&this.$interval.cancel(this.intervalInfo),this.timeCount=5,this.intervalInfo=this.$interval(function(){t.timeCount--},1e3);var r={questionId:this.questionInfo.id};this.workStatisticsServices.getQReferAnswer(r,!0).then(function(e){if(!e.referAnswers||"{}"==JSON.stringify(e.referAnswers))return void(t.questionInfo.referAnswers&&angular.isObject(t.questionInfo.referAnswers)&&t.getScope().$emit("diagnose.dialog.show",{comeFrom:"diagnose",content:"同学，目前暂无学霸解答，无法展示详细的解题过程，请稍后再试。"}));t.questionInfo.referAnswers=e.referAnswers,t.referAnsHandle()})}}},{key:"referAnsHandle",value:function(){var e=this;this.parsedInputList=null,this.showCorrectFlag=!1;var t=$(".cheats-btn-wrap").offset().top,n=window.innerHeight-t;this.$timeout(function(){try{if(e.showCorrectFlag=!0,e.questionInfo.referAnswers&&e.questionInfo.referAnswers.vertical)return e.isVertical=!0,void(e.parsedInputList=e.clearVerticalQAns(angular.copy(e.questionInfo.inputList)));if(e.isVertical&&e.questionInfo.referAnswers)return void(e.parsedInputList=e.mapVerticalQAns(e.questionInfo.referAnswers,angular.copy(e.questionInfo.inputList)));if(n<window.innerHeight/2){var t=e.$ionicScrollDelegate.getScrollPosition().top;e.$ionicScrollDelegate.scrollBy(0,t+window.innerHeight/2-100)}}catch(e){console.error("竖式改错参考答案有问题",e)}},100)}},{key:"handleDraft",value:function(){"none"===$(".draft_container").css("display")?(console.log("draft.show"),this.getRootScope().$broadcast("draft.show"),this.draftShow=!0):(console.log("draft.hide"),this.getRootScope().$broadcast("draft.hide"),this.draftShow=!1)}},{key:"mapVerticalQAns",value:function(e,t){var n=void 0,r=void 0;return angular.forEach(t,function(t){angular.forEach(t.spList,function(t){try{n=e[t.inputBoxUuid],-1===n.indexOf("id")?t.inputBoxStuAns=n:n.indexOf("id")>-1&&(r=JSON.parse(n),angular.forEach(r,function(e){e.id===t.inputBoxUuid&&(t.matrix=e.matrix)}))}catch(e){console.error("qbuBug",e)}})}),t}},{key:"clearVerticalQAns",value:function(e){return angular.forEach(e,function(e){angular.forEach(e.spList,function(e){e.hasOwnProperty("inputBoxStuAns")?e.inputBoxStuAns="":e.hasOwnProperty("matrix")&&(e.matrix=[{}])})}),e}},{key:"submitCallBack",value:function(e){var t=this;if(angular.isString(e)){var n=function(){t.getRootScope().$broadcast("draft.hide"),t.resetKnowledgeQuestion(t.chapterSelectPoint),t.go("final_sprint_train")};return void this.getScope().$emit("diagnose.dialog.show",{comeFrom:"diagnose",content:e,confirmCallBack:n})}this.knowledgePointShowImg=e.knowledgePointShowImg,this.showNextQFlag=2===e.suggestCode&&4!=e.master,4!=e.master&&(this.pointName=this.diagnoseService.pointNameFormat(this.chapterSelectPoint),this.pointName=this.pointName.replace(/NaN/g,"")),1===e.rightAnimateFlag?this.getRightAnimate():-1===e.rightAnimateFlag?2==e.suggestCode?this.getWordAnimate(!0):this.getWrongAnimate():this.getWordAnimate(),this.bloodAnimation(e)}},{key:"bloodAnimation",value:function(e){2==e.suggestCode?this.answerRightBloodUp():this.answerWrongBloodDown()}},{key:"answerRightBloodUp",value:function(){var e=$(".diagnose_do_question_file_02 .page_footer .blood-box-wrap"),t=e.children(".blood-box");if(0!=this.enterPageHasErrorQuestionNum&&this.questionInfo.errorQuestionNum>0){var n=t.eq(0).children("img:last-child"),r=n.width(),i=n.height(),o=1;return o=this.questionInfo.errorQuestionNum==this.enterPageHasErrorQuestionNum?1-1/this.enterPageHasErrorQuestionNum:1==this.questionInfo.errorQuestionNum?0:this.questionInfo.errorQuestionNum/this.enterPageHasErrorQuestionNum,void n.css("clip","rect(0,"+r+"px,"+i*o+"px,0)")}for(var a=0,s=t.length;a<s;a++){var l=t.eq(a).children("img:last-child"),c=l.css("clip"),u=l.width();l.height();if(c.match(/\d+/g)[2]>0)return void l.css("clip","rect(0,"+u+"px,0,0)")}}},{key:"answerWrongBloodDown",value:function(){for(var e=$(".diagnose_do_question_file_02 .page_footer .blood-box-wrap"),t=e.children(".blood-box"),n=0,r=t.length;n<r;n++){var i=t.eq(n).children("img:last-child"),o=i.css("clip"),a=i.width(),s=i.height();if(o.match(/\d+/g)[2]>=s)return;i.css("clip","rect(0,"+a+"px,"+s+"px,0)")}}},{key:"submitQ",value:function(){if(!this.isLoadingProcessing&&!this.diagnose_submit_q_processing){this.getRootScope().$broadcast("keyboard.hide.change.question"),$(document).trigger("click"),this.getRootScope().$broadcast("draft.hide");var e=this.$ionicSlideBoxDelegate.$getByHandle("diagnose-do-quetison-slidebox");return this.isSubmitted?4===this.masterCode?(this.resetKnowledgeQuestion(this.chapterSelectPoint),void this.go("final_sprint_train")):this.isSubmitted&&!this.showNextQFlag?(this.showAnalysisFlag=!1,this.resetKnowledgeQuestion(this.chapterSelectPoint),this.fetchQuestionNew(),void this.$ionicScrollDelegate.scrollTop()):this.isSubmitted&&this.showNextQFlag?(this.showAnalysisFlag=!1,this.isVertical=!1,this.isSubmitted=!1,this.questionInfo=null,e.next(),this.fetchQuestionNew(),void this.$ionicScrollDelegate.scrollTop()):void 0:void this.submitQuestion(this.questionInfo,this.chapterSelectPoint,e.currentIndex(),this.submitCallBack.bind(this),this.getRootScope(),this.getRootScope().isIncreaseScore)}}},{key:"configKeyboardOnMobile",value:function(){var e=this;this.getScope().$on("keyboard.show",function(t,n){e.$timeout(function(){var t=$(n.ele),r=$(".keyboard").offset().top,i=t.offset().top,o=i+t.height()-r+60;o>0&&e.$ionicScrollDelegate.scrollBy(0,o)},50)})}},{key:"masterActEndCallBack",value:function(){var e=this;this.getScope().$apply(function(){e.showMasterActFlag=!1,e.showMasterRightAnimateFlag=!0,e.showSecondImgFlag=!0,e.$timeout(function(){var t=$("#master-img-btn").offset(),n=$(".test-wrap .second-img").offset(),r=$("#master-img-btn").height(),i=$("#master-img-btn").width();$("#second-img").css({visibility:"visible",zIndex:800,top:n.top,left:n.left}),$(".test-wrap .second-img").css({display:"none"}),$("#second-img").animate({top:t.top+"px",left:t.left+"px",height:r+"px",width:i+"px"},1e3,"swing",function(){e.getScope().$apply(function(){e.showMasterRightAnimateFlag=!1})})},1e3)})}},{key:"onAfterEnterView",value:function(){this.initData(),this.initFlags(),this.backWorkReportUrl=this.getStateService().params.backWorkReportUrl}},{key:"mapStateToThis",value:function(e){var t=e.chapter_select_point;if(!t.knowledgeId)return{};var n=e.knowledge_with_question[t.knowledgeId];return n&&n.qsTitle&&(n.qsTitle.qContext=n.qsTitle.question),{chapterSelectPoint:t,questionInfo:n,isSubmitted:!!n&&n.isSubmitted,masterDegreeUrl:t.showImg,masterCode:t.level,gender:e.profile_user_auth&&e.profile_user_auth.user.gender,isLoadingProcessing:e.fetch_diagnose_question_processing,diagnose_submit_q_processing:e.diagnose_submit_q_processing}}},{key:"mapActionToThis",value:function(){var e=this.diagnoseService;return{fetchQuestionNew:e.fetchQuestionNew.bind(e),submitQuestion:e.submitQuestion.bind(e),resetKnowledgeQuestion:e.resetKnowledgeQuestion.bind(e),goToDoQuestion:e.goToDoQuestion.bind(e),saveQuestionLocal:e.saveQuestionLocal.bind(e),clearKnowledgeQ:e.clearKnowledgeQ.bind(e),goToErrorQRecords:e.goToErrorQRecords.bind(e)}}}]),e}())||o;t.default=l},452:function(e,t){e.exports='<ion-view hide-nav-bar="true" class="diagnose_do_question_file_02" cache-view="false" >\r\n    <ion-header-bar  style="background: #83DCF5" align-title="center">\r\n        <button class="button back-button buttons  button-clear header-item common-back-btn"\r\n                ng-click="doQCtrl.back()"\r\n                style="color: #1E446A;">\r\n            <i class="icon ion-ios-arrow-back" style="color: #1E446A;"></i>\r\n        </button>\r\n        <h1 class="title"\r\n            style="color:#1E446A;font-weight: bold;font-size: 20px;left: 0px;right: 76px;"\r\n            ng-bind="doQCtrl.pointName" >\r\n        </h1>\r\n        <div class="report-btn" ng-click="doQCtrl.handleDraft()">\r\n            <img ng-src="{{$root.loadImg(\'diagnose/draft-new.png\')}}" >\r\n            草稿本\r\n        </div>\r\n    </ion-header-bar>\r\n    <draft style="position: relative;"></draft>\r\n    <div class="keyboard" style="z-index: 5000"></div>\r\n\r\n    <diagnose-dialog ng-if="doQCtrl.showDiaglog"></diagnose-dialog>\r\n\r\n\r\n    <div ng-if="doQCtrl.showMasterActFlag"\r\n         class="dot_processing loading-wrap master-act-wrap" >\r\n        <diagnose-master-act act-end-call-back="doQCtrl.masterActEndCallBack()" num-index="{{doQCtrl.chapterSelectPoint.numIndex}}" >\r\n        </diagnose-master-act>\r\n    </div>\r\n\r\n    <div ng-if="doQCtrl.isLoadingProcessing"\r\n         class="dot_processing loading-wrap">\r\n        <ion-spinner icon="ios"></ion-spinner>\r\n        <p ng-if="doQCtrl.loadingNewQText" >{{doQCtrl.loadingNewQText}}<span class="dotting"></span></p>\r\n    </div>\r\n    <div ng-if="doQCtrl.diagnose_submit_q_processing"\r\n         class="dot_processing loading-wrap">\r\n        <ion-spinner icon="ios" ></ion-spinner>\r\n        <p ng-if="doQCtrl.submitText" >{{doQCtrl.submitText}}<span class="dotting"></span></p>\r\n    </div>\r\n\r\n    <img ng-src="{{$root.loadImg(doQCtrl.masterDegreeUrl)}}"\r\n         style="visibility: hidden;display:block;position: absolute"  id="second-img"\r\n         ng-if="doQCtrl.masterDegreeUrl&&(doQCtrl.showRightAnimateFlag||doQCtrl.showWrongAnimateFlag||doQCtrl.showMasterRightAnimateFlag)">\r\n    <div class="dot_processing loading-act" ng-if="doQCtrl.showRightAnimateFlag">\r\n        <div class="test-wrap">\r\n            <div style="font-size: 20px;color: white;position: absolute;top:36px;z-index: 1;left: 0;right: 0">\r\n                <div style="font-size: 26px;font-weight: bold;text-shadow: 0px 0px 32px #141e50;">\r\n                    答对了！还不够牢固\r\n                </div>\r\n\r\n            </div>\r\n            <img ng-src="{{$root.loadImg(doQCtrl.knowledgePointShowImg)}}"\r\n                 ng-if="!doQCtrl.showSecondImgFlag"\r\n                 class="first-img">\r\n            <img ng-src="{{$root.loadImg(doQCtrl.masterDegreeUrl)}}"\r\n                 ng-if="doQCtrl.showSecondImgFlag"\r\n                 class="second-img animated bounceIn">\r\n            <div class="img-act-wrap">\r\n                <div class="xiaogou-right-act xiaogou-right-img">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="dot_processing loading-act master-act-wrap" ng-if="doQCtrl.showMasterRightAnimateFlag">\r\n        <div class="test-wrap">\r\n            <img ng-src="{{$root.loadImg(doQCtrl.masterDegreeUrl)}}"\r\n                 ng-if="doQCtrl.showSecondImgFlag"\r\n                 class="second-img ">\r\n        </div>\r\n    </div>\r\n    <div class="dot_processing loading-act" ng-if="doQCtrl.showWrongAnimateFlag">\r\n        <div class="test-wrap">\r\n            <img ng-src="{{$root.loadImg(doQCtrl.knowledgePointShowImg)}}"\r\n                 ng-if="!doQCtrl.showSecondImgFlag"\r\n                 class="first-img">\r\n            <img ng-src="{{$root.loadImg(doQCtrl.masterDegreeUrl)}}"\r\n                 ng-if="doQCtrl.showSecondImgFlag"\r\n                 class="second-img animated bounceIn">\r\n            <div class="img-act-wrap">\r\n                <div class="xiaogou-wrong-act xiaogou-wrong-img">\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <div class="dot_processing loading-act" ng-if="doQCtrl.showWordAnimateFlag">\r\n        <div class="test-wrap">\r\n            <div style="font-size: 20px;color: white;position: absolute;top:36px;z-index: 1;left: 0;right: 0">\r\n                <div style="font-size: 26px;font-weight: bold;text-shadow: 0px 0px 32px #141e50;">\r\n                    答对了！{{doQCtrl.workStr}}\r\n                </div>\r\n\r\n            </div>\r\n            <div class="img-act-wrap">\r\n                <div class="xiaogou-word-act xiaogou-right-img">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <ion-slide-box on-slide-changed="doQCtrl.slideChange($index)"\r\n                   delegate-handle="diagnose-do-quetison-slidebox"\r\n                   does-continue="true"\r\n                   show-pager="false"\r\n                   class="">\r\n        <ion-slide  auto-height="0"  slideBoxCurrentIndex="{{doQCtrl.solidBoxInfo.currentIndex}}">\r\n            <ion-content  class="do_question_content"\r\n                          ng-style="{top:(doQCtrl.isIos)?\'20px\':0}" >\r\n\r\n                <div class="top-btns-wrap">\r\n                    <img ng-src="{{$root.loadImg(\'diagnose/diagnose-error-record-btn.png\')}}" ng-click="doQCtrl.showErrorRecords()"\r\n                         ng-if="doQCtrl.isSubmitted"\r\n                         style="width: 40%;max-width: 200px;min-width: 140px;">\r\n                </div>\r\n                <div class="edit-section do-question-area" >\r\n\r\n\r\n                    \x3c!--show-type:展示类型为=> 做题:\'doQuestion\', 批改:\'correct\', 其他:undefined   --\x3e\r\n                    <div ng-if="!doQCtrl.isSubmitted&&doQCtrl.questionInfo.question" >\r\n                        <div class="editor for-content do_question_text"\r\n                             compile-html="doQCtrl.questionInfo.question"\r\n                             current_q_input="doQCtrl.questionInfo.inputList"\r\n                             possible-units="doQCtrl.questionInfo.possibleUnits"\r\n                             show-type="doQuestion"\r\n                        >\r\n                        </div>\r\n                    </div>\r\n                    <div ng-if="doQCtrl.isSubmitted&&doQCtrl.questionInfo.question"  >\r\n                        <div class="editor for-content do_question_text"\r\n                             compile-html="doQCtrl.questionInfo.question"\r\n                             current_q_input="doQCtrl.questionInfo.inputListForCorrect"\r\n                             possible-units="doQCtrl.questionInfo.possibleUnits"\r\n                             show-type="correct">\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="cheats-btn-wrap" ng-click="doQCtrl.showAnalysis()" ng-if="doQCtrl.isSubmitted">\r\n                        <span ng-bind="$root.isIncreaseScore?\'提分秘籍\':\'驯宠秘籍\'"></span>\r\n                        <i class="icon ion-chevron-down"></i>\r\n                    </div>\r\n                    <div class="analysis-wrap " ng-if="doQCtrl.showAnalysisFlag">\r\n                        <div class="analysis-title">答案：\r\n                            <div class="savant-btn" ng-click="doQCtrl.getReferAns($event)" ng-if="doQCtrl.questionInfo.questionTypeKey===\'subjective\'">\r\n                                学霸解答\r\n                            </div>\r\n                        </div>\r\n                        <div ng-if="doQCtrl.isVertical&&doQCtrl.referAnswers.vertical" class="vertical-tip">\r\n                            <span ng-bind="doQCtrl.referAnswers.vertical"></span>\r\n                        </div>\r\n                        <div compile-html="doQCtrl.smallQ.qContext" refer-answers="doQCtrl.questionInfo.referAnswers"\r\n                             ng-if="doQCtrl.questionInfo.referAnswers&&doQCtrl.showCorrectFlag&&!doQCtrl.parsedInputList"\r\n                             class="q-context" style="pointer-events: none;">\r\n                        </div>\r\n                        <div compile-html="doQCtrl.smallQ.qContext" refer-answers="doQCtrl.questionInfo.referAnswers"\r\n                             ng-if="doQCtrl.questionInfo.referAnswers&&doQCtrl.showCorrectFlag&&doQCtrl.parsedInputList"\r\n                             current-q-input="doQCtrl.parsedInputList"\r\n                             class="q-context" style="pointer-events: none;">\r\n                        </div>\r\n                        <div style="width: 100%" ng-if="doQCtrl.questionInfo.analysisImgUrl">\r\n                            <div class="analysis-title">解析：</div>\r\n                            <img src="{{doQCtrl.questionInfo.analysisImgUrl}}" style="width: 94%" >\r\n                        </div>\r\n                    </div>\r\n                    <div class="place-holder"></div>\r\n                </div>\r\n\r\n\r\n            </ion-content>\r\n\r\n        </ion-slide>\r\n    </ion-slide-box>\r\n    <ion-footer-bar class=" bar bar-footer page_footer" ng-show="!(doQCtrl.isSubmitted&&doQCtrl.masterCode===4&&doQCtrl.isFromFinalSprint)">\r\n        <div class="page_button"  ng-click="doQCtrl.submitQ()" >\r\n            \x3c!-- <img ng-src="{{$root.loadImg(\'diagnose/tame-btn-icon-new.png\')}}" >--\x3e\r\n            <span  ng-if="!doQCtrl.isSubmitted">提交答案</span>\r\n            <span  ng-if="doQCtrl.isSubmitted&&doQCtrl.masterCode!=4" ng-bind="$root.isIncreaseScore?\'继续练习\':\'继续驯服\'"></span>\r\n            <span  ng-if="doQCtrl.isSubmitted&&doQCtrl.masterCode===4"  ng-bind="$root.isIncreaseScore?\'获得更多勋章\':\'驯服更多萌宠\'"></span>\r\n        </div>\r\n        <div class="blood-box-wrap" ng-if="doQCtrl.questionDataInitlized">\r\n            <div class="blood-box" id="blood_box_1" ng-class="{\'blood_full\':doQCtrl.firstBloodFull}">\r\n                <img src="{{$root.loadImg(\'diagnose/s_blood_linght.png\')}}" alt="">\r\n                <img src="{{$root.loadImg(\'diagnose/s_blood_dark.png\')}}" alt="">\r\n            </div>\r\n            <div class="blood-box" id="blood_box_2" ng-class="{\'blood_full\':doQCtrl.secondBloodFull}">\r\n                <img src="{{$root.loadImg(\'diagnose/s_blood_linght.png\')}}" alt="">\r\n                <img src="{{$root.loadImg(\'diagnose/s_blood_dark.png\')}}" alt="">\r\n            </div>\r\n            <div class="blood-box" id="blood_box_3" ng-class="{\'blood_full\':doQCtrl.thirdBloodFull}">\r\n                <img src="{{$root.loadImg(\'diagnose/s_blood_linght.png\')}}" alt="">\r\n                <img src="{{$root.loadImg(\'diagnose/s_blood_dark.png\')}}" alt="">\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <img ng-src="{{doQCtrl.gender===1?$root.loadImg(\'diagnose/diagnose-do-question-boy.png\'):$root.loadImg(\'diagnose/girl-trainer.png\')}}"\r\n             ng-class="doQCtrl.gender===1?\'master-boy\':\'master-girl\'" ng-if="doQCtrl.questionDataInitlized && !$root.isIncreaseScore">\r\n        <div class="master-status-wrap" ng-if="doQCtrl.masterDegreeUrl" ng-click="doQCtrl.goToShowReport()">\r\n            <div>\r\n                <div class="point-text-wrap">\r\n                    <span ng-bind="\'考点\'+(doQCtrl.chapterSelectPoint.pointIndex+1)"></span>\r\n                </div>\r\n                <img ng-src="{{$root.loadImg(doQCtrl.masterDegreeUrl)}}"\r\n                     ng-click="doQCtrl.goToShowReport()"\r\n                     id="master-img-btn"\r\n                     ng-style="{\'visibility\':(doQCtrl.showRightAnimateFlag||doQCtrl.showWrongAnimateFlag||doQCtrl.showMasterActFlag||doQCtrl.showMasterRightAnimateFlag)?\'hidden\':\'visible\'}">\r\n            </div>\r\n\r\n        </div>\r\n    </ion-footer-bar>\r\n</ion-view>\r\n\r\n'},453:function(e,t,n){var r=n(454);"string"==typeof r&&(r=[[e.id,r,""]]);n(147)(r,{});r.locals&&(e.exports=r.locals)},454:function(e,t,n){t=e.exports=n(146)(),t.push([e.id,"",""])},455:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i,o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(432),l=(i=(0,s.View)("final_sprint_report",{url:"/final_sprint_report/:urlFrom/:pointIndex/:pointName/:backWorkReportUrl",template:n(456),styles:n(457),inject:["$scope","$state","$rootScope","$stateParams","commonService","profileService","$ngRedux","diagnoseService"]}))(o=function(){function e(){r(this,e),this.pointIndex=this.getStateService().params.pointIndex,this.backWorkReportUrl=this.getStateService().params.backWorkReportUrl,this.initFlags(),this.initData()}return a(e,[{key:"initFlags",value:function(){this.initCtrl=!1,this.loadMoreExecuteCount=0,this.moreFlag=!1,this.showDiaglog=!0}},{key:"initData",value:function(){this.firstLoading=!0,this.loadingText="获取考点诊断中",this.showBottomFlag=!1}},{key:"onBeforeEnterView",value:function(){}},{key:"onAfterEnterView",value:function(){if(this.backWorkReportUrl=this.getStateService().params.backWorkReportUrl,this.chapterSelectPoint)return this.initCtrl=!0,void this.fetchDiagnoseReport(!1,this.loadCallback.bind(this),this.getRootScope().isIncreaseScore)}},{key:"onBeforeLeaveView",value:function(){this.showDiaglog=!1}},{key:"hideAllQ",value:function(){this.qRecords.forEach(function(e){for(var t in e.smallQStuAnsMapList)e.smallQStuAnsMapList[t].showQFlag=!1})}},{key:"hasNoRecords",value:function(){return this.initCtrl&&!this.firstLoading&&(!this.qRecords||!this.qRecords.length)}},{key:"onReceiveProps",value:function(){this.ensurePageData()}},{key:"ensurePageData",value:function(){this.chapterSelectPoint&&!this.initCtrl&&(this.initCtrl=!0,this.fetchDiagnoseReport(!1,this.loadCallback.bind(this),this.getRootScope().isIncreaseScore))}},{key:"showMasterTip",value:function(){var e=this;this.getScope().$emit("diagnose.dialog.show",{comeFrom:"diagnose",content:function(){switch(e.chapterSelectPoint.level){case 1:return"小伙伴，我看好你哦！";case 2:return"仔细一点，加油哦！";case 3:return"我有点犹豫要不要被你领养...";case 4:return"太赞了，主人求带走！"}}()})}},{key:"loadCallback",value:function(e,t){this.moreFlag=!t,this.firstLoading=!1,e?this.getScope().$broadcast("scroll.infiniteScrollComplete"):this.getScope().$broadcast("scroll.refreshComplete")}},{key:"fetchQRecordsWithLoadMore",value:function(){0==this.loadMoreExecuteCount&&this.getScope().$broadcast("scroll.infiniteScrollComplete"),this.loadMoreExecuteCount>0&&this.fetchDiagnoseReport(!0,this.loadCallback.bind(this),this.getRootScope().isIncreaseScore),this.loadMoreExecuteCount++}},{key:"pullRefresh",value:function(){this.fetchDiagnoseReport(!1,this.loadCallback.bind(this),this.getRootScope().isIncreaseScore)}},{key:"back",value:function(){this.backWorkReportUrl?this.go("final_sprint_diagnose_do_question","forward",{pointName:this.getStateService().params.pointName,backWorkReportUrl:this.backWorkReportUrl}):this.go("final_sprint_diagnose_do_question","forward",{pointName:this.getStateService().params.pointName})}},{key:"gotoDiagnoseDoQues",value:function(){this.backWorkReportUrl?this.go("final_sprint_diagnose_do_question","farword",{pointName:this.getStateService().params.pointName,backWorkReportUrl:this.backWorkReportUrl}):this.go("final_sprint_diagnose_do_question","farword",{pointName:this.getStateService().params.pointName})}},{key:"onBeforeLeaveView",value:function(){this.diagnoseService.cancelDiagnoseReportRequestList.forEach(function(e){e.resolve(!0)}),this.diagnoseService.cancelDiagnoseReportRequestList.splice(0,this.diagnoseService.cancelDiagnoseReportRequestList.length)}},{key:"mapStateToThis",value:function(e){var t=e.chapter_select_point;if(!t.knowledgeId)return{};var n=e.knowledge_with_report[t.knowledgeId];return{chapterSelectPoint:t,diagnoseReport:n,report:n?n.report:null,qRecords:n?n.qRecords:null,isLoadingProcessing:e.fetch_diagnose_report_processing}}},{key:"mapActionToThis",value:function(){var e=this.diagnoseService;return{fetchDiagnoseReport:e.fetchDiagnoseReport.bind(e)}}}]),e}())||o;t.default=l},456:function(e,t){e.exports='<ion-view hide-nav-bar="true" class="diagnose_report_file">\r\n    <ion-header-bar align-title="center" class="bar-better" style="background: #FCF3CB;"     >\r\n        <button ng-click="ctrl.back()" class="button button-clear common-back-btn">\r\n            <i class="icon ion-ios-arrow-back"></i>\r\n        </button>\r\n        <h1 class="title"\r\n            style="color:#4a6b9d;font-weight: bold;font-size: 20px;"\r\n            ng-bind="\'考点\'+ctrl.pointIndex+\'诊断报告\'">\r\n        </h1>\r\n    </ion-header-bar>\r\n    \x3c!-- <ion-header-bar style="background: #83DCF5" align-title="center">\r\n         <button class="button back-button buttons  button-clear header-item common-back-btn"\r\n                 ng-click="ctrl.go(\'home.diagnose_do_question02\',\'back\')"\r\n                 style="color: #4a6b9d;">\r\n             <i class="icon ion-ios-arrow-back" style="color: #4a6b9d;"></i>\r\n         </button>\r\n         <h1 class="title"\r\n             style="color:#4a6b9d;font-weight: bold;font-size: 20px;"\r\n             ng-bind="\'考点诊断报告\'">\r\n         </h1>\r\n         <div class="buttons">\r\n             <button class="button button-clear" ng-click="ctrl.hideAllQ()">\r\n                 <img ng-src="{{$root.loadImg(\'work/fold.png\')}}" alt="" class="common-help"/>\r\n             </button>\r\n         </div>\r\n     </ion-header-bar>--\x3e\r\n    <diagnose-dialog ng-if="ctrl.showDiaglog"></diagnose-dialog>\r\n    <ion-content has-header="false"  overflow-scroll="true" ng-style="{bottom:ctrl.showBottomFlag?\'44px\':\'\'}">\r\n        <ion-refresher pulling-text="下拉刷新..." on-refresh="ctrl.pullRefresh()"></ion-refresher>\r\n        <div class="top-report-wrap">\r\n            \x3c!-- <p class="report-title">考点诊断报告</p>--\x3e\r\n            \x3c!-- <p class="point-f" ng-bind="ctrl.chapterSelectPoint.parentContent"></p>--\x3e\r\n            <p class="point-c" ng-if="ctrl.chapterSelectPoint.knowledgeName">\r\n                <span>考点：</span><span ng-bind="ctrl.chapterSelectPoint.knowledgeName"></span>\r\n            </p>\r\n            <div class="report-wrap">\r\n                <div class="master-all-msg" ng-bind="ctrl.report.allMsg.value" ng-if="ctrl.report.allMsg.value">\r\n                </div>\r\n                <div class="report-row" ng-repeat="master in ctrl.report.masterList">\r\n                    <div class="img-area" ng-if="master.sort!=3">\r\n                        <img ng-src="{{$root.loadImg(master.showImg)}}">\r\n                    </div>\r\n                    <div class="text-area" ng-if="master.sort!=3">\r\n                        <span ng-bind="master.value"></span>\r\n                    </div>\r\n                    <div class="master-status-wrap" ng-if="master.sort===3">\r\n                        <img ng-src="{{$root.loadImg(master.showImg)}}" ng-click="ctrl.showMasterTip()">\r\n                    </div>\r\n                </div>\r\n                \x3c!-- <div class="master-status-wrap" >\r\n                     <img ng-src="{{$root.loadImg(doQCtrl.masterDegreeUrl)}}" >\r\n                 </div>--\x3e\r\n            </div>\r\n        </div>\r\n        <div class="records-title" ng-if="ctrl.qRecords&&ctrl.qRecords.length">\r\n            做题记录：\r\n        </div>\r\n        <div ng-repeat="record in ctrl.qRecords " ng-init="smallQIndex = $index"\r\n             ng-style="{\'margin-bottom\':$last&&bigLast?\'140px\':\'\'}">\r\n            <div class="image-type-question">\r\n                <div class="question-content card card-better small_q_bg">\r\n                    \x3c!--改错列--\x3e\r\n                    <div ng-repeat="(key,doneInfo) in record.smallQStuAnsMapList track by $index" ng-init="doneIndex=$index;doneLast=$last">\r\n                        <div class="smallq-title" ng-class="{\'smallq-title-first\':doneIndex==0,\'smallq-title-more\':doneIndex>=1}">\r\n                            <div class="text-div-adapt" ng-click="doneInfo.showQFlag=!doneInfo.showQFlag">\r\n                                <div class="text-adapt">\r\n                                    <span ng-bind="\'第\'+(smallQIndex+1)+\'题\'" ng-class="{\'done-more\':doneIndex>=1}"></span>\r\n                                    <span ng-if="doneIndex==0" ng-bind="\'首次做 \'"></span>\r\n                                    <span ng-if="doneIndex>=1" ng-bind="\'改错后\'"></span>\r\n                                    <span  ng-bind="doneInfo.createTime"></span>\r\n                                    <span class="correct-icons">\r\n                                        <img ng-show="doneInfo.passFlag==0" ng-src="{{$root.loadImg(\'other/icon_no.png\')}}">\r\n                                        <img ng-show="doneInfo.passFlag==1" ng-src="{{$root.loadImg(\'other/icon_yes2.png\')}}">\r\n                                        <img ng-show="doneInfo.passFlag==2" ng-src="{{$root.loadImg(\'other/icon_yes3.png\')}}">\r\n                                        <img ng-show="doneInfo.passFlag==3" ng-src="{{$root.loadImg(\'other/grading-icon.png\')}}">\r\n                                    </span>\r\n                                </div>\r\n                                <div class="record-type"><span ng-bind="doneInfo.keyValuePairs.key===\'1\'?\'( 该记录来自作业 )\':\'( 该记录来自单题 )\'"></span></div>\r\n                            </div>\r\n                            <div class="img-align-right">\r\n                                <span ng-click="doneInfo.showQFlag=!doneInfo.showQFlag">\r\n                                    <img ng-src="{{!doneInfo.showQFlag==true?$root.loadImg(\'other/open.png\'):$root.loadImg(\'other/collapse.png\')}}"\r\n                                    >\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div compile-html="record.question" show_type="correct" current_q_input="doneInfo.inputList"\r\n                             ng-if="doneInfo.showQFlag" class="qcontext">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <ion-infinite-scroll on-infinite="ctrl.fetchQRecordsWithLoadMore();"\r\n                             distance="1%" ng-if="ctrl.moreFlag">\r\n        </ion-infinite-scroll>\r\n\r\n        <div class="tip" ng-if="ctrl.hasNoRecords()">\r\n            <span>该知识点下，暂无做题记录。</span>\r\n        </div>\r\n    </ion-content>\r\n    <loading-processing ng-if="ctrl.firstLoading"></loading-processing>\r\n    <ion-footer-bar class=" bar bar-footer page_footer" ng-if="ctrl.showBottomFlag">\r\n        <button class="button-clear flex_1 page_button" style="color: #2B4E72;font-weight: bold;" ng-click="ctrl.gotoDiagnoseDoQues()">\r\n            <span ng-if="!$root.isIncreaseScore"\r\n                  ng-bind="ctrl.hasNoRecords()?\'开始驯服\':ctrl.chapterSelectPoint.level==4?\'已驯服，去喂养\':\'继续驯服\'"></span>\r\n\r\n            <span ng-if="$root.isIncreaseScore" ng-bind="ctrl.chapterSelectPoint.level==4?\'去练习\':\'去掌握\'"></span>\r\n        </button>\r\n    </ion-footer-bar>\r\n</ion-view>'},457:function(e,t,n){var r=n(458);"string"==typeof r&&(r=[[e.id,r,""]]);n(147)(r,{});r.locals&&(e.exports=r.locals)},458:function(e,t,n){t=e.exports=n(146)(),t.push([e.id,"",""])},459:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i,o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(432),l=(i=(0,s.View)("final_sprint_error_records",{url:"/final_sprint_error_records/:pointName/:backWorkReportUrl",template:n(460),styles:n(461),inject:["$scope","$state","$stateParams","$ngRedux","diagnoseService","$rootScope"]}))(o=function(){function e(){r(this,e),this.backWorkReportUrl=this.getStateService().params.backWorkReportUrl,this.initFlags(),this.initData()}return a(e,[{key:"initFlags",value:function(){
this.errorQRecordsInitlized=!1}},{key:"initData",value:function(){}},{key:"onReceiveProps",value:function(){this.ensurePageData()}},{key:"callBack",value:function(e){this.record=e[0]}},{key:"onAfterEnterView",value:function(){if(this.questionInfo)return this.errorQRecordsInitlized=!0,void this.fetchErrorQRecords(this.questionInfo,this.callBack.bind(this))}},{key:"ensurePageData",value:function(){this.questionInfo&&!this.errorQRecordsInitlized&&(this.errorQRecordsInitlized=!0,this.fetchErrorQRecords(this.questionInfo,this.callBack.bind(this)))}},{key:"back",value:function(){var e=this.diagnoseService.pointNameFormat(this.chapterSelectPoint);e=e.replace("NaN",""),this.backWorkReportUrl?this.go("final_sprint_diagnose_do_question","back",{pointName:e,backWorkReportUrl:this.backWorkReportUrl}):this.go("final_sprint_diagnose_do_question","back",{pointName:e})}},{key:"onBeforeLeaveView",value:function(){this.diagnoseService.cancelDiagnoseErrorQRequestList.forEach(function(e){e.resolve(!0)}),this.diagnoseService.cancelDiagnoseErrorQRequestList.splice(0,this.diagnoseService.cancelDiagnoseErrorQRequestList.length)}},{key:"mapStateToThis",value:function(e){var t=e.chapter_select_point;return t.knowledgeId?{chapterSelectPoint:t,questionInfo:e.knowledge_with_question[t.knowledgeId]}:{}}},{key:"mapActionToThis",value:function(){var e=this.diagnoseService;return{fetchErrorQRecords:e.fetchErrorQRecords.bind(e)}}}]),e}())||o;t.default=l},460:function(e,t){e.exports='<ion-view hide-nav-bar="true" class="diagnose_error_q_records_file">\r\n    <ion-header-bar style="background: #83DCF5" align-title="center">\r\n        <button class="button back-button buttons  button-clear header-item common-back-btn"\r\n                ng-click="ctrl.back()"\r\n                style="color: #4a6b9d;">\r\n            <i class="icon ion-ios-arrow-back" style="color: #4a6b9d;"></i>\r\n        </button>\r\n        <h1 class="title"\r\n            style="color:#4a6b9d;font-weight: bold;font-size: 20px;"\r\n            ng-bind="\'本题做题记录\'">\r\n        </h1>\r\n    </ion-header-bar>\r\n\r\n    <ion-content class="has-header has-subheader" overflow-scroll="true">\r\n        <div  style="margin-bottom:140px">\r\n            <div class="image-type-question">\r\n                <div class="question-content card card-better small_q_bg">\r\n                    \x3c!--改错列--\x3e\r\n                    <div ng-repeat="(key,doneInfo) in ctrl.record.smallQStuAnsMapList" ng-init="doneIndex=$index;doneLast=$last"\r\n                         ng-class="doneInfo.showQFlag?\'open\':\'\'"  class="accordion">\r\n                        <div class="smallq-title" ng-class="{\'smallq-title-first\':doneIndex==0,\'smallq-title-more\':doneIndex>=1}">\r\n                            <div class="text-div-adapt" ng-click="doneInfo.showQFlag=!doneInfo.showQFlag">\r\n                                <label class="text-adapt">\r\n                                    \x3c!-- <span ng-bind="\'第\'+(record.seqNum+1)+\'题\'" ng-class="{\'done-more\':doneIndex>=1}"></span>--\x3e\r\n                                    <span ng-if="doneIndex==0" ng-bind="\'第\'+(doneIndex+1)+\'条\'"></span>\r\n                                    <span ng-if="doneIndex>=1" ng-bind="\'第\'+(doneIndex+1)+\'条\'"></span>\r\n                                    <span  ng-bind="doneInfo.createTime"></span>\r\n                                    <span class="correct-icons">\r\n                                        <img ng-show="doneInfo.passFlag==0" ng-src="{{$root.loadImg(\'other/icon_no.png\')}}">\r\n                                        <img ng-show="doneInfo.passFlag==1" ng-src="{{$root.loadImg(\'other/icon_yes2.png\')}}">\r\n                                        <img ng-show="doneInfo.passFlag==2" ng-src="{{$root.loadImg(\'other/icon_yes3.png\')}}">\r\n                                        <img ng-show="doneInfo.passFlag==3" ng-src="{{$root.loadImg(\'other/grading-icon.png\')}}">\r\n                                    </span>\r\n                                </label>\r\n                                <div class="record-type"><span ng-bind="doneInfo.keyValuePairs.key===\'1\'?\'( 该记录来自作业 )\':\'( 该记录来自单题 )\'"></span></div>\r\n                            </div>\r\n                            <div class="img-align-right">\r\n                                <span ng-click="doneInfo.showQFlag=!doneInfo.showQFlag">\r\n                                    <img ng-src="{{$root.loadImg(\'diagnose/diagnose-open.png\')}}" class="row-icon">\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div compile-html="ctrl.record.question" show_type="correct" current_q_input="doneInfo.inputList"\r\n                             ng-if="doneInfo.showQFlag" class="qcontext">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </ion-content>\r\n</ion-view>'},461:function(e,t,n){var r=n(462);"string"==typeof r&&(r=[[e.id,r,""]]);n(147)(r,{});r.locals&&(e.exports=r.locals)},462:function(e,t,n){t=e.exports=n(146)(),t.push([e.id,"",""])}});
webpackJsonp([33],{0:function(e,n,t){"use strict";t(4496),t(4497)},171:function(e,n,t){"use strict";function i(e,n,t){S=e,n&&(k=n),t&&(w=t);var i=angular.element("body").injector(),r=i.get("$rootScope"),o=i.get("$ngRedux");k&&t?o?o.mergeReducer(k,w).then(function(){console.log(e.name+"-storeReady!!!!!!!!!!"),r.$$listeners[e.name+"-storeReady"]?r.$broadcast(e.name+"-storeReady"):r[e.name+"-storeReady"]=!0}):(console.error("$ngRedux not found!"),r[e.name+"-storeReady"]=!0):r[e.name+"-storeReady"]=!0}function r(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){function t(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];return _(n,e,i),e.$inject=n,e.instance=new(Function.prototype.bind.apply(e,[null].concat(i))),e.instance}return t.prototype=e.prototype,t.$inject=n,t}}function o(e,n){return function(t){var i=function(e){return e.targetScope.ctrl},r=function(e,n){Object.keys(n).concat(Object.getOwnPropertyNames(n.__proto__)).forEach(function(t){if("constructor"!==t)if(e[t])if(angular.isFunction(e[t])&&angular.isFunction(n[t])){var i=e[t];e[t]=function(){var e=this,r=arguments;i.call(this,arguments).then(function(){n[t].call(e,r)})}}else e[t]=n[t];else e[t]=n[t]})};S.run(["$rootScope","$injector",function(o,a){o.$on("$ionicView.loaded",function(o,l){if(l.stateName===e){var c=i(o),s=new t;n.inject&&n.inject.length&&n.inject.forEach(function(e){s[e]=a.get(e)}),r(c,s)}})}])}}function a(e,n){return function(t){function i(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];n.inject&&n.inject.length&&_(n.inject,t,i);var o=new(Function.prototype.bind.apply(t,[null].concat(i)));o.selectorList=o.selectorList?o.selectorList:[];var a=function(){},l={initFlags:a,initData:a,mapStateToThis:a,mapActionToThis:a,componentWillReceiveProps:a,onBeforeEnterView:a,onAfterEnterView:a,onBeforeLeaveView:a,onLoadedView:a,onUpdate:a,configDataPipe:a,onReceiveProps:a},c={viewEntered:!1,hasPageRefreshManger:!1,dataPipe:new m.default},s=a,d=a;Object.keys(l).forEach(function(e){o[e]||(o[e]=l[e])}),Object.assign(o,c),o.configDataPipe(),o.mapStateObj={selectorList:o.selectorList,mapStateToThis:o.mapStateToThis};var u=o.getScope();if(!u)throw new Error('$scope must be injected with Decorator "@View"');var p=o.$ngRedux;if(!p)throw new Error('$ngRedux must be injected with Decorator "@View"');var h=o.pageRefreshManager;if(!o.getStateService)throw new Error("$state is required with pageRefreshManager");if(o.go=function(e,n,t){if(!o.getStateService||!o.getStateService())return console.error("$state service is not injected!");"string"!=typeof n&&(t=n,n="forward");var i=o.$injector.get("$ionicViewSwitcher");o.viewEntered=!1,"none"!=n?i.nextDirection(n):i.nextDirection("none"),o.getStateService().go(e,t)},h&&h.getListenerName&&(o.hasPageRefreshManger=!0,o.hasPageRefreshManger)){var f=o.getStateService();d=u.$on(h.getListenerName(f.current,f.params),function(e,n){h.shouldUpdate(f,n.url)&&o.onUpdate()})}var g=u.$on("$ionicView.beforeEnter",function(){if(o.onBeforeEnterView(),o.getRootScope&&o.back){o.getRootScope().viewGoBack=o.back.bind(o)}}),z=u.$on("$ionicView.beforeLeave",function(){s(),o.viewEntered=!1,o.onBeforeLeaveView()}),v=u.$on("$ionicView.loaded",function(){o.onLoadedView()}),b=u.$on("$ionicView.afterEnter",function(){u.$evalAsync(function(){o.viewEntered=!0,s=p.connect(o.mapStateObj,o.mapActionToThis(),o)(function(e,n){o.viewEntered&&(Object.assign(o,e,n),o.dataPipe.run(o),u.$evalAsync(function(){o.onReceiveProps(e,n)}))}),o.onAfterEnterView()})});return u.$on("$destroy",function(){s(),d(),b(),g(),z(),v()}),o}return i.prototype=t.prototype,i.$inject=t.$inject,n.inject&&n.inject.length&&(i.$inject=n.inject),i.$inject.push("$injector"),S.config(["$stateProvider",function(t){if(n.views){var r=Object.keys(n.views)[0],o=n.views[r];o.controller=i,o.controllerAs=o.controllerAs||"ctrl"}else n.controller=i,n.controllerAs=n.controllerAs||"ctrl";t.state(e,n)}]),i}}function l(e){return function(n){if(!e.selector)throw new Error("selector must be provided!");e.controller=n,e.controllerAs||(e.controllerAs="ctrl"),S.directive(e.selector,function(){return e})}}function c(e){return function(n){n.controller=n,S.component(e.selector,e)}}function s(e){return function(n,t,i){if(i.writable=!0,n.selectorList||(n.selectorList=[]),e)if("string"==typeof e)n.selectorList.push({type:x,key:t,selector:e});else if(e instanceof Array)n.selectorList.push({type:b,key:t,selector:e});else{if(!(e instanceof Function))throw new Error("unknown selector type!");n.selectorList.push({type:y,key:t,selector:e})}else n.selectorList.push({type:v,key:t})}}function d(e,n,t){var i=t.value,r=void 0;return t.value=function(){for(var n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];var a=e.$ngRedux;if(!a)throw new Error("$ngRedux is required by decorator @actionCreator");var l=(0,z.bindActionCreators)(i.bind(e.constructor.instance),a.dispatch);return r=l.apply(e,t)},t}function u(e,n){return function(t){S.constant(e,n)}}function p(e,n){return function(t){n&&n.inject&&n.inject.length&&(t.$inject=n.inject),S.service(e,t)}}function h(e,n,t){var i=t.value;return t.value=function(){var e=this;return new Promise(function(n){i.call(e,n)})},t}Object.defineProperty(n,"__esModule",{value:!0}),n.registerModule=i,n.Inject=r,n.ViewDecorator=o,n.View=a,n.Directive=l,n.Component=c,n.select=s,n.actionCreator=d,n.Constant=u,n.Service=p,n.PromiseFn=h;var f=t(172),g=t(174),m=function(e){return e&&e.__esModule?e:{default:e}}(g),z=t(176),v="EMPTY_SELECTOR_TYPE",b="PATH_SELECTOR_TYPE",y="FUNCTION_SELECTOR_TYPE",x="STR_SELECTOR_TYPE",S=f.ngDecModule,k=void 0,w=void 0,_=function(e,n,t){e.forEach(function(e,i){"$scope"==e?n.prototype.getScope=function(){return t[i]}:"$rootScope"==e?n.prototype.getRootScope=function(){return t[i]}:"$state"==e?n.prototype.getStateService=function(){return t[i]}:"$ngRedux"==e?(n.prototype.getState=function(){return t[i].getState()},n.prototype[e]=t[i]):n.prototype[e]=t[i]})}},172:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ngDecModule=void 0,t(173);var i=angular.module("ngDecModule",[]);n.ngDecModule=i},174:function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(175),a=function(e){return e&&e.__esModule?e:{default:e}}(o),l=function(){function e(n,t,r){i(this,e),this.id=(0,a.default)(),this.criteriaList=n||[],this.invokeList=t||[],this.sequence=r||0}return r(e,[{key:"pushCriteria",value:function(e){this.criteriaList.push(e)}},{key:"pushInvoke",value:function(e){this.invokeList.push(e)}}]),e}(),c=function(){function e(){i(this,e),this.configList=[],this.lastConfigId=null,this.lastActionType=d.PUSH_CRITERIA}return r(e,[{key:"getLastConfig",value:function(){var e=this,n=null,t=void 0;switch(this.lastActionType){case d.PUSH_CRITERIA:return this.lastConfigId?this.configList.forEach(function(t){t.id==e.lastConfigId&&(n=t)}):(n=new l,n.sequence=1,this.configList.push(n),this.lastConfigId=n.id),n;case d.PUSH_INVOKE:case d.NEXT:return this.configList.forEach(function(t){t.id==e.lastConfigId&&(n=t)}),t=new l,t.sequence=n.sequence++,this.configList.push(t),this.lastConfigId=t.id,t}}},{key:"when",value:function(e){return"function"!=typeof e?console.error(s.CRITERIA_ERROR):(this.getLastConfig().pushCriteria(e),this.lastActionType=d.PUSH_CRITERIA,this)}},{key:"then",value:function(e){return"function"!=typeof e?console.error(s.INVOKE_ERROR):(this.getLastConfig().pushInvoke(e),this.lastActionType=d.PUSH_INVOKE,this)}},{key:"next",value:function(){return this.lastActionType=d.NEXT,this}},{key:"run",value:function(e){for(var n=!0,t=this.configList.slice(0,this.configList.length);n&&t.length;){for(var i=[t.shift()];t[0]&&i[0].sequence==t[0].sequence;)i.push(t.shift());for(var r=0;r<i.length;r++)!function(t){var r=i[t],o=!0;r.criteriaList.forEach(function(n){o=o&&n.call(e)}),o?r.invokeList.forEach(function(n){n.call(e)}):n=!1}(r)}}}]),e}(),s={CRITERIA_ERROR:"criteria should be function!",INVOKE_ERROR:"invoke should be function"},d={PUSH_CRITERIA:"PUSH_CRITERIA",PUSH_INVOKE:"PUSH_INVOKE",NEXT:"NEXT"};window.dataPipe=new c,n.default=c},175:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=function(e){return Math.pow(2,e)},i=(t(4),t(6)),r=t(8),o=t(12),a=(t(14),t(16)),l=t(32),c=(t(40),t(48),function(e,n){return Math.floor(Math.random()*(n-e+1))+e}),s=function(){return c(0,i-1)},d=function(){return c(0,r-1)},u=function(){return c(0,o-1)},p=function(){return c(0,a-1)},h=function(){return c(0,l-1)},f=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},g=function(e,n,t){e=String(e),t=t||"0";for(var i=n-e.length;i>0;i>>>=1,t+=t)1&i&&(e=t+e);return e},m=function(e,n,t,i,r,o){return g(e.toString(16),8)+"-"+g(n.toString(16),4)+"-"+g(t.toString(16),4)+"-"+g(i.toString(16),2)+g(r.toString(16),2)+"-"+g(o.toString(16),12)},z=function(){return m(h(),p(),16384|u(),128|s(),d(),f())};n.default=z},4485:function(e,n,t){e.exports=t.p+"images/wechat.ico"},4487:function(e,n,t){e.exports=t.p+"images/qq.ico"},4496:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.t_classes=void 0;var i=t(171);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var r=angular.module("t_classes",[]);(0,i.registerModule)(r),n.t_classes=r},4497:function(e,n,t){"use strict";t(4498),t(4502),t(4506),t(4510),t(4514)},4498:function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,n,t,i){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n,t,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,i){return i(e,n,t)||t},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,n,o),o=null),o}Object.defineProperty(n,"__esModule",{value:!0});var l,c,s,d,u,p,h,f=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),g=t(4496),m=t(4487),z=(i(m),t(4485)),v=(i(z),l=(0,g.View)("home.clazz_manage",{url:"/clazz_manage",styles:t(4499),views:{clazz_manage:{template:t(4501)}},inject:["$scope","$rootScope","$ionicPopup","commonService","clazzService","$state","$ngRedux","$ionicActionSheet","finalData"]}),c=(0,g.select)("clazz_list"),s=(0,g.select)(function(e){return e.profile_user_auth.user.name}),l((u=function(){function e(){var n=this;o(this,e),this.retFlag=!1,this.isRefresh=!1,this.isDisabled=!0,this.tip="点击左上方的“＋”添加班级",r(this,"clazzList",p,this),r(this,"teacherName",h,this),this.initCtrl=!1,jQuery(".clazz-list-left-top-btn").click(function(){n.addClazz()})}return f(e,[{key:"onAfterEnterView",value:function(){var e=this;this.initClazz(),this.clazzService.setAddStuStatus(!0),this.clazzService.setOpenStatus(),setTimeout(function(){e.isDisabled=!1,e.getScope().$digest()},300)}},{key:"initDisable",value:function(){this.isDisabled=!0}},{key:"configDataPipe",value:function(){var e=this;this.dataPipe.when(function(){return!e.initCtrl}).then(function(){return e.initCtrl=!0}).then(function(){})}},{key:"initClazz",value:function(){var e=this;this.clazzService.getClazzList().then(function(n){n&&(e.retFlag=!0,e.isRefresh=!1,e.getScope().$broadcast("scroll.refreshComplete"))})}},{key:"doRefresh",value:function(){this.isRefresh=!0,this.initClazz()}},{key:"edit",value:function(e){this.clazzService.setClazzParam(e),this.initDisable(),this.go("add_clazz")}},{key:"showAns",value:function(){this.$ionicPopup.alert({title:"常见问题",template:'\n                <p style="color: #377AE6">问：如何告诉家长安装注册并加入班级？</p>\n                <p>答：可以点击班级信息下方的“点击通知学生加入”按钮，将链接发送至班级QQ群或者微信群即可。</p>\n                <p>如果没有班级QQ群或微信群，请把下面的通知以其他方式告诉家长（以下文字可复制）</p>\n                <div style="-webkit-user-select:auto;background-color: #dbdbdb;"> \n                    <p>各位家长：</p>\n                    <p>1.请微信关注公众号“智算365”，里面有下载链接，可自主下载安装</p>\n                    <p>2.安装后，点击智算365进行注册，注册时选学校老师班级，输入我的班级号</p>\n                    <p>3.全体学生加入后，我将布置作业，请耐心等待查收</p>\n                </div>',okText:"确定"})}},{key:"addClazz",value:function(){var e=this;this.isDisabled||this.clazzService.tCanCreateClass().then(function(n){n&&200==n.code?(e.clazzService.setClazzParam(""),e.initDisable(),e.go("add_clazz")):n&&630===n.code?e.commonService.showAlert("温馨提示","<div>"+n.msg+"</div>"):n&&631==n.code&&!e.getRootScope().isAdmin?e.commonService.showAlert("温馨提示","<div>"+n.msg+"，先加入教研圈才能创建班级。点击“我”，进入“教研圈”，填写相关信息进行验证。</div>"):e.commonService.showAlert("温馨提示","<div>"+n.msg+"</div>")})}},{key:"toggleApplyTunnel",value:function(e,n){if(!(1==e&&n.openStatus.open||2==e&&n.openStatus.close)){var t={};1==e?(t.open=!0,t.close=!1):(t.open=!1,t.close=!0),this.clazzService.setApplication({id:n.id,status:e},t)}}},{key:"clazzDetail",value:function(e){var n=this;this.clazzService.getClazzInfo({id:e.id}).then(function(t){200==t.code?(n.clazzService.setClazzParam(e),n.initDisable(),n.go("clazz_detail")):n.commonService.alertDialog("网络连接不畅，请稍后再试")})}},{key:"back",value:function(){return"exit"}},{key:"isShowIosShare",value:function(){return this.commonService.judgeAppVersion()}}]),e}(),p=a(u.prototype,"clazzList",[c],{enumerable:!0,initializer:null}),h=a(u.prototype,"teacherName",[s],{enumerable:!0,initializer:null}),d=u))||d);n.default=v},4499:function(e,n,t){var i=t(4500);"string"==typeof i&&(i=[[e.id,i,""]]);t(147)(i,{});i.locals&&(e.exports=i.locals)},4500:function(e,n,t){n=e.exports=t(146)(),n.push([e.id,".clazz_list_file .tip-wrap {\n  padding: 10px 6px;\n  border: 1px solid red;\n  border-radius: 10px;\n  margin: 20px 10px 0px 10px;\n}\n.clazz_list_file .tip-wrap p {\n  color: red;\n  font-size: 15px;\n  text-align: center;\n  margin: 0;\n}\n.clazz_list_file .clazz_list {\n  margin-top: -10px;\n}\n.clazz_list_file .clazz_list .item-divider {\n  padding-bottom: 10px;\n  padding-top: 16px;\n  background: #accbf9 !important;\n  color: #293d69;\n}\n.clazz_list_file .clazz_list .display-flex .item-checkbox .item-content span {\n  display: inline-block;\n  min-width: 60px;\n}\n.clazz_list_file .clazz_list .icon {\n  color: #6B94D6;\n  font-size: 18px;\n}\n.clazz_list_file .clazz_list .card .item-text-wrap {\n  padding: 5px;\n}\n.clazz_list_file .clazz_list .checkbox {\n  position: relative;\n  flex: 6;\n  -webkit-flex: 6;\n}\n.clazz_list_file .clazz_list .openCheck {\n  position: absolute;\n  font-size: 30px;\n  top: -12px;\n  left: 15px;\n  color: black;\n}\n.clazz_list_file .clazz_list .openText {\n  position: absolute;\n  left: 45px;\n  top: -3px;\n}\n.clazz_list_file .clazz_list .closeText {\n  position: absolute;\n  top: -3px;\n  left: 136px;\n}\n.clazz_list_file .clazz_list .closeCheck {\n  position: absolute;\n  font-size: 30px;\n  top: -12px;\n  left: 105px;\n  color: black;\n}\n.clazz_list_file .clazz_list .ion-chevron-right {\n  color: #938A8A;\n  font-size: 16px;\n}\n.clazz_list_file .clazz_list .item {\n  border-width: 0px;\n  border-style: none;\n}\n",""])},4501:function(e,n){e.exports='<ion-view hide-nav-bar="true" class="clazz_list_file">\r\n    <ion-header-bar class="bar-balanced" align-title="center" style="border-bottom: 1px solid #ddd">\r\n        <div class="buttons" style="margin-right: 10px">\r\n            <button class="button button-clear icon ion-plus-round clazz-list-left-top-btn"\r\n                    style="color: #4a6b9d"\r\n                    ng-disabled="ctrl.isDisabled">\r\n                创建\r\n            </button>\r\n        </div>\r\n\r\n        <h1 class="title" style="font-weight:bold;font-family: \'Microsoft YaHei\';">班级列表</h1>\r\n    </ion-header-bar>\r\n    <ion-content padding="false" class="clazz_list" scroll="true" overflow-scroll="true">\r\n        <ion-refresher pulling-text="下拉刷新..." on-refresh="ctrl.doRefresh()" spinner="ios"></ion-refresher>\r\n        \x3c!--没有班级提示信息--\x3e\r\n        <div class="item item-input block-input item-input—height" style="margin-top: 10px;"\r\n             ng-if="ctrl.clazzList.length<=0&&ctrl.retFlag">\r\n            <input type="text" ng-model="ctrl.tip" readonly="readonly"/>\r\n        </div>\r\n        <div class="card" ng-repeat="clazz in ctrl.clazzList">\r\n            <div class="item-divider item-avatar item-icon-right" ng-click="ctrl.clazzDetail(clazz)"\r\n                 class="display-flex" style="height: 75px;position: relative">\r\n                <img class="thumbnail-left" ng-src="{{$root.loadImg(\'class.svg\')}}" alt="">\r\n\r\n                <span style=" color:#293d69!important;display: inherit;">{{\'班级号:\'+clazz.id}}</span>\r\n\r\n                <span style=" color:#293d69!important;display: inherit;">{{clazz.name}}</span>\r\n\r\n                <i class="icon ion-chevron-right" style="margin-right: 4px;"></i>\r\n            </div>\r\n\r\n            <div class=" item-text-wrap text-font-color">\r\n                <div style="padding: 10px;">\r\n                    &nbsp;年&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;级:&nbsp;&nbsp;{{clazz.gradeName}}\r\n                </div>\r\n                <div style="padding: 10px 15px;position: relative"\r\n                     class="display-flex item-icon-right "\r\n                     ui-sref="clazz_student_list({clazzId:clazz.id,type:1,stuNum:clazz.checkedNum})">\r\n                    学生列表:\r\n                    <span style="flex: 6;-webkit-flex:6">&nbsp;{{clazz.checkedNum}}人</span>\r\n                    <i class="icon ion-chevron-right"></i>\r\n                </div>\r\n                <div style="padding: 10px 15px;background:#FDF8EE"\r\n                     class="display-flex ">\r\n                    <span>申请通道:</span>\r\n                    <span class="checkbox">\r\n                       <i ng-class="clazz.openStatus.open==true?\r\n                                    \'icon ion-android-checkbox-outline\':\'ion-android-checkbox-outline-blank\'"\r\n                          class="openCheck"\r\n                          ng-click="ctrl.toggleApplyTunnel(1,clazz)">\r\n                       </i>\r\n                      <span class="openText">开启</span>\r\n                          <i ng-class="!!clazz.openStatus.close ? \'icon ion-android-checkbox-outline\':\'ion-android-checkbox-outline-blank\'"\r\n                             class="closeCheck" ng-click="ctrl.toggleApplyTunnel(2,clazz)">\r\n                          </i>\r\n                         <span class="closeText">关闭</span>\r\n                    </span>\r\n                </div>\r\n                <div style="padding:5px 20px 3px;">\r\n                    <button class="bar-item button-clear" style="color: #553333!important;">\r\n                        \x3c!--<img ng-src="{{$root.loadImg(\'common/inform_stu.png\')}}" width="160px"/>--\x3e\r\n                        <share-btn\r\n                                share-content="{{ctrl.teacherName+ \'老师的班级号是\'+ clazz.id +\'，点击注册加入老师班级。\'}}"\r\n                                tpl="<img src=\'{{$root.loadImg(\'common/inform_stu.png\')}}\' height=\'30px\'/>"\r\n                                clazz-id="{{clazz.id}}"\r\n                                teacher-name="{{ctrl.teacherName}}"\r\n                                share-url="{{ctrl.finalData.WEB_REGISTER_URL}}">\r\n                        </share-btn>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </ion-content>\r\n</ion-view>'},4502:function(e,n,t){"use strict";function i(e,n,t,i){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n,t,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,i){return i(e,n,t)||t},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,n,o),o=null),o}Object.defineProperty(n,"__esModule",{value:!0});var a,l,c,s,d,u,p,h=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),f=t(4496),g=(a=(0,f.View)("add_clazz",{url:"/add_clazz",styles:t(4503),template:t(4505),inject:["$scope","$ionicModal","$state","clazzService","$ionicLoading","commonService","profileService","$rootScope","$ionicPopup","$ionicScrollDelegate","$ngRedux","$ionicHistory","diagnoseService"]}),l=(0,f.select)(function(e){return e.cm_select_clazz_info}),c=(0,f.select)(function(e){return e.cm_add_clazz_status}),a((d=function(){function e(){r(this,e),i(this,"storeInfo",u,this),i(this,"isUpdate",p,this),this.modalType="",this.isDisabled=!1,this.clazzParam=this.clazzService.getClazzParam(),this.title="添加班级",this.btnTitle="添加",this.initCtrl=!1,this.clazzInfo={},this.clazzTextName="",this.initView()}return h(e,[{key:"onAfterEnterView",value:function(){this.isParam()}},{key:"initView",value:function(){this.initModalProvince(),this.initModalCity(),this.initModalDistrict(),this.initModalSchool(),this.initModalGrade(),this.initModalClazz(),this.initModalTextBook()}},{key:"back",value:function(){this.go("home.clazz_manage")}},{key:"isParam",value:function(){this.isUpdate?(this.clazzInfo={provinceId:"",cityId:"",districtId:"",schoolId:"",grade:"",clazz:"",id:"",provinceName:"",cityName:"",districtName:"",schoolName:"",gradeName:"",className:"",name:"",teachingMaterial:""},this.clazzTextName="",this.title="添加班级",this.btnTitle="添加"):(this.clazzInfo=this.storeInfo,this.clazzTextName="北师版",this.clazzInfo.teachingMaterial&&(this.clazzTextName=this.clazzInfo.teachingMaterial.split("-")[1]||"北师版"),this.title="修改班级",this.btnTitle="修改")}},{key:"initModalProvince",value:function(){var e=this;this.$ionicModal.fromTemplateUrl("selectProvince.html",{scope:this.getScope(),animation:"slide-in-up"}).then(function(n){e.provinceModal=n,e.getRootScope().modal.push(n)})}},{key:"openProvinceModal",value:function(){var e=this;this.commonService.getLocations("",1).then(function(n){if(200==n.code)return e.Province=n.locations,void e.provinceModal.show();e.commonService.alertDialog("网络连接不畅，请稍后再试...")})}},{key:"selectedProvince",value:function(e){if(this.clazzInfo.provinceId==e.id)return void this.provinceModal.hide();this.clazzInfo.provinceId=e.id,this.clazzInfo.provinceName=e.name,this.clazzInfo.cityId="",this.clazzInfo.cityName="",this.clazzInfo.districtId="",this.clazzInfo.districtName="",this.clazzInfo.schoolId="",this.clazzInfo.schoolName="",this.provinceModal.hide()}},{key:"initModalCity",value:function(){var e=this;this.$ionicModal.fromTemplateUrl("selectCity.html",{scope:this.getScope(),animation:"slide-in-up"}).then(function(n){e.cityModal=n,e.getRootScope().modal.push(n)})}},{key:"openCityModal",value:function(){var e=this;if(!this.clazzInfo.provinceId)return void this.commonService.alertDialog("请先选择省份...");this.commonService.getLocations(this.clazzInfo.provinceId,2).then(function(n){if(200==n.code)return e.City=n.locations,void e.cityModal.show();e.commonService.alertDialog("网络连接不畅，请稍后再试...")})}},{key:"selectedCity",value:function(e){if(this.clazzInfo.cityId==e.id)return void this.cityModal.hide();this.clazzInfo.cityId=e.id,this.clazzInfo.cityName=e.name,this.clazzInfo.districtId="",this.clazzInfo.districtName="",this.clazzInfo.schoolId="",this.clazzInfo.schoolName="",this.cityModal.hide()}},{key:"initModalDistrict",value:function(){var e=this;this.$ionicModal.fromTemplateUrl("selectDistrict.html",{scope:this.getScope(),animation:"slide-in-up"}).then(function(n){e.districtModal=n,e.getRootScope().modal.push(n)})}},{key:"openCountyModal",value:function(){var e=this;if(""==this.clazzInfo.cityId)return void this.commonService.alertDialog("请先选择市...");this.commonService.getLocations(this.clazzInfo.cityId,3).then(function(n){if(200==n.code)return e.District=n.locations,void e.districtModal.show();e.commonService.alertDialog("网络连接不畅，请稍后再试...")})}},{key:"selectedDistrict",value:function(e){if(this.clazzInfo.districtId==e.id)return void this.districtModal.hide();this.clazzInfo.districtId=e.id,this.clazzInfo.districtName=e.name,this.clazzInfo.schoolName="",this.clazzInfo.schoolId="",this.districtModal.hide()}},{key:"initModalSchool",value:function(){var e=this;this.$ionicModal.fromTemplateUrl("selectSchool.html",{scope:this.getScope(),animation:"slide-in-up"}).then(function(n){e.schoolModal=n,e.getRootScope().modal.push(n)})}},{key:"openSchoolModal",value:function(){var e=this;if(!this.clazzInfo.districtId)return void this.commonService.alertDialog("请先选择区县...");this.commonService.getLocations(this.clazzInfo.districtId,4).then(function(n){if(200==n.code)return e.School=n.locations,e.schoolModal.show(),void e.$ionicScrollDelegate.scrollTop();e.commonService.alertDialog("网络连接不畅，请稍后再试...")})}},{key:"selectedSchool",value:function(e){this.clazzInfo.schoolId=e.id,this.clazzInfo.schoolName=e.name,this.schoolModal.hide()}},{key:"hideSchoolModel",value:function(e){if(e.preventDefault(),this.clazzInfo.schoolId=this.clazzInfo.schoolName,""===this.clazzInfo.schoolId||!this.checkWordInput(this.clazzInfo.schoolName)||/[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}/.test(this.clazzInfo.schoolId))return void this.commonService.alertDialog("未输入正确学校名称...");this.addOtherSchoolFlag=!1,this.schoolModal.hide()}},{key:"backFromEnterSchool",value:function(){this.addOtherSchoolFlag=!1,this.schoolModal.hide()}},{key:"addOtherSchool",value:function(){this.addOtherSchoolFlag=!0,this.$ionicScrollDelegate.scrollTop(!1)}},{key:"initModalGrade",value:function(){var e=this;this.$ionicModal.fromTemplateUrl("selectGrade.html",{scope:this.getScope(),animation:"slide-in-up"}).then(function(n){e.gradeModal=n,e.getRootScope().modal.push(n)})}},{key:"openGradeModal",value:function(){var e=this;this.clazzService.getGradeClass().then(function(n){if(n)return e.Grade=n.grade,void e.gradeModal.show();e.commonService.alertDialog("网络连接不畅，请稍后再试...")})}},{key:"selectedGrade",value:function(e){this.clazzInfo.grade=e.num,this.clazzInfo.gradeName=e.name,this.gradeModal.hide()}},{key:"initModalClazz",value:function(){var e=this;this.$ionicModal.fromTemplateUrl("selectClazz.html",{scope:this.getScope(),animation:"slide-in-up"}).then(function(n){e.clazzModal=n,e.getRootScope().modal.push(n)})}},{key:"openClazzModal",value:function(){var e=this;this.clazzService.getGradeClass().then(function(n){if(n)return e.Clazz=n.class,void e.clazzModal.show();e.commonService.alertDialog("网络连接不畅，请稍后再试...")})}},{key:"selectedClazz",value:function(e){this.clazzInfo.clazz=e.num,this.clazzInfo.className=e.name,this.clazzModal.hide()}},{key:"initModalTextBook",value:function(){var e=this;this.$ionicModal.fromTemplateUrl("selectTextBook.html",{scope:this.getScope(),animation:"slide-in-up"}).then(function(n){e.textBookModal=n,e.getRootScope().modal.push(n)})}},{key:"openTextBookModal",value:function(){var e=this;if(this.textBooks)return void this.textBookModal.show();this.clazzService.getTextBook().then(function(n){if(200==n.code)return angular.forEach(n.detail,function(e,t){"AS"==e.code&&n.detail.splice(t,1)}),e.textBooks=n.detail,void e.textBookModal.show();e.commonService.alertDialog("网络连接不畅，请稍后再试...")})}},{key:"selectedTextBook",value:function(e){this.clazzInfo.teachingMaterial=e.code+"-"+e.text,this.clazzTextName=e.text,this.textBookModal.hide()}},{key:"add_update_Clazz",value:function(){var e=this;if(""==this.clazzInfo.provinceId||""==this.clazzInfo.cityId||""==this.clazzInfo.districtId)return void this.commonService.alertDialog("请选择完整省市县...");if(""==this.clazzInfo.schoolId)return void this.commonService.alertDialog("请填写选择学校...");if(""==this.clazzInfo.grade)return void this.commonService.alertDialog("请填写选择一个年级...");if(""==this.clazzInfo.clazz)return void this.commonService.alertDialog("请填写选择一个班级...");if(""==this.clazzInfo.name)return void this.commonService.alertDialog("请填写班级名称...");if(-1!=this.clazzInfo.name.indexOf("年级"))return void this.commonService.showAlert("温馨提示","<p>班级已含有年级信息，班级名称中不宜再有“年级”字样，每学年开学会自动提升该班级的年级</p><p>班级名称样列：2016级一班、花朵一班、海贝部落</p>");if(!this.checkWordInput(this.clazzInfo.name))return void this.commonService.alertDialog("班级名称格式不对...");if(""==this.clazzTextName)return void this.commonService.alertDialog("请选择教材类型");this.isDisabled=!0;var n={provinceId:this.clazzInfo.provinceId,cityId:this.clazzInfo.cityId,districtId:this.clazzInfo.districtId,schoolId:this.clazzInfo.schoolId,grade:this.clazzInfo.grade,clazz:this.clazzInfo.clazz,name:this.clazzInfo.name,teachingMaterial:this.clazzInfo.teachingMaterial,type:"100"},t={provinceName:this.clazzInfo.provinceName,cityName:this.clazzInfo.cityName,districtName:this.clazzInfo.districtName,schoolName:this.clazzInfo.schoolName,gradeName:this.clazzInfo.gradeName,className:this.clazzInfo.className};if(this.clazzParam)return n.id=this.clazzInfo.id,n.createdTime=this.clazzParam.createdTime,n.status=this.clazzParam.status,void this.clazzService.updateClazz(n,t).then(function(t){return e.isDisabled=!1,200==t.code?(e.clazzService.setClazzParam(""),e.commonService.alertDialog("修改成功"),e.clazzParam.teachingMaterial!=n.teachingMaterial&&e.diagnoseService.changeUnit(null),void e.getStateService().go("home.clazz_manage")):704==t.code?void e.commonService.alertDialog(t.msg,2e3):void e.commonService.alertDialog("网络连接不畅，请稍后再试...")});this.clazzService.addClazz(n,t).then(function(n){return e.$ionicLoading.hide(),e.isDisabled=!1,200==n.code?void e.alertDialog(n.class.id):704==n.code?void e.commonService.alertDialog(n.msg,2e3):void e.commonService.alertDialog("网络连接不畅，请稍后再试...")})}},{key:"checkWordInput",value:function(e){return/^([\u4e00-\u9fa5]|\w)+$/.test(e)}},{key:"initRootScopeClazz",value:function(){var e=this;this.profileService.getTeacherClazzList().then(function(n){n&&(e.getRootScope().clazzList=n.classes||[])})}},{key:"alertDialog",value:function(e){var n=this;this.$ionicPopup.alert({title:"创建成功",template:'<p>请将下列信息告知家长，帮助学生注册加入您的班级。</p><p style="text-align: center">班级号：<span style="font-size: 18px;color: red">'+e+'</span><br/>官网下载APP：<span style="font-size: 18px;color: red">www.xuexiV.com</span></p>',okText:"确定"}).then(function(){n.getStateService().go("home.clazz_manage")})}},{key:"help",value:function(){this.$ionicPopup.alert({title:"常见问题",template:'<p style="color: #377AE6">问：年级为什么不能修改了呢？</p><p>答：年级由智算365根据时间自动变更，如果有疑问，请联系客服。</p>',okText:"确定"})}}]),e}(),u=o(d.prototype,"storeInfo",[l],{enumerable:!0,initializer:null}),p=o(d.prototype,"isUpdate",[c],{enumerable:!0,initializer:null}),s=d))||s);n.default=g},4503:function(e,n,t){var i=t(4504);"string"==typeof i&&(i=[[e.id,i,""]]);t(147)(i,{});i.locals&&(e.exports=i.locals)},4504:function(e,n,t){n=e.exports=t(146)(),
n.push([e.id,".add_clazz .add_clazz_file .item {\n  padding: 10px !important;\n}\n.add_clazz .add_clazz_file .item input {\n  background: none !important;\n  cursor: pointer !important;\n  width: 100%;\n}\n.add_clazz .add_clazz_file .ion-chevron-right {\n  color: #938A8A;\n  font-size: 16px;\n}\n",""])},4505:function(e,n){e.exports='<ion-view hide-nav-bar=true class="add_clazz">\r\n    <ion-header-bar class="bar-balanced" align-title="center">\r\n        <button class="button buttons  button-clear header-item" ng-click="ctrl.back()">\r\n            <i class="icon ion-ios-arrow-back" style="padding-left: 10px"></i>\r\n            &nbsp;&nbsp;\r\n        </button>\r\n        <h1 class="title" style="font-family: \'Microsoft YaHei\'">{{ctrl.title}}</h1>\r\n       \x3c!-- <div class="buttons" >\r\n            <button class="button button-clear" ng-click="help()" style="position: absolute;right: -3px;">\r\n                <img ng-src="{{$root.loadImg(\'common/help_icon.png\')}}" alt=""  class="common-help"/>\r\n            </button>\r\n        </div>--\x3e\r\n    </ion-header-bar>\r\n    <ion-content padding="true" class="add_clazz_file has-footer">\r\n        <ion-list>\r\n            <ion-item class="item item-input border-solid border-color item-icon-right" ng-click="ctrl.openProvinceModal()">\r\n                <input type="text"  placeholder="选择省" readonly="readonly" ng-model="ctrl.clazzInfo.provinceName" />\r\n                <i class="icon ion-chevron-right"></i>\r\n            </ion-item>\r\n            <ion-item class="item  item-input border-solid border-color item-icon-right" ng-click="ctrl.openCityModal()">\r\n                <input type="text"  placeholder="选择市" readonly="readonly" ng-model="ctrl.clazzInfo.cityName" />\r\n                <i class="icon ion-chevron-right"></i>\r\n            </ion-item>\r\n            <ion-item class="item item-input border-solid border-color item-icon-right" ng-click="ctrl.openCountyModal()">\r\n                <input type="text" placeholder="选择区/县" readonly="readonly" ng-model="ctrl.clazzInfo.districtName"  />\r\n                <i class="icon ion-chevron-right"></i>\r\n            </ion-item>\r\n            <ion-item class="item item-input border-solid border-color item-icon-right" ng-click="ctrl.openSchoolModal()">\r\n                <input type="text" placeholder="选择学校" readonly="readonly" ng-model="ctrl.clazzInfo.schoolName" />\r\n                <i class="icon ion-chevron-right"></i>\r\n            </ion-item>\r\n            <ion-item class="item item-input border-solid border-color item-icon-right" ng-click="ctrl.openGradeModal()">\r\n                <input type="text" placeholder="选择年级" readonly="readonly" ng-model="ctrl.clazzInfo.gradeName" />\r\n                <i class="icon ion-chevron-right" ></i>\r\n            </ion-item>\r\n            <ion-item class="item item-input border-solid border-color item-icon-right" ng-click="ctrl.openClazzModal()">\r\n                <input type="text" placeholder="选择班级" readonly="readonly" ng-model="ctrl.clazzInfo.className" />\r\n                <i class="icon ion-chevron-right"></i>\r\n            </ion-item>\r\n            <ion-item class="item item-input border-solid border-color item-icon-right"  ng-click="ctrl.openTextBookModal()">\r\n                \x3c!--<input type="text" placeholder="选择教材（不可修改，请谨慎选择）" readonly="readonly" ng-model="ctrl.clazzTextName" />--\x3e\r\n                <input type="text" placeholder="选择教材" readonly="readonly" ng-model="ctrl.clazzTextName" />\r\n                \x3c!--<i class="icon ion-chevron-right" ng-show="ctrl.isUpdate"></i>--\x3e\r\n                <i class="icon ion-chevron-right"></i>\r\n            </ion-item>\r\n            <ion-item class="item  border-solid border-color item-icon-right">\r\n                <input type="text" placeholder="输入班级名称" ng-model="ctrl.clazzInfo.name"/>\r\n            </ion-item>\r\n        </ion-list>\r\n    </ion-content>\r\n    <loading-processing></loading-processing>\r\n    <div class="bar bar-footer bar-balanced">\r\n        <button class="bar-item button-clear" ng-click="ctrl.add_update_Clazz()"\r\n                ng-disabled="ctrl.isDisabled">\r\n            {{ctrl.btnTitle}}</button>\r\n    </div>\r\n</ion-view>\r\n\r\n\r\n/*------------------------------------modal----------------------------------------*/\r\n<script id="selectProvince.html" type="text/ng-template">\r\n    <ion-modal-view>\r\n        <ion-header-bar class="bar-balanced" align-title="center">\r\n            <div class="button button-clear" ng-click="ctrl.provinceModal.hide()">\r\n                <i class="icon ion-ios-arrow-back"></i>\r\n                &nbsp;&nbsp;</div>\r\n            <h1 class="title" align-title="center">请选择省份</h1>\r\n        </ion-header-bar>\r\n        <ion-content>\r\n            <ul class="list" style="padding: 5px">\r\n                <li ng-repeat="(letter,provinces) in ctrl.Province">\r\n                    {{letter}}\r\n                    <br/>\r\n                        <span ng-repeat="province in provinces"\r\n                              class="item student-list"\r\n                              ng-click="ctrl.selectedProvince(province)">\r\n                            {{province.name}}\r\n                        </span>\r\n                    <br/>\r\n                </li>\r\n            </ul>\r\n        </ion-content>\r\n        <loading-processing></loading-processing>\r\n    </ion-modal-view>\r\n<\/script>\r\n\r\n<script id="selectCity.html" type="text/ng-template">\r\n    <ion-modal-view>\r\n        <ion-header-bar class="bar-balanced" align-title="center">\r\n            <div class="button button-clear"  ng-click="ctrl.cityModal.hide()">\r\n                <i class="icon ion-ios-arrow-back"></i>\r\n                &nbsp;&nbsp;</div>\r\n            <h1 class="title" align-title="center">请选择城市</h1>\r\n        </ion-header-bar>\r\n        <ion-content>\r\n            <ul class="list" style="padding: 5px">\r\n                <li ng-repeat="(letter,cities) in ctrl.City">\r\n                    {{letter}}\r\n                    <br/>\r\n                            <span ng-repeat="city in cities"\r\n                                  class="item student-list"\r\n                                  ng-click="ctrl.selectedCity(city)">\r\n                                {{city.name}}\r\n                            </span>\r\n                    <br/>\r\n                </li>\r\n            </ul>\r\n        </ion-content>\r\n        <loading-processing></loading-processing>\r\n    </ion-modal-view>\r\n<\/script>\r\n\r\n<script id="selectDistrict.html" type="text/ng-template">\r\n    <ion-modal-view>\r\n        <ion-header-bar class="bar-balanced" align-title="center">\r\n            <div class="button button-clear"  ng-click="ctrl.districtModal.hide()">\r\n                <i class="icon ion-ios-arrow-back"></i>\r\n                &nbsp;&nbsp;</div>\r\n            <h1 class="title">请选择区县</h1>\r\n        </ion-header-bar>\r\n        <ion-content>\r\n            <ul class="list" style="padding: 5px">\r\n                <li ng-repeat="(letter,districts) in ctrl.District">\r\n                    {{letter}}\r\n                    <br/>\r\n                    <span ng-repeat="district in districts"\r\n                          class="item add_span border-solid border-color"\r\n                          ng-click="ctrl.selectedDistrict(district)">\r\n                    {{district.name}}\r\n                    </span>\r\n                    <br/>\r\n                </li>\r\n            </ul>\r\n        </ion-content>\r\n        <loading-processing></loading-processing>\r\n    </ion-modal-view>\r\n<\/script>\r\n\r\n<script id="selectSchool.html" type="text/ng-template">\r\n    <ion-modal-view>\r\n        <ion-header-bar class="bar-balanced" align-title="center">\r\n            <div class="button button-clear" ng-click="ctrl.backFromEnterSchool()">\r\n                <i class="icon ion-ios-arrow-back"></i>\r\n                &nbsp;&nbsp;</div>\r\n            <h1 class="title">请选择学校</h1>\r\n        </ion-header-bar>\r\n        <ion-content ng-show="ctrl.School && !ctrl.addOtherSchoolFlag">\r\n            <ul class="list" style="padding: 5px">\r\n                <li ng-repeat="(letter,school) in ctrl.School">\r\n                    {{letter}}\r\n                    <br/>\r\n                    <span ng-repeat="sch in school"\r\n                          class="item add_span border-solid border-color"\r\n                          ng-click="ctrl.selectedSchool(sch)">\r\n                    {{sch.name}}\r\n                    </span>\r\n                    <br/>\r\n                </li>\r\n            </ul>\r\n            <div ng-show="ctrl.School && !ctrl.addOtherSchoolFlag" style="text-align: center;padding-bottom: 10px;margin-top: -10px;">\r\n                <span style="padding: 10px 20px;display: inline-block;border-radius: 5px;background-color: #f90;color: #fff;box-shadow: 1px 1px 3px rgba(0,0,0,0.3);"\r\n                 ng-click="ctrl.addOtherSchool()">没有您的学校？点击添加</span>\r\n            </div>\r\n        </ion-content>\r\n        <ion-content scroll="false" ng-show="!ctrl.School || ctrl.addOtherSchoolFlag">\r\n            <div style="padding: 20px;">\r\n                <label style="display: block;margin-bottom: 10px;">请输入学校名称:</label>\r\n                <input type="text" ng-model="ctrl.clazzInfo.schoolName"\r\n                       style="border: 1px solid #e1e1e1;width: 100%;border-radius: 5px;padding: 0 5px;"/>\r\n                <div style="text-align: right;margin-top: 20px;">\r\n                    <button style="padding: 6px 12px;border-radius: 5px;border: none;color: #fff;background-color: #58D152;box-shadow: 1px 1px 3px rgba(0,0,0,0.3);"\r\n                            ng-click="ctrl.hideSchoolModel($event)">确定</button>\r\n                </div>\r\n            </div>\r\n        </ion-content>\r\n        <loading-processing></loading-processing>\r\n    </ion-modal-view>\r\n<\/script>\r\n\r\n<script id="selectGrade.html" type="text/ng-template">\r\n    <ion-modal-view>\r\n        <ion-header-bar class="bar-balanced" align-title="center">\r\n            <div class="button button-clear" style="font-size: 17px" ng-click="ctrl.gradeModal.hide()">\r\n                <i class="icon ion-ios-arrow-back"></i>\r\n                &nbsp;&nbsp;</div>\r\n            <h1 class="title">请选择年级</h1>\r\n        </ion-header-bar>\r\n        <ion-content>\r\n            <ul class="list" style="padding: 5px">\r\n                <li ng-repeat="grade in ctrl.Grade"\r\n                    class="item add_span border-solid border-color"\r\n                    ng-click="ctrl.selectedGrade(grade)">\r\n                    {{grade.name}}\r\n                </li>\r\n            </ul>\r\n        </ion-content>\r\n        <loading-processing></loading-processing>\r\n    </ion-modal-view>\r\n<\/script>\r\n\r\n<script id="selectClazz.html" type="text/ng-template">\r\n    <ion-modal-view>\r\n        <ion-header-bar class="bar-balanced" align-title="center">\r\n            <div class="button button-clear" ng-click="ctrl.clazzModal.hide()">\r\n                <i class="icon ion-ios-arrow-back"></i>\r\n                &nbsp;&nbsp;</div>\r\n            <h1 class="title">请选择班级</h1>\r\n        </ion-header-bar>\r\n        <ion-content>\r\n            <ul class="list" style="padding: 5px">\r\n                <li ng-repeat="clazz in ctrl.Clazz"\r\n                    class="item add_span border-solid border-color"\r\n                    ng-click="ctrl.selectedClazz(clazz)">\r\n                    {{clazz.name}}\r\n                </li>\r\n            </ul>\r\n        </ion-content>\r\n        <loading-processing></loading-processing>\r\n    </ion-modal-view>\r\n<\/script>\r\n\r\n<script id="selectTextBook.html" type="text/ng-template">\r\n    <ion-modal-view>\r\n        <ion-header-bar class="bar-balanced" align-title="center">\r\n            <div class="button button-clear" ng-click="ctrl.textBookModal.hide()">\r\n                <i class="icon ion-ios-arrow-back"></i>\r\n                &nbsp;&nbsp;</div>\r\n            <h1 class="title">请选择教材</h1>\r\n        </ion-header-bar>\r\n        <ion-content>\r\n            <ul class="list" style="padding: 5px">\r\n                <li ng-repeat="item in ctrl.textBooks"\r\n                    class="item add_span border-solid border-color"\r\n                    ng-click="ctrl.selectedTextBook(item)">\r\n                    {{item.text}}\r\n                </li>\r\n            </ul>\r\n        </ion-content>\r\n        <loading-processing></loading-processing>\r\n    </ion-modal-view>\r\n<\/script>\r\n\r\n\r\n\r\n'},4506:function(e,n,t){"use strict";function i(e,n,t,i){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n,t,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,i){return i(e,n,t)||t},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,n,o),o=null),o}Object.defineProperty(n,"__esModule",{value:!0});var a,l,c,s,d,u,p,h=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),f=t(4496),g=(a=(0,f.View)("clazz_detail",{url:"/clazz_detail",styles:t(4507),template:t(4509),inject:["$scope","$ionicActionSheet","$rootScope","commonService","clazzService","$state","$ngRedux","profileService"]}),l=(0,f.select)(function(e){return e.cm_select_clazz_info}),c=(0,f.select)(function(e){return e.profile_user_auth.user.name}),a((d=function(){function e(){r(this,e),i(this,"clazzInfo",u,this),i(this,"teacherName",p,this),this.textBookName="北师版"}return h(e,[{key:"back",value:function(){this.go("home.clazz_manage")}},{key:"getClazzInfo",value:function(){this.clazzInfo.schoolName&&(this.schoolName=this.clazzInfo.schoolName),this.clazzName=this.clazzInfo.gradeName+this.clazzInfo.className,0==this.clazzInfo.status&&(this.status="关闭")}},{key:"onAfterEnterView",value:function(){this.getTextBookName()}},{key:"getTextBookName",value:function(){var e=this.clazzInfo.teachingMaterial||"BS-北师版";this.textBookName=e.split("-")[1]}},{key:"updateClazz",value:function(){this.clazzService.setAddStuStatus(!1),this.getStateService().go("add_clazz")}},{key:"deleteClazz",value:function(){var e=this;this.commonService.showConfirm("信息提示","你确定要删除该班级吗？").then(function(n){n&&e.clazzService.deleteClazz({classId:e.clazz.id}).then(function(n){if(n)return e.commonService.alertDialog("删除成功"),e.initRootScopeClazz(),void e.getStateService().go("clazz_manage");e.commonService.alertDialog("网络连接不畅，请稍后再试",1200)})})}},{key:"initRootScopeClazz",value:function(){this.profileService.getTeacherClazzList().then(function(e){e&&(this.getRootScope().clazzList=e.classes||[])})}},{key:"deleteClazz",value:function(){var e=this;if(Number(this.clazzInfo.studentCount)>=5){this.commonService.showAlert("提示","请加微信：17780695191，联系智算365指导老师删除班级。").then(function(){})}else{var n=this;this.commonService.showPopup({title:"删除班级",template:"<p>班级信息可通过点击班级号进行修改，删除班级后不可恢复，您确定要删除该班级吗？</p>",buttons:[{text:"确定",type:"button-positive",onTap:function(t){n.profileService.deleteSelectClazz(e.clazzInfo.id).then(function(e){e?(n.commonService.alertDialog("删除班级成功"),n.go("home.clazz_manage")):n.commonService.alertDialog("删除班级失败")})}},{text:"取消",type:"button-default",onTap:function(e){}}]})}}}]),e}(),u=o(d.prototype,"clazzInfo",[l],{enumerable:!0,initializer:null}),p=o(d.prototype,"teacherName",[c],{enumerable:!0,initializer:null}),s=d))||s);n.default=g},4507:function(e,n,t){var i=t(4508);"string"==typeof i&&(i=[[e.id,i,""]]);t(147)(i,{});i.locals&&(e.exports=i.locals)},4508:function(e,n,t){n=e.exports=t(146)(),n.push([e.id,".clazz_detail_file .header {\n  background: #d2f7ef;\n}\n",""])},4509:function(e,n){e.exports='<style>\r\n    .clazz_detail_file .header {\r\n        background: #d2f7ef;\r\n    }\r\n\r\n</style>\r\n<ion-view hide-nav-bar=true>\r\n    <ion-header-bar class="bar-balanced" align-title="center">\r\n        <button class="button buttons  button-clear header-item" ng-click="ctrl.back()">\r\n            <i class="icon ion-ios-arrow-back" style="padding-left: 10px"></i>\r\n            &nbsp;&nbsp;\r\n        </button>\r\n        <h1 class="title" style="font-family: \'Microsoft YaHei\'">班级详情</h1>\r\n    </ion-header-bar>\r\n    <ion-content padding="true" class="has-footer clazz_detail_file">\r\n        <ion-list>\r\n            <ion-item class="header">\r\n                <img src="{{ctrl.getRootScope().loadImg(\'class.svg\')}}" alt="" width="50px" height="50px"\r\n                     style="float: left"/>\r\n                <div style="margin-top: 6px;padding-left: 60px;">\r\n                    <h2>班级号：<span ng-bind="ctrl.clazzInfo.id"></span></h2>\r\n                    <div ng-bind="ctrl.clazzInfo.name" style="font-size: 0.875em;"></div>\r\n                </div>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <span>详细地址：</span>\r\n                <span>{{ctrl.clazzInfo.provinceName+ctrl.clazzInfo.cityName+ctrl.clazzInfo.districtName}}</span>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <span>学校名称：</span>\r\n                <span>{{ctrl.clazzInfo.schoolName ? ctrl.clazzInfo.schoolName : "未添加"}}</span>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <span>年级名称：</span>\r\n                <span>{{ctrl.clazzInfo.gradeName}}</span>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <span>班级名称：</span>\r\n                <span>{{ctrl.clazzInfo.className}}</span>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <span>教材版本：</span>\r\n                <span>{{ctrl.textBookName}}</span>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <span>教师名称：</span>\r\n                <span>{{ctrl.clazzInfo.teacher}}</span>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <span>申请通道：</span>\r\n                <span>{{ctrl.clazzInfo.status == 1 ? "开启" : "关闭"}}</span>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <span>班级人数：</span>\r\n                <span>{{ctrl.clazzInfo.studentCount}}</span>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <span>创建时间：</span>\r\n                <span>{{ctrl.clazzInfo.createdTime}}</span>\r\n            </ion-item>\r\n        </ion-list>\r\n    </ion-content>\r\n    <loading-processing></loading-processing>\r\n    <div class="bar bar-footer bar-balanced"\r\n         style="justify-content: space-around;-webkit-justify-content: space-around;">\r\n        <button class="bar-item button-clear" style="width: 120px;max-width: 120px;" ng-click="ctrl.updateClazz()"><i\r\n                class="icon ion-wrench"></i>\r\n            修改\r\n        </button>\r\n        <button class="bar-item button-clear" style="width: 120px;max-width: 120px;" ng-click="ctrl.deleteClazz()"><i\r\n                class="icon ion-wrench"></i>\r\n            删除\r\n        </button>\r\n    </div>\r\n</ion-view>'},4510:function(e,n,t){"use strict";function i(e,n,t,i){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o,a,l,c,s,d=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),u=t(4496),p=(o=(0,u.View)("clazz_student_list",{url:"/clazz_student_list/?clazzId&type&stuNum",styles:t(4511),template:t(4513),inject:["$scope","$rootScope","$log","$stateParams","$ionicActionSheet","$ionicLoading","$state","$interval","clazzService","finalData","commonService","$ionicPopup","$ngRedux"]}),a=(0,u.select)("cm_added_stu_list"),o((c=function(){function e(){r(this,e),i(this,"Students",s,this),this.listType=this.$stateParams.type,this.stuNum=this.$stateParams.stuNum,this.clazzId=this.$stateParams.clazzId,this.reasons=[{code:"1",text:"班级已存在该学生"},{code:"2",text:"该生不是我班学生，请家长确认"},{code:"3",text:"无法确认学生身份，请补充信息"}],this.Levels=[{level:"A"},{level:"B"},{level:"C"},{level:"D"}],this.initCtrl=!1,this.retFlag=!1,this.showFlag=!1,this.defaultOption=null,this.selectValue={value:null},this.selectLevel=null,this.editStudent=null}return d(e,[{key:"onAfterEnterView",value:function(){this.initRetFlag(),1==this.listType?this.getAddedStuList():this.getAddingStuList()}},{key:"back",value:function(){if(this.showFlag)return this.showFlag=!1,void this.getScope().$digest();this.go("home.clazz_manage")}},{key:"initRetFlag",value:function(){if(!this.clazzId)return void this.$log.error("clazzId is undefined!")}},{key:"refreshStuList",value:function(){var e=this;if(!this.clazzId)return void this.getScope().$broadcast("scroll.refreshComplete");this.clazzService.getStuList({classId:this.clazzId,status:1}).then(function(n){n||(e.getScope().$broadcast("scroll.refreshComplete"),e.commonService.alertDialog("网络连接不畅，请稍后再试")),e.retFlag=!0,e.getScope().$broadcast("scroll.refreshComplete")})}},{key:"selectedReason",value:function(e){angular.forEach(this.reasons,function(e){e.selected=!1}),e.selected=!0}},{key:"getAddedStuList",value:function(){var e=this;this.clazzService.getStuList({classId:this.clazzId,status:1}).then(function(n){n||e.commonService.alertDialog("网络连接不畅，请稍后再试"),e.retFlag=!0})}},{key:"getAddingStuList",value:function(){var e=this;this.clazzService.getClazzStudentListByStatus(this.clazzId,this.finalData.CHECK_STATUS_AUDIT).then(function(n){200==n.code?(e.hasSameName=!1,n.records.forEach(function(n){1==n.hasSameName&&(e.hasSameName=!0)}),e.addingStus=e.commonService.getRowColArray(n.records,3),e.retFlag=!0):e.commonService.alertDialog(JSON.stringify(n.msg))})}},{key:"selectStu",value:function(e,n){e.currentTarget.firstElementChild.hidden=n.selectedStu||!1,n.selectedStu=!n.selectedStu}},{key:"passBtnClick",value:function(){var e=this,n=this.commonService.getRowColArrayChecked(this.addingStus,"selectedStu",!0);if(!n||0==n.length)return void this.commonService.alertDialog("请先选择学生！");this.commonService.showConfirm("信息提示","<div><p>您确定要通过该申请吗？</p></div>").then(function(n){n&&e.submitRequest(1)})}},{key:"refuseClick",value:function(){var e=this;angular.forEach(this.reasons,function(e){e.selected=!1});var n=this.commonService.getRowColArrayChecked(this.addingStus,"selectedStu",!0);if(!n||0==n.length)return void this.commonService.alertDialog("请先选择学生！");this.$ionicPopup.show({template:'<div class="student_detail_file">\n                    <p class="reason-tip">请选择一个拒绝该学生的原因：</p>\n                    <div ng-repeat="reason in ctrl.reasons" >\n                        <ion-checkbox ng-click="ctrl.selectedReason(reason)" ng-model="reason.selected" class="select-reason-checkbox">{{reason.text}}</ion-checkbox>\n                    </div>\n                </div>',title:"信息提示",scope:this.getScope(),buttons:[{text:"<b>确定</b>",type:"button-positive",onTap:function(n){var t=!1;return angular.forEach(e.reasons,function(e){e.selected&&(t=!0)}),!!t||void n.preventDefault()}},{text:"取消",type:"",onTap:function(e){return!1}}]}).then(function(n){n&&e.submitRequest(-1)})}},{key:"showAns",value:function(){this.$ionicPopup.alert({title:"常见问题",template:'\n                <p style="color: #377AE6">问：后加入的学生能看到先前布置的作业吗？</p>\n                 <p>答：1、先前发给“全班”的作业，后加入的学生能自动收到。</p>\n                <p>2、先前分层布置的作业，后加入的学生看不到，需要老师将该学生分层后，在作业列表中按住作业项向左滑，点击“补发作业”。</p>\n                <p style="color: #377AE6">问：怎么查看学生的信息？</p>\n                <p>点击学生姓名可以查看学生详细信息</p>',okText:"确定"})}},{key:"ignoreClick",value:function(){this.submitRequest(-2)}},{key:"submitRequest",value:function(e){var n=this,t=this.commonService.getRowColArrayChecked(this.addingStus,"selectedStu",!0);if(!t||0==t.length)return void this.commonService.alertDialog("请先选择学生！");this.count=t.length;for(var i=[],r=0;r<t.length;r++){var o={};o.studentId=t[r].id,o.status=e,i.push(o)}i.length>0&&this.clazzService.teacherAudit(this.clazzId,i).then(function(e){if(n.getAddingStuList(),e&&(801===e.code||802===e.code||803===e.code)){var t='<div><p style="font-size: 18px">'+e.msg+"</p></div>";return void n.commonService.showAlert("信息提示",t)}n.commonService.alertDialog(e.msg,2e3)})}},{key:"getBtnValue",value:function(e){var n;switch(e){case 0:n=1;break;case 1:n=-1;break;case 2:n=-2}return n}},{key:"handleEditBtnClick",value:function(){var e=this,n=this.$ionicActionSheet.show({buttons:[{text:"<b class='ion-checkmark-circled'>通过</b>"},{text:"<b class='ion-close-circled'>拒绝</b>"},{text:"<b class='ion-navicon-round'>忽略</b>"}],buttonClicked:function(t){console.log(e),n();var i=e.commonService.getRowColArrayChecked(e.addingStus,"selectedStu",!0);if(!i||0==i.length)return void e.commonService.alertDialog("请先选择学生！");e.$ionicLoading.show({template:"正在处理，请稍后..."}),e.count=i.length;for(var r=e.getBtnValue(t),o=[],a=0;a<i.length;a++){var l={};l.studentId=i[a].id,l.status=r,o.push(l)}o.length>0&&e.clazzService.teacherAudit(e.clazzId,o).then(function(n){n&&(e.$ionicLoading.hide(),e.getAddingStuList(),e.commonService.alertDialog("请求处理成功!"))})},cancelText:"<b class='ion-forward'>取消</b>"})}},{key:"levelChange",value:function(e,n){var t=this;if(n=n||this.listIndex,e=e||this.selectLevel,this.selectValue.value){this.editStudent.level=this.selectValue.value;var i=this.Students[e][n];this.clazzService.levelChange(e,n).then(function(e){e?t.commonService.alertDialog('<p>成功将 <span style="color: #00ff89">'+i.name+'</span> 分到 <span style="color: #00ff89">'+i.level+"</span> 层</p>",1500):t.commonService.alertDialog("网络连接不畅，请稍后再试",1500)})}}},{key:"answer",value:function(){this.$ionicPopup.alert({title:"信息提示",template:"<p>可以把学生分成不同层，对不同层发布不同作业</p><p>点击学生姓名可以查看学生详细信息</p>",okText:"确定"})}},{key:"goStuDetail",value:function(e){this.clazzService.studentParam.stuId=e,this.clazzService.studentParam.clazzId=this.clazzId,this.clazzService.studentParam.listType=this.listType,this.clazzService.studentParam.stuNum=this.stuNum,this.getStateService().go("student_detail")}},{key:"filterStuGetFillNum",value:function(e,n){for(var t=0,i=0;i<e.length;i++)n&&1==e[i].hasSameName&&t++,n||0!=e[i].hasSameName||t++;return(3-t%3)%3+""}},{key:"showListSelect",value:function(e,n,t){var i=this;this.showFlag=!0,this.selectLevel=n,this.Levels.forEach(function(n,t){i.Levels[t].level==e.level&&(i.defaultOption=Number(t))}),this.listIndex=t,this.editStudent=e}}]),e}(),s=function(e,n,t,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,i){return i(e,n,t)||t},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,n,o),o=null),o}(c.prototype,"Students",[a],{enumerable:!0,initializer:null}),l=c))||l);n.default=p},4511:function(e,n,t){var i=t(4512);"string"==typeof i&&(i=[[e.id,i,""]]);t(147)(i,{});i.locals&&(e.exports=i.locals)},4512:function(e,n,t){n=e.exports=t(146)(),n.push([e.id,".clazz_student_list auto-box-con auto-box-row auto-box-block .block-content img {\n  width: 60px;\n  margin-left: 20px;\n  border-radius: 50%;\n  background: #fff;\n}\n.clazz_student_list auto-box-con auto-box-row auto-box-block .checker {\n  border-left: 2px solid #ddd;\n  border-bottom: 2px solid #ddd;\n}\n.clazz_student_list .claz_student_list_file .select-options {\n  width: 75px;\n  height: 20px;\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  justify-content: space-around;\n  -webkit-justify-content: space-around;\n  align-items: center;\n  -webkit-align-items: center;\n  border: solid 1px #a1a2a0;\n  background-color: #dddfe0;\n}\n.clazz_student_list .claz_student_list_file .layered {\n  text-align: center;\n  font-weight: bold;\n  background-color: #d2f7ef;\n}\n.clazz_student_list .claz_student_list_file .item {\n  border: none;\n}\n.clazz_student_list .claz_student_list_file .question-wrap {\n  padding: 10px 10px;\n  border: 1px solid red;\n  border-radius: 10px;\n}\n.clazz_student_list .claz_student_list_file .question-wrap p {\n  color: red;\n  font-size: 16px;\n  text-align: center;\n  margin: 0;\n}\n.clazz_student_list .claz_student_list_file .tip-wrap {\n  padding: 10px 6px;\n  border: 1px solid red;\n  border-radius: 10px;\n  margin: 20px 10px 20px 10px;\n}\n.clazz_student_list .claz_student_list_file .tip-wrap p {\n  color: red;\n  font-size: 15px;\n  text-align: center;\n  margin: 0;\n}\n",""])},4513:function(e,n){
e.exports='<ion-view  hide-nav-bar=true class="clazz_student_list">\r\n    <ion-header-bar class="bar-balanced" align-title="center">\r\n        <button class="button back-button buttons  button-clear header-item" ng-click="ctrl.back()">\r\n            <i class="icon ion-ios-arrow-back"></i>\r\n            &nbsp;&nbsp;\r\n        </button>\r\n        <h1 class="title" style="font-family: \'Microsoft YaHei\'">{{ctrl.listType==1?\'学生列表\':\'申请列表\'}}</h1>\r\n       \x3c!-- <button class="button button-clear"\r\n                ng-click="ctrl.answer()"\r\n                ng-if="ctrl.listType==1">\r\n            <img ng-src="{{ctrl.getRootScope().loadImg(\'common/help_icon.png\')}}" alt=""  class="common-help"/>\r\n        </button>--\x3e\r\n    </ion-header-bar>\r\n    \x3c!--  --\x3e\r\n    <list-select ng-if="ctrl.showFlag" options="{{ctrl.Levels}}" show-flag="ctrl.showFlag"\r\n                 default-option="{{ctrl.defaultOption}}"\r\n                 on-change="ctrl.levelChange()" select-value="ctrl.selectValue">\r\n    </list-select>\r\n\r\n    <ion-content padding="false" class="claz_student_list_file">\r\n        <div class="tip-wrap" ng-click="ctrl.showAns()" >\r\n            <p ><i class="icon ion-information-circled" style=" margin-right: 10px;color: blue;font-size: 25px;vertical-align: sub;"></i>\r\n                后加入班级学生能收到先前布置的作业吗?\r\n            </p>\r\n        </div>\r\n        \x3c!--下拉刷新--\x3e\r\n        <ion-refresher pulling-text="下拉刷新..." on-refresh="ctrl.refreshStuList()" spinner="ios"></ion-refresher>\r\n        <loading-processing></loading-processing>\r\n        <span ng-show="ctrl.stuNum==0 && ctrl.listType==1 && ctrl.retFlag" class="item">该班级中还没有学生！</span>\r\n        <div class="item list-title" ng-show="ctrl.listType==1 && ctrl.stuNum>0">\r\n            <span style="float: left">姓名(账号)</span>\r\n            <span style="float: right">分层</span>\r\n        </div>\r\n        <ul class="list" style="padding: 5px" ng-show="ctrl.listType==1 && ctrl.stuNum>0">\r\n            <li ng-repeat="(letter,students) in ctrl.Students">\r\n                <div class="card" ng-show="students.length>0">\r\n                    <div ng-show="students.length>0" class="layered">{{letter}}</div>\r\n                    <div ng-model="student.isClicked"\r\n                         class="item student-list"\r\n                         ng-repeat="student in students" ng-style="$index%2==0?{background:\'#fefbf5\'}:{}">\r\n\r\n                    <div class="student-name-wrap" ng-click="ctrl.goStuDetail(student.id)">\r\n                        <p class="student-name-text"><span ng-bind="student.name"></span>\r\n                            <span ng-if="student.loginName.indexOf(\'*\')===-1" style="font-weight: normal;">(学生端体验帐号)</span></p>\r\n                        <p ng-bind="\'(\'+student.loginName+\')\'" class="student-login-name-text"></p>\r\n                    </div>\r\n\r\n                    <div class="select-level-wrap">\r\n                        \x3c!--<select ng-model="student.level" class="level-select"\r\n                                ng-options ="item.level as item.level for item in ctrl.Levels"\r\n                                ng-change="ctrl.levelChange(letter,$index)">\r\n                        </select>--\x3e\r\n                        <div class="select-options level-select" ng-click="ctrl.showListSelect(student,letter,$index)">\r\n                            <label style="font-size: 16px">{{student.level}}</label>\r\n                            <i class="ion-android-arrow-dropdown"></i>\r\n                        </div>\r\n\r\n                    </div>\r\n                    \x3c!--<span ng-click="goStuDetail(student.id)" style="width:65%;display:inline-block">\r\n                        <span  style="font-weight: bold"></span>\r\n                        <span ></span>\r\n                    </span>\r\n                        <select ng-model="student.level" class="level-select"\r\n                                ng-options ="item.level as item.level for item in Levels"\r\n                                ng-change="levelChange(letter,$index)">\r\n                        </select>--\x3e\r\n                    </div>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n        <div  ng-show="ctrl.listType==0" style="margin: 5px 5px;text-align: left;border-radius: 10px">\r\n            <div class="question-wrap" ng-click="ctrl.showAns()">\r\n                <p ><i class="icon ion-information-circled common-help-bar-icon" ></i>\r\n                    后加入的学生能看到先前布置的作业吗？\r\n                </p>\r\n            </div>\r\n\r\n           \x3c!-- <p>答：先前发给“全班”的作业，后加入的学生能自动收到。\r\n                先前分层发布的作业，后加入的学生看不到，需要老师将该学生分层后，在作业列表中按住作业项向左滑，点击“补发作业”。</p>--\x3e\r\n        </div>\r\n      \x3c!--  <auto-box-con  decrease-height="135" ng-show="ctrl.listType==0">\r\n            <span ng-show="ctrl.addingStus.length==0 && ctrl.retFlag" class="item">当前没有申请的学生！</span>\r\n            <auto-box-row column="{{ctrl.filterStuGetFillNum(addingStuArry,false)}}" ng-repeat="addingStuArry in ctrl.addingStus" >\r\n                    <auto-box-block  ng-repeat="addingStu in addingStuArry" style="background: lightyellow" ng-if="addingStu.hasSameName==0">\r\n                        <div class="block-content" ng-click="ctrl.goStuDetail(addingStu.id)">\r\n                            <img src="{{ctrl.clazzService.getStuImg(addingStu.gender)}}" alt="">\r\n                            <div class="content-title" style="color: #553333">\r\n                                <p ng-bind="addingStu.name" style="margin: 0;"></p>\r\n                                <p ng-bind="addingStu.loginName" style="margin: 0 0 0 -3px;"></p>\r\n                            </div>\r\n                        </div>\r\n                        <div class="checker" ng-click="ctrl.selectStu($event,addingStu)">\r\n                            <i class="icon ion-checkmark check-icon " hidden="true"></i>\r\n                        </div>\r\n                    </auto-box-block>\r\n            </auto-box-row>\r\n\r\n            <div ng-show="ctrl.hasSameName"\r\n                 style="background: lightyellow;color: #553333;margin: 10px 5px;text-align: center;border-radius: 10px">\r\n                <p style="padding: 10px;">以下学生与审核通过的学生有同名，如果是同一学生，请不要通过</p>\r\n            </div>\r\n\r\n            <auto-box-row column="{{ctrl.filterStuGetFillNum(addingStuArry,true)}}" ng-repeat="addingStuArry in ctrl.addingStus">\r\n                <auto-box-block  ng-repeat="addingStu in addingStuArry" style="background: lightyellow" ng-if="addingStu.hasSameName==1">\r\n                    <div class="block-content" ng-click="ctrl.goStuDetail(addingStu.id)">\r\n                        <img src="{{ctrl.clazzService.getStuImg(addingStu.gender)}}" alt="">\r\n                        <div class="content-title" style="color: #553333">\r\n                            <p ng-bind="addingStu.name" style="margin: 0;"></p>\r\n                            <p ng-bind="addingStu.loginName" style="margin: 0 0 0 -3px;"></p>\r\n                        </div>\r\n                    </div>\r\n                    <div class="checker" ng-click="ctrl.selectStu($event,addingStu)">\r\n                        <i class="icon ion-checkmark check-icon " hidden="true"></i>\r\n                    </div>\r\n                </auto-box-block>\r\n            </auto-box-row>\r\n        </auto-box-con>--\x3e\r\n\r\n\r\n\r\n    </ion-content>\r\n\r\n    <ion-footer-bar class="button-balanced"  ng-show="ctrl.listType==0">\r\n        <button class="button-clear bg-calm  bar-item"\r\n                ng-click="ctrl.passBtnClick()">\r\n            <i class="icon ion-checkmark-circled">\r\n            </i>\r\n            通过\r\n        </button>\r\n        <button class="button-clear bg-calm  bar-item"\r\n                ng-click="ctrl.refuseClick()">\r\n            <i class="icon ion-close-circled">\r\n            </i>\r\n            拒绝\r\n        </button>\r\n        \x3c!--<button class="button-clear bg-calm  bar-item"\r\n                ng-click="ignoreClick()">\r\n            <i class="icon ion-navicon-round">\r\n            </i>\r\n            忽略\r\n        </button>--\x3e\r\n    </ion-footer-bar>\r\n\r\n\r\n</ion-view>'},4514:function(e,n,t){"use strict";function i(e,n,t,i){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o,a,l,c,s,d=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),u=t(4496),p=(o=(0,u.View)("student_detail",{url:"/student_detail",styles:t(4515),template:t(4517),inject:["$scope","$state","clazzService","commonService","$rootScope","$ngRedux","$ionicActionSheet","$log","$stateParams","$ionicPopup"]}),a=(0,u.select)(function(e){return e.cm_select_stu_detail}),o((c=function(){function e(){r(this,e),i(this,"myInfo",s,this),this.studentParam=this.clazzService.studentParam,this.reasons=[{code:"1",text:"班级已存在该学生"},{code:"2",text:"该生不是我班学生，请家长确认"},{code:"3",text:"无法确认学生身份，请补充信息"}]}return d(e,[{key:"onAfterEnterView",value:function(){this.getStudentInfo()}},{key:"getStudentInfo",value:function(){var e=this;this.clazzService.getStudentInfo({stuId:this.studentParam.stuId}).then(function(n){200!=n.code&&e.commonService.alertDialog("网络连接不畅，请稍后再试",1200),e.studentInfo=n.student,e.parentInfo=n.parent,e.parentInfo instanceof Array&&e.parentInfo.forEach(function(n){n.loginName.match(/p/i)&&(n.name=e.studentInfo.name+(1==n.gender?"爸爸":"妈妈"))})})}},{key:"selectedReason",value:function(e){angular.forEach(this.reasons,function(e){e.selected=!1}),e.selected=!0}},{key:"deleteStudent",value:function(){var e=this;angular.forEach(this.reasons,function(e){e.selected=!1});this.$ionicPopup.show({template:'<div class="student_detail_file">\n                    <p class="reason-tip">请选择一个拒绝该学生的原因：</p>\n                    <div ng-repeat="reason in ctrl.reasons" >\n                        <ion-checkbox ng-click="ctrl.selectedReason(reason)" ng-model="reason.selected" class="select-reason-checkbox">{{reason.text}}</ion-checkbox>\n                    </div>\n                </div>',title:"信息提示",scope:this.getScope(),buttons:[{text:"<b>确定</b>",type:"button-positive",onTap:function(n){var t=!1;return angular.forEach(e.reasons,function(e){e.selected&&(t=!0)}),!!t||void n.preventDefault()}},{text:"取消",type:"",onTap:function(e){return!1}}]}).then(function(n){n&&e.clazzService.deleteStudent({classId:e.studentParam.clazzId,studentId:e.studentParam.stuId}).then(function(n){if(200==n.code)return e.commonService.alertDialog("删除成功"),void e.getStateService().go("clazz_student_list",{clazzId:e.studentParam.clazzId,type:e.studentParam.listType,stuNum:parseInt(e.studentParam.stuNum)-1});e.commonService.alertDialog("网络连接不畅，请稍后再试",1200)})})}},{key:"back",value:function(){this.getStateService().go("clazz_student_list",{clazzId:this.studentParam.clazzId,type:this.studentParam.listType,stuNum:this.studentParam.stuNum})}}]),e}(),s=function(e,n,t,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,i){return i(e,n,t)||t},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,n,o),o=null),o}(c.prototype,"myInfo",[a],{enumerable:!0,initializer:null}),l=c))||l);n.default=p},4515:function(e,n,t){var i=t(4516);"string"==typeof i&&(i=[[e.id,i,""]]);t(147)(i,{});i.locals&&(e.exports=i.locals)},4516:function(e,n,t){n=e.exports=t(146)(),n.push([e.id,"@charset \"UTF-8\";\n.display-flex {\n  display: flex;\n  display: -webkit-flex;\n  align-items: center;\n  justify-content: center;\n  -webkit-justify-content: center;\n  -webkit-align-items: center;\n}\n.display-flex-pure {\n  display: flex;\n  display: -webkit-flex;\n}\n.overflow-ellipsis {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.flex_1 {\n  flex: 1;\n  -webkit-flex: 1;\n}\n.flex_2 {\n  flex: 2;\n  -webkit-flex: 2;\n}\n.flex_3 {\n  flex: 3;\n  -webkit-flex: 3;\n}\n.flex_4 {\n  flex: 4;\n  -webkit-flex: 4;\n}\n.flex_5 {\n  flex: 5;\n  -webkit-flex: 5;\n}\n.flex_6 {\n  flex: 6;\n  -webkit-flex: 6;\n}\n.flex_7 {\n  flex: 7;\n  -webkit-flex: 7;\n}\n.flex_8 {\n  flex: 8;\n  -webkit-flex: 8;\n}\n.flex_9 {\n  flex: 9;\n  -webkit-flex: 9;\n}\n.com_align_item {\n  align-items: center;\n  -webkit-align-items: center;\n}\n.com_justify-content {\n  justify-content: center;\n  -webkit-justify-content: center;\n}\n.com_align_item_end {\n  align-items: flex-end;\n  -webkit-align-items: flex-end;\n}\n.com_justify_content_space {\n  justify-content: space-between;\n  -webkit-justify-content: space-between;\n}\n.com_flex-direction_column {\n  flex-direction: column;\n  -webkit-flex-direction: column;\n}\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nbutton,\nbody {\n  font-family: 'microsoft yahei';\n}\nbody {\n  line-height: 1.42857143;\n}\n.student_detail_file .reason-tip {\n  margin: 0px;\n  font-size: 15px!important;\n}\n.student_detail_file .select-reason-checkbox {\n  border: none;\n  background: none;\n  font-size: 13px;\n  padding-left: 32px!important;\n}\n.student_detail_file .select-reason-checkbox .checkbox-icon {\n  margin-left: -17px;\n}\n",""])},4517:function(e,n){e.exports='<ion-view hide-nav-bar=true class="student_detail_file">\r\n    <ion-header-bar class="bar-balanced" align-title="center">\r\n        <button class="button back-button buttons  button-clear header-item" ng-click="ctrl.back()">\r\n            <i class="icon ion-ios-arrow-back"></i>\r\n            &nbsp;&nbsp;\r\n        </button>\r\n        <h1 class="title" style="font-family: \'Microsoft YaHei\'">学生详情</h1>\r\n    </ion-header-bar>\r\n    <ion-content padding="true" class="has-footer">\r\n        <div class="card">\r\n            <ion-item>\r\n                <span>学生</span>\r\n            </ion-item>\r\n            <ion-item>\r\n                <img src="{{ctrl.clazzService.getStuImg(ctrl.studentInfo.gender)}}"\r\n                     alt="" widt="50px" height="50px"  style="float: left"/>\r\n                <div ng-bind="ctrl.studentInfo.name" style="margin-top: 15px;padding-left: 60px;"></div>\r\n            </ion-item>\r\n            <ion-item>\r\n                <span>账号：</span>\r\n                <span ng-bind="ctrl.studentInfo.loginName"></span>\r\n            </ion-item>\r\n        </div>\r\n\r\n\r\n        <div ng-repeat="parent in ctrl.parentInfo" class="list card">\r\n            <ion-item>\r\n                <span>家长</span>\r\n            </ion-item>\r\n            <ion-item>\r\n                <img src="{{ctrl.clazzService.getParentImg(parent.gender)}}"\r\n                     alt="" widt="50px" height="50px"  style="float: left"/>\r\n                <div ng-bind="parent.name" style="margin-top: 15px;padding-left: 60px;"></div>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <span>账号：</span>\r\n                <span ng-bind="parent.loginName"></span>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <span>电话：</span>\r\n                <span ng-bind="parent.telephone"></span>\r\n            </ion-item>\r\n\r\n            \x3c!--<ion-item>--\x3e\r\n                \x3c!--<span>与学生的关系：</span>--\x3e\r\n            \x3c!--<span>{{parent.relation==0?\'父亲\':--\x3e\r\n                    \x3c!--parent.relation==1?\'母亲\':--\x3e\r\n                    \x3c!--parent.relation==2?\'爷爷\':--\x3e\r\n                    \x3c!--parent.relation==3?\'奶奶\':--\x3e\r\n                    \x3c!--parent.relation==4?\'外公\':--\x3e\r\n                    \x3c!--parent.relation==5?\'外婆\':\'其他\'}}--\x3e\r\n            \x3c!--</span>--\x3e\r\n            \x3c!--</ion-item>--\x3e\r\n        </div>\r\n    </ion-content>\r\n    <loading-processing></loading-processing>\r\n    <div class="bar bar-footer bar-balanced" ng-if="ctrl.studentParam.listType==1">\r\n        <button class="bar-item button-clear" ng-click="ctrl.deleteStudent()"><i class="icon ion-ios-trash-outline"></i>\r\n            删除学生</button>\r\n    </div>\r\n</ion-view>'}});